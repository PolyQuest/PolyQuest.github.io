polymorph true
:start
html true
btn_visible false
inv_visible false
style_backcolor = "#FFFFC8"
goto code


:-19
proc startmusicloop
<html>
<center>ПОДЗЕМЕЛЬЯ ЧЕРНОГО ЗАМКА</center>
Прежде чем отправиться в путешествие, вы можете <a href=btn:-18>ознакомиться с правилами игры</a>. Если же вы уже знакомы с ними, тогда <a href=btn:-8>вперед</a>!<br>
(Если хотите, можете пропустить вступление и сразу <a href=btn:-2>начать выбирать заклятия</a>.)
</html>

end

:-18
<html>
<center>ПОДЗЕМЕЛЬЯ ЧЕРНОГО ЗАМКА. ПРАВИЛА ИГРЫ</center><br>
Перед тем как отправиться в путешествие,  необходимо определить, насколько вы сильный,  выносливый, искусный и обаятельный воин, то есть установить изначальные ЛОВКОСТЬ, СИЛУ и ОБАЯНИЕ.<br>
ЛОВКОСТЬ  - это умение владеть мечом, сражаться, противостоять  врагам. Иногда это и обычная ловкость рук. Одним словом, ваши физические возможности. Естественно, чем больше Ловкость, тем лучше, однако было бы наивно полагать, что все приключения рассчитаны только на здоровяков и сорвиголов. Не расстраивайтесь, если ваша изначальная ЛОВКОСТЬ будет не так высока, как хотелось бы, - есть немало других способов победить, не хватаясь каждые пять минут за оружие.<br><br>
<a href=btn:-17>Продолжите чтение правил</a> или <a href=btn:-8>начнете игру</a>?
</html>

end

:-17
<html>
<center>ПОДЗЕМЕЛЬЯ ЧЕРНОГО ЗАМКА. ПРАВИЛА ИГРЫ</center><br>
СИЛА - это прежде всего показатель вашего здоровья на данный момент. Она отражает не только наличие или отсутствие мускул, но также и волю к жизни, решимость довести начатое дело до конца. Ведь и в действительности, когда говорят "сильный человек" - это не только про штангиста. Если показатель СИЛЫ становится равен нулю, вы погибаете, и придется начинать все сначала.<br>
ОБАЯНИЕ. Нередко для того, чтобы куда-нибудь попасть, совсем не обязательно применять силу. Например, чтобы вас пропустили, вы можете попытаться уговорить, убедить собеседника, рассказывая правдивые или выдуманные истории. И здесь на помощь придет проверка ОБАЯНИЯ. В случае успеха знайте, что ОБАЯНИЕ увеличилось на одну единицу, что окажется небесполезным в следующий раз. Если оно будет больше 12, в дальнейшем проверять его не имеет смысла. Вы чертовски обаятельны и можете смело этим пользоваться. Но верно и обратное. Если подстерегает неудача, ОБАЯНИЕ уменьшится также на одну единицу (что, разумеется, не мешает ему в следующий раз вновь повыситься). Однако если оно упало до 1, дальнейшие проверки опять же бессмысленны. Бывают люди настолько не внушающие доверия, что им никто не верит, даже если они говорят чистую правду. Отныне до конца игры вы становитесь именно таким человеком.<br><br>
<a href=btn:-16>Продолжите чтение правил</a> или <a href=btn:-8>начнете игру</a>?
</html>

end

:-16
<html>
<center>ПОДЗЕМЕЛЬЯ ЧЕРНОГО ЗАМКА. ПРАВИЛА ИГРЫ</center><br>
Все три параметра для вас определит программа при каждом начале игры. Но учтите: в ходе путешествия вы крайне редко сумеете превысить эти изначальные параметры.<br>
Но у каждого искателя приключений есть и еще один параметр: УДАЧА. По сути дела, это благосклонность к вам Судьбы. В трудном путешествии не раз придется полагаться на волю случая и уповать только на свое везение. В таком случае вам будет предлагаться ПРОВЕРИТЬ СВОЮ УДАЧУ. Повезло вам или нет, без труда определит программа. По сути, здесь просто кидается кубик и выпавшая на нем грань зачеркивается. При этом, если при определении удачи в будущем снова выпадет эта грань, считается, что вам не повезло. А если при проверке удачи выпавшая грань кубика еще не зачеркнута, считается, что вы удачливы. Отображаемый параметр УДАЧА определяется количеством незачеркнутых граней кубика. Перед началом путешествия программа два раза проверяет удачу. Таким образом, одна или две грани кубика (уж как повезет) должны быть зачеркнуты еще до начала путешествия. Очень скоро станет понятно, что чем больше вы полагаетесь на удачу, тем меньше остается шансов на везение в будущем. Поэтому каждый раз, когда вам предложат ПРОВЕРИТЬ СВОЮ УДАЧУ, не обязательно проверять ее, но тогда придется считать, что вам не повезло. Кроме того, не исключено, что в дороге попадутся вещи, восстанавливающие удачу.<br><br>
<a href=btn:-15>Продолжите чтение правил</a> или <a href=btn:-8>начнете игру</a>?
</html>

end

:-15
<html>
<center>ПОДЗЕМЕЛЬЯ ЧЕРНОГО ЗАМКА. ПРАВИЛА ИГРЫ</center><br>
Иногда вам придется сражаться с людьми или существами, которые находятся у кого-нибудь на службе. В этом случае важную роль может сыграть такой показатель, как ЛОЯЛЬНОСТЬ.<br>
От чего зависит изначальная ЛОЯЛЬНОСТЬ вашего противника? От многих вещей, большинство из которых так и останутся вам неизвестны. Здесь сыграет роль и авторитет хозяина, и оплата, и личные представления о верности, и многое другое. Однако в целом ЛОЯЛЬНОСТЬ покажет, в какой степени то или иное существо готово рисковать жизнью ради хозяина.<br><br>
<a href=btn:-14>Продолжите чтение правил</a> или <a href=btn:-8>начнете игру</a>?
</html>

end

:-14
<html>
<center>ПОДЗЕМЕЛЬЯ ЧЕРНОГО ЗАМКА. ПРАВИЛА ИГРЫ</center><br>
Во время сражения, если вам удалось ранить наемника, он начинает несколько меньше верить в победу. И задумывается, стоит ли его хозяин того, чтобы отдать за него жизнь. В результате подобных невеселых раздумий его ЛОЯЛЬНОСТЬ уменьшается на 2 единицы. Если в течение двух Раундов атаки подряд вы парируете его удары, противник начинает понимать, что встретился с достаточно серьезным сопротивлением. Его шансы на победу становятся все более проблематичны, и ЛОЯЛЬНОСТЬ падает на 1 единицу. Однако, когда ему удается нанести вам ранение, боевой дух возрастает, а вместе с ним и ЛОЯЛЬНОСТЬ - на 1 единицу.<br>
Почему все это важно? Потому, что, если ЛОЯЛЬНОСТЬ вашего противника станет равна 3 или меньше (за исключением специально оговоренных случаев), он обратится в бегство или сдастся. Когда же она превысит 18, его вера в победу будет настолько велика, что каждый удар отнимет у вас на 1 СИЛУ больше обычного.<br><br>
<a href=btn:-13>Продолжите чтение правил</a> или <a href=btn:-8>начнете игру</a>?
</html>

end

:-13
<html>
<center>ПОДЗЕМЕЛЬЯ ЧЕРНОГО ЗАМКА. ПРАВИЛА ИГРЫ</center><br>
На страницах книги вы нередко будете встречать врагов, с которыми придется сражаться. Если нет возможности избежать боя, а также если вы сами этого не хотите, поступайте следующим образом. Бой происходит пошагово: сначала вы, потом ваш противник. Цифры на экране покажут, сколько у него и у вас осталось сил. Каждый раз, когда вы нажмете кнопку "Сражаться", программа проведет один раунд боя. Если отступление возможно (о чем вас предупредят заблаговременно), к вашим услугам кнопка "Убежать" (правда, не забудьте, что нередко бывает с теми, кто поворачивается к врагу спиной).<br>
При определении победившего в раунде боя будет принята в расчет ваша Ловкость и Ловкость противника. Может так случиться, что вы просто обменяетесь ударами, но чаще всего один из вас будет ранен. Большинство видов оружия отнимет у противника 2 Силы. Большинство, но не все. Если Сила одного из сражающихся становится равна нулю, он погиб. Иногда вам придется сражаться не с одним, а с несколькими врагами одновременно. В этом случае перед началом каждого Раунда атаки выберите, в чью сторону будет направлен ваш удар.<br><br>
<a href=btn:-12>Продолжите чтение правил</a> или <a href=btn:-8>начнете игру</a>? 
</html>

end

:-12
<html>
<center>ПОДЗЕМЕЛЬЯ ЧЕРНОГО ЗАМКА. ПРАВИЛА ИГРЫ</center><br>
Как будет сказано чуть позже, перед началом пути вам дается ЕДА на три дня. Каждая ЕДА сможет восстановить 4 СИЛЫ. При этом можно есть, не дожидаясь специального приглашения книги, в любой момент, когда почувствуете голод. Но только не во время боя! У вас будут не настолько легкие противники, чтобы бороться с ними с полным ртом.<br>
Для еды, а также всего, что только найдете или приобретете по пути, у вас с собой будет заплечный мешок. Однако он не бездонен - в нем есть место только для семи предметов. Еда на три дня займет место одного из них. Если впоследствии мешок будет полон, а вам захочется прихватить с собой что-нибудь еще, что-то придется выложить. Но не расстраивайтесь: далеко не все находки пригодятся в пути.<br><br>
<a href=btn:-11>Продолжите чтение правил</a> или <a href=btn:-8>начнете игру</a>?
</html>

end

:-11
<html>
<center>ПОДЗЕМЕЛЬЯ ЧЕРНОГО ЗАМКА. ПРАВИЛА ИГРЫ</center><br>
Конечно, не все стоит таскать за спиной. Например, меч будет в ножнах. А вот любое другое оружие можно будет взять с собой только в том случае, если это будет специально оговорено в книге, - вряд ли вы сможете засунуть в заплечный мешок, скажем, копье. С другой стороны, какой-нибудь амулет можно носить и на шее.<br>
На каждом экране вы увидите одну или несколько ссылок, по которым сможете пойти. В зависимости от вашего выбора будет меняться и сюжет игры. При этом не только одни и те же эпизоды можно проходить по-разному в зависимости от вашего желания. Можем вам пообещать, что пройдя игру до конца и даже выиграв, вы еще оставите для себя немало мест, в которых стоит побывать.<br><br>
<a href=btn:-10>Продолжите чтение правил</a> или <a href=btn:-8>начнете игру</a>?
</html>

end

:-10
<html>
<center>ПОДЗЕМЕЛЬЯ ЧЕРНОГО ЗАМКА. ПРАВИЛА ИГРЫ</center><br>
Теперь несколько слов о работе программы.<br><br>
На панели в нижней части экрана вы видите 5 кнопок. Это заплечный мешок, оружие, одежда, украшения (или другие предметы на человеке), заклятия. Нажмите на одну из этих кнопок - и справа появятся все имеющиеся у вас предметы из выбранной категории.<br>
Выделенные в тексте слова бывают двух типов: переходы на следующие параграфы и предметы, которые можно взять  с собой. Поэтому если в тексте вам предлагается взять какой-либо предмет, то щелкните на выделенном слове и этот предмет окажется у вас.<br>
Поскольку число предметов в заплечном мешке ограничено, иногда вам придется выбрасывать ненужные предметы. Чтобы сделать это, нажмите левой кнопкой мыши на выбранном предмете и, удерживая ее, "перенесите" предмет в корзину в правом нижнем углу.<br><br>
<a href=btn:-9>Продолжите чтение правил</a> или <a href=btn:-8>начнете игру</a>?
</html>

end

:-9
<html>
<center>ПОДЗЕМЕЛЬЯ ЧЕРНОГО ЗАМКА. ПРАВИЛА ИГРЫ</center><br>
Если вы проголодались (то есть ваша сила заметно уменьшилась по сравнению с первоначальной), вы можете съесть что-нибудь из заплечного мешка (яблоко, апельсин, мандарин или еду, которую вам дали перед началом путешествия). Для этого дважды щелкните левой кнопкой мыши на выбранном предмете. Аналогично вы можете использовать заклятие исцеления. Вода тоже может восстановить вам силы. Чтобы попить воды, щелкните мышью на цифре, показывающей количество оставшихся глотков во фляге.<br>
Во время путешествия вы можете терять силы от усталости или ранений (вы даже можете внезапно умереть от истощения) или же, наоборот, восстанавливать их в результате отдыха или сытного обеда. В тексте изменение силы не отмечено, но вы можете догадаться об этом по характерным звукам. То же касается увеличения или уменьшения монет в вашем кошельке.<br>
Чтобы сохранить игру, не выходя в главное меню, нажмите <u>CTRL+S</u>, чтобы загрузить - <u>CTRL+O</u> или <u>CTRL+L</u>.<br>
И ЧТО БЫ НИ СЛУЧИЛОСЬ В ПУТИ,<br>
ПОМНИТЕ: <a href=btn:-8>ВСЕ ЗАВИСИТ ТОЛЬКО ОТ ВАС</a>!
</html>

end

:-8
<html>
<center>ПОДЗЕМЕЛЬЯ ЧЕРНОГО ЗАМКА. ВСТУПЛЕНИЕ</center><br>
В самое обыкновенное сказочное королевство приходит беда. В тихом лесу, на его юго-западных границах, появляется хитрый и коварный волшебник Барлад Дэрт, в совершенстве овладевший искусством черной магии. Никто не знает, из каких земель он пришел и что его привело на земли Элгариола. Вскоре окрестные жители начинают сторониться леса, который темные колдовские силы сделали таинственным и непроходимым, с множеством беспощадных ловушек и мерзких глубоких болот. Лес наводнили Гоблины и Орки - уродливые и жестокие воины Барлада Дэрта. А в самом центре леса, который теперь называют не иначе как Зачарованным, волшебник воздвиг Черный замок, и <a href=btn:-7>никому еще не удавалось</a> увидеть его и безнаказанно вернуться обратно.
</html>

end

:-7
<html>
Но чародей не успокаивается на достигнутом. Узнав, что во дворце живет прекрасная Принцесса - единственная дочь Короля, - он посылает к ее отцу черных послов просить руки очаровательной девушки. Гордый Король Элгариола отказывает, но послы появляются еще дважды. Каждый раз они спускаются с неба на могучих крылатых конях, и только Король может без страха смотреть им в глаза, столь большая и грозная сила таится за ними. Но монарх непреклонен, хотя и понимает: Барлад Дэрт так просто не откажется от своих намерений.<br>
И вот, когда послы в третий раз покидают дворец, Принцесса исчезает вместе с ними. Заклятие волшебника переносит ее в Черный замок. Однако она, достойная дочь своего отца, бесстрашно отказывается стать женой чародея, и тот, не в силах сдержать свою злобу, <a href=btn:-6>погружает ее в волшебный сон</a>.
</html>

end

:-6
<html>
По всему королевству герольды созывают смельчаков, обещая любую награду тому, кто освободит Принцессу. Один за другим покидают они столицу по Главному Южному тракту и исчезают в Зачарованном лесу. Но ни один не возвращается назад: Черный замок умеет беречь свои тайны.<br>
Хотите попытаться миновать западни Зачарованного леса, сразиться с беспощадными воинами Барлада Дэрта, проникнуть в Черный замок и разрушить колдовские чары? Если да, то <a href=btn:-5>собирайтесь в путь</a>.
</html>

end

:-5
<html>
Как и положено в сказках, путешествие начинается перед королевским дворцом. Узнав, зачем вы пришли, стражники провожают вас в тронный зал, и вы предстаете перед Королем. Обрадованный тем, что есть еще в королевстве герои, готовые рискнуть своей жизнью ради его дочери, он отправляет вас к придворному астрологу и волшебнику, магу Белого Круга Майлину. Ведь вам придется сражаться не только с воинами, но и со злыми духами - без волшебства в дороге не обойтись.<br>
Однако даже Майлин не может предвидеть всех ловушек Барлада Дэрта, да и времени на учебу у вас совсем мало. Он лишь успевает <a href=btn:-4>научить вас самым необходимым заклятиям</a> и дать несколько советов.
</html>

end

:-4
<html>
Вот заклятия, которые вам предлагаются для изучения:<br>
ЗАКЛЯТИЕ ЛЕВИТАЦИИ - с его помощью вы сможете подняться в воздух и перелететь то препятствие, которое вам встретится. Но будьте осторожны: заклятие действует не слишком долго, и если вы не рассчитаете свои силы, то можете опуститься на землю раньше, чем препятствие или опасность будут позади.<br>
ЗАКЛЯТИЕ ОГНЯ - поможет вам в нужный момент создать в воздухе огненный шар и направить его на врагов. Но в лесах и закрытых помещениях им надо пользоваться осмотрительно, чтобы не устроить пожар.<br>
ЗАКЛЯТИЕ ИЛЛЮЗИИ - вы создадите у вашего врага необходимую иллюзию и сможете спастись в тех ситуациях, из которых другого выхода не будет. Но заклятие иллюзии - опасное колдовство: ведь иллюзия рассеивается, и враг понимает, что его одурачили. Кроме того, это одно из немногих заклятий, требующих особой концентрации сил и хотя бы некоторого времени. Если на вас уже напали, воспользоваться иллюзией вы просто-напросто не успеете.<br>
ЗАКЛЯТИЕ ЛОВКОСТИ - прибавит вам ловкость, но только на время одного боя. <a href=btn:-3>Но и это еще не все</a>.
</html>

end

:-3
<html>
ЗАКЛЯТИЕ СЛАБОСТИ - сделает вашего врага неуклюжим и неповоротливым, ослабит мощность его удара.<br>
ЗАКЛЯТИЕ КОПИИ - с его помощью можно будет при случае создать точную Копию вашего противника, которую вы будете контролировать. Тогда, прежде чем атаковать вас, ему придется драться с собственной Копией, ЛОВКОСТЬ и СИЛА которой будут равны его ЛОВКОСТИ и СИЛЕ. Если ваш враг победит свою Копию, то с ним придется драться вам самим. Если же Копия сразит противника, то заклятие теряет силу и Копия исчезает, а вы продолжаете свой путь. Однако если противников было несколько, а Копию вы смогли или захотели создать только одну, то с остальными придется драться.<br>
ЗАКЛЯТИЕ ИСЦЕЛЕНИЯ - в любой момент (но не во время сражения) добавит вам 8 СИЛ. Впрочем, вы можете накладывать его не только на себя, но и на любое живое существо.<br>
ЗАКЛЯТИЕ ПЛАВАНИЯ - вы никогда не видели ни реки, ни озера, а в дороге может случиться всякое. Очевидно, что времени учиться плавать уже нет. Но с помощью этого заклятия вы сможете переплыть любую водную преграду, которая вам встретится (если ее смог бы преодолеть достаточно опытный пловец). Однако будьте внимательны: как только вы вступите на землю, заклятие утратит свою силу.<br>
Обрадовавшись такой сильной магической поддержке, <a href=btn:-2>вы торопите Майлина с обучением</a>.
</html>

end

:-2
<html>
Однако не спешите: неопытный ученик мага способен без риска для своей жизни воспользоваться заклятиями только 10 раз. Более того, вы не успеете научиться свободно владеть ими, так что Майлину придется для каждого применения любого из них сказать вам свое особое волшебное слово. Поэтому можете выбрать какие угодно заклятия и в любом количестве, но всего их должно быть не более десяти. Помните: каждое заклятие используется только один раз, после этого вам придется его вычеркнуть и обходиться оставшимися.<br>
А теперь выбирайте заклятия:<br>
<a href="javascript: addItem('Левитация')">ЗАКЛЯТИЕ ЛЕВИТАЦИИ</a>     
<a href="javascript: addItem('Огонь')">ЗАКЛЯТИЕ ОГНЯ</a><br>
<a href="javascript: addItem('Иллюзия')">ЗАКЛЯТИЕ ИЛЛЮЗИИ</a>     
<a href="javascript: addItem('Ловкость')">ЗАКЛЯТИЕ ЛОВКОСТИ</a><br>
<a href="javascript: addItem('Слабость')">ЗАКЛЯТИЕ СЛАБОСТИ</a>       
<a href="javascript: addItem('Исцеление')">ЗАКЛЯТИЕ ИСЦЕЛЕНИЯ</a><br>
<a href="javascript: addItem('Плавание')">ЗАКЛЯТИЕ ПЛАВАНИЯ</a>       
<a href="javascript: addItem('Копия')">ЗАКЛЯТИЕ КОПИИ</a><br>
Конечно, вы не знаете, какие враги и преграды встретятся вам на пути. Правильный выбор должны подсказать только ваш опыт и интуиция. Если вы случайно выбрали не то заклятие, вы можете выбросить его в корзину.<br>
Майлин дает еще два совета. Во-первых, сориентироваться на запутанных лесных тропинках и в замке, если вы до него дойдете, может помочь карта. Во дворце такой карты нет, так что, если хотите, не забывайте рисовать ее по мере продвижения. Во-вторых, для многих магических таинств необходимы волшебные предметы. Старайтесь в своем путешествии добыть их как можно больше. При случае не исключено, что они помогут вам, но будьте осторожны: коварство врага не знает границ, <a href=btn:-1>возможны любые ловушки</a>.
</html>

end

:-1
<script>
if (newGame) { addItem('Меч'); addItem('Еда'); addItem('Еда'); addItem('Еда'); modifyWater(2) }
</script>
let param=15
proc addGold
<html>
После беседы с астрологом вы вновь предстаете перед Королем. Никто не знает, что вам может понадобиться на пути к успеху, поэтому из дворца вы берете с собой только самое необходимое: меч, флягу (можете дважды попить из нее, и каждый глоток восстановит 2 СИЛЫ), заплечный мешок и 15 золотых. <a href=btn:0>Что ж, пора отправляться в путь</a>.
</html>

end

:0
<html>
Король приказывает одному из герольдов проводить вас до начала Зачарованного леса, чтобы в пути вы не испытывали нужды ни в еде, ни в питье. По дороге вы спрашиваете своего спутника, кто такие Гоблины и Орки, о которых вы много слышали во дворце. Если ему верить, то Гоблины - это страшные и отвратительные злые духи ростом примерно с человека, которые верой и правдой служат волшебнику. Их мало кто видел. И совсем уж никто и никогда не видел Орков. Говорят только, что они повыше и посильнее. Но и с теми, и с другими лучше не встречаться.<br>
В пути вы еще раз обдумываете последний совет Майлина: Барлад Дэрт достаточно могущественный волшебник, чтобы даже малой частицы его мастерства, переданной особо доверенным воинам, хватило не только на то, чтобы противостоять вашим заклятиям, но и наложить на вас свои, не менее быстрые и сильные. Будьте осмотрительны!<br>
Но вот королевским владениям приходит конец. Здесь надо спешиться: лес заколдован и не пустит всадника. Герольд прощается, и вскоре лишь далекий стук копыт напоминает, что вы были не один. Черный, таинственный и неподвижный Зачарованный лес ждет вас.<br>
Если вы готовы к тем неожиданностям, с которыми вам придется встретиться, тогда <a href=btn:1>вперед</a>, и да сопутствует вам удача!
</html>

end

:1
<html>
<center>ПОДЗЕМЕЛЬЯ ЧЕРНОГО ЗАМКА</center>
Вы быстро идете вперед и вскоре оказываетесь в лесу. Даже странно, что о нем рассказывают столько страшных и невероятных историй: таинственный, зачарованный, с множеством ловушек и опасностей. Пока все тихо и спокойно, высокие и могучие деревья справа и слева пропускают достаточно солнечного света, дорога прямая и ровная, и вы немного расслабляетесь. Тем более что веселое щебетание птиц убеждает в том, что поблизости нет никакой опасности. По крайней мере, пока нет. Примерно через три четверти часа вы доходите до развилки. Путь раздваивается. Теперь вам предстоит принять первое решение - какую дорогу выбрать.
Вы пойдете:
<a href=btn:86>По правой дороге?</a><br>
<a href=btn:110>По левой дороге?</a>
</html>

end

:2
<html>
Вскоре деревья расступаются, и дорога начинает петлять меж высоких холмов. Однако лес не выпустил вас из своих владений: поблизости и справа и слева виднеется высокая стена зарослей. Дорога становится совсем узкой, и вот уже по ней едва может пройти один человек, а два холма по краям почти нависают над вами. На правый холм поднимается еле заметная тропинка. Подняться по ней? Но вдруг вас заметит кто-нибудь из слуг Барлада Дэрта? Чутье подсказывает вам, что вперед идти не менее опасно. Что вы сделаете?
	<a href=btn:175>Подниметесь на холм?</a><br>
	<a href=btn:97>Пойдете дальше по дороге?</a>
</html>

end

:3
<html>
Да, видимо, Черный замок должен быть где-то неподалеку. Напоследок лес делает все, чтобы удержать вас: сучья цепляются за одежду, ветви хлещут по лицу, корни и коряги как будто выползли из земли погреться и заставляют идти медленно и осторожно. Неожиданно впереди появляется слабый свет. Но как же он отличается от яркого весеннего солнца, которое радостно светило, когда вы только-только входили в Зачарованный лес! Тучи и облака плотно закрыли небо, пропуская лишь неясное и бледное марево. Однако не смотря на это, вы с облегчением <a href=btn:211>покидаете негостеприимный лес</a>.
</html>

end

:4
<html>
Через несколько минут вы достигаете реки. На другом ее берегу разбиты палатки, горят костры, между которыми снуют Гоблины и Орки. Река подходит к высокому центральному строению и заканчивается у него, как дорога у ворот, но по шуму воды вы понимаете, что она небольшим водопадом стекает куда-то вниз, в подземелье. Теперь вы можете либо <a href=btn:416>вернуться обратно и направиться к зданию в центре двора</a>, либо попытаться перебраться через реку и проникнуть в лагерь врага (тогда вам надо решить, каким заклятием вы воспользуетесь: <a href="javascript: useItem2('Плавание', 164)">Плавания</a> или <a href="javascript: useItem2('Левитация', 633)">Левитации</a>), либо <a href="javascript: useItem2('Плавание', 596)">воспользоваться заклятием Плавания и поплыть по течению реки</a>, надеясь проникнуть в подземелье замка.
</html>

end

:5
<html>
Куда вы поплывете - <a href=btn:216>к острову</a> или на <a href=btn:517>другой берег</a>?
</html>

end

:6
<script>
desc1 = 'ПЕРВЫЙ ДРОВОСЕК'; desc2 = 'ВТОРОЙ ДРОВОСЕК'; expr_action = 'fightStart(8,4,desc1,6,7,desc2); afterBattle("6.1")';
expr_action2 = "if (itemExists('Копия')) {createCopy(); eval(expr_action) }";
</script>
<html>
Сражаться с двумя Дровосеками вам придется одновременно. Хотите воспользоваться заклятием <a href="javascript: eval(expr_action2)">Копии</a> или <a href="javascript: eval(expr_action)">броситесь в бой сразу</a>?
</html>

end

:6.1
param=1
proc addGold
<script>
if (newGame) CheckLuck();
</script>
<html>
Наградой вам будет всего 1 золотой в кармане Первого дровосека. Дровосеки люди работящие и небогатые, вряд ли стоило убивать их.<!-- Киньте кубик и зачеркните выпавшее на нем число на квадратах УДАЧИ (если оно уже зачеркнуто, считайте, что вам повезло). --> А теперь пора <a href=btn:490>идти дальше</a>.
</html>

end

:7
param=2
proc removeStrength
<script>
if (newGame) removeItem('Копия');
</script>
<html>
Вы пытаетесь сосредоточиться на заклятии Копии. Но, к вашему ужасу, копия не появляется! Рыцари развеяли заклятие, после чего второй бросает копье, и оно ранит вас на излете.<!-- Потеряйте еще 2 СИЛЫ.--> Теперь вы можете или попробовать заклятия <a href=btn:36>Ловкости</a>, <a href=btn:314>Слабости</a>, <a href=btn:112>Огня</a>, или же надеяться только на свой меч и <a href=btn:183>драться</a>.
</html>

end

:8
<html>
Вы быстро обшариваете карманы Гоблина и находите изящный <a href="javascript: addItem('Бронзовый свисток')">бронзовый свисток</a><!-- (- 214)-->. На ходу кладя его в заплечный мешок (если, конечно, есть такое желание), вы <a href=btn:118>идете к мосту</a>.
</html>

end

:9
<html>
Заклятие действует успешно, и вы <a href=btn:222>перелетаете через реку</a>.
</html>

end

:10
<html>
Впереди - узкий длинный коридор. Через несколько шагов вы видите с левой стороны дверь. <a href=btn:399>Войдете в нее</a> или <a href=btn:251>пойдете дальше по коридору</a>?
</html>

end

:11
treasure=1
<script>
if (newGame) modifyWater(-2)
</script>
<html>
Вы отстегиваете флягу от пояса и протягиваете ее несчастному. Он делает два больших глотка и с облегчением откидывается на землю. Потом просит вас наклониться пониже и из последних сил шепчет: "Спасибо… за доброту. Попробую отблагодарить тебя. Там… дальше по дороге… будет развилка. Иди налево и… увидишь две березы на холме… копай между ними. Там я спрятал все, что у меня было…". Если вы ему поверили, то, когда увидите две березы, попробуйте поискать клад. Теперь же, сделав все, что можно для умирающего разбойника, пора <a href=btn:234>идти дальше</a>.
</html>

end

:12
<html>
Вы проходите через небольшую дубовую рощицу и выходите к озеру. Оно огромно - другого берега почти не видно. Вы можете или попробовать построить плот и перебраться через озеро на нем, или использовать заклятия. Что вы сделаете?<br>
<a href=btn:312>Построите плот.</a><br>
<a href="javascript: useItem2('Плавание', 201)">Воспользуетесь заклятием Плавания.</a><br>
<a href="javascript: useItem2('Левитация', 425)">Воспользуетесь заклятием Левитации.</a>
</html>

end

:13
<html>
Прячась за деревьями, начинаете обходить деревню. Поселение оказывается не маленьким, и вы начинаете опасаться, как бы не встретить в лесу кого-нибудь из жителей: ведь они могут подумать, что вы следите за ними… К счастью, удается остаться незамеченным, и вы опять выходите на лесную дорогу. Ту же самую или другую? Нет, все-таки другую: она гораздо больше, да и разбитая колея говорит о том, что пользуются ей не так редко, как можно было бы ожидать. Вы можете:<br>
<a href=btn:360>Пересечь дорогу и идти дальше в обход деревни.</a><br>
<a href=btn:580>Выйти на дорогу и пойти к деревне.</a><br>
<a href=btn:235>Выйти на дорогу и пойти от деревни.</a>
</html>

end

:14
<html>
<a href="javascript: CheckLuck('338', '404')">ПРОВЕРЬТЕ СВОЮ УДАЧУ</a>.<!-- Если вы удачливы, то 338. Если нет, то ваше решение принято слишком поздно - 404.-->
</html>

end

:15
<html>
Вы подзываете хозяина поближе и, выхватив меч, нападаете на него. Первый удар ваш, и он попадает в цель. Водяной ранен: ему ничего не остается, кроме как принять бой. Он будет сражаться с вами водорослями, каждый удар которых оставляет острые, глубокие, долго не заживающие порезы<!-- (и вам придется вычитать у себя не 2, а 3 СИЛЫ)-->. Вы можете воспользоваться заклятиями <a href="javascript: useItem2('Ловкость', 417)">Ловкости</a>, <a href="javascript: useItem2('Слабость', 228)">Слабости</a>, <a href="javascript: useItem2('Огонь', 521)">Огня</a> или <a href=btn:326>драться с ним без помощи магии</a>. Воспользоваться же заклятием Копии вам не удастся: обладая немалой собственной магией, хозяин таверны этого не допустит.
</html>

end

:16
param=1
proc removeStrength
<script>
expr_action = 'enemyStrengthFactor = 1; fightStart(10,4,"ПЕРВАЯ ЛЕТУЧАЯ МЫШЬ",8,8,"ВТОРАЯ ЛЕТУЧАЯ МЫШЬ",8,6,"ТРЕТЬЯ ЛЕТУЧАЯ МЫШЬ"); afterBattle("16.1")';
expr_action2 = "if (itemExists('Ловкость')) {removeItem('Ловкость'); AgilityFactor = 2; eval(expr_action) }";
expr_action3 = "if (itemExists('Слабость')) {removeItem('Слабость'); enemyPowerFactor = -2; eval(expr_action) }";
expr_action4 = "if (itemExists('Копия')) {createCopy(); eval(expr_action); }";
</script>
<html>
Дверь со скрипом открывается, и вы входите внутрь. Неожиданно чьи-то крылья бьют по лицу, и сильный укус в плечо вызывает резкую боль<!-- (потеряйте 1 СИЛУ)-->. Вам придется сражаться с Летучими мышами - давними обитателями заброшенного домика. Если воспользуетесь заклятием <a href="javascript: eval(expr_action2)">Ловкости</a>, можете на время боя увеличить свою Ловкость на две единицы. Предпочтете ослабить мышей,<!-- уменьшите на столько же МОЩНОСТЬ УДАРА любой из них-->воспользуйтесь заклятием <a href="javascript: eval(expr_action3)">Слабости</a>. Помимо этого вы можете воспользоваться заклятиями <a href="javascript: eval(expr_action4)">Копии</a>, <a href="javascript: useItem2('Огонь', 557)">Огня</a> и <a href="javascript: eval(expr_action)">начинать бой</a>. На ваше счастье Летучие мыши не вооружены<!-- мечами, поэтому каждый их удар, попавший в цель, отнимет у вас не 2, а только 1 СИЛУ.
	ПЕРВАЯ ЛЕТУЧАЯ МЫШЬ
	Ловкость 10 Сила 4
	ВТОРАЯ ЛЕТУЧАЯ МЫШЬ
	Ловкость 8 Сила 8
	ТРЕТЬЯ ЛЕТУЧАЯ МЫШЬ
	Ловкость 8 Сила 6
	Сражаться с ними вам придется одновременно. Если победите их, то можете откинуть ставни и осмотреть домик (120). Или же уйти и направиться к центральному строению (416).-->.
</html>

end

:16.1
<html>
Теперь можете откинуть ставни и <a href=btn:120>осмотреть домик</a>. Или же уйти и <a href=btn:416>направиться к центральному строению</a>.
</html>

end

:17
instr str=
if hyena=1 then str="<br><a href=btn:339>Попробуете намекнуть, что встречали по дороге кого-то из их знакомых</a>?"
<html>
Теперь надо быстро придумать, что сказать.<br>
<a href=btn:426>Предложите им все золото, которое у вас есть?</a><br>
<a href=btn:109>Признаетесь, что идете сражаться с волшебником и избавлять Зачарованный лес от нечисти?</a><br>
#str$
</html>

end

:18
<html>
Торговец говорит, что может сообщить кое-что интересное и полезное, но за информацию просит 7 золотых или какой-нибудь подарок. <a href=btn:42>Заплатите ему</a>, поищите в заплечном мешке <a href=btn:217>подарок</a> или вежливо поблагодарите и <a href=btn:106>уйдете</a>? А может быть, решите, что лучше <a href=btn:518>убить его и обыскать лавку</a>?
</html>

end

:19
<html>
Дорога приводит вас к большому красивому дому, стоящему справа от нее под двумя раскидистыми дубами. На пороге появляется высокий краснолицый человек, большой живот которого явно мешает ему быстро выбежать вам навстречу. Он вперевалочку направляется к вам и, представившись местным торговцем, предлагает зайти и сделать все покупки, необходимые в дороге. Решите, что он хочет заманить вас в ловушку, и <a href=btn:185>пойдете дальше</a>, или же поверите, что он торговец, и <a href=btn:176>зайдете в дом</a>?
</html>

end

:20
<html>
Дорога понемногу поворачивает направо, потом начинает петлять среди деревьев, и вскоре вы теряете ориентацию. К тому же смеркается, наступает ночь. На чистом бархатном небе разгораются золотые крапинки звезд. Хотите <a href=btn:340>поискать место для ночлега</a> или <a href=btn:442>пойдете дальше</a>?
</html>

end

:21
param=2
proc addStrength
<html>
Вы не успеваете толкнуть дверь, как она открывается сама: хозяин домика увидел вас в окно и поспешил навстречу. Он представляется проводником, помогающим найти дорогу в лесу заблудившимся путникам. Вы не заблудились? Тем лучше, но он все равно поможет выбраться отсюда. Подобная назойливость кажется слегка подозрительной. Но он словно не замечает вашего нежелания принять его помощь, приглашает в дом, кормит обедом<!-- (можете восстановить 2 СИЛЫ)-->, а потом спрашивает, куда вы держите путь. Он просит за свои услуги всего 2 золотых и говорит, что без него вы просто не найдете дороги, а то и вовсе утонете в болотах, которых немало поблизости. Воспользуетесь его предложением и <a href=btn:186>скажете, что ищете Черный замок</a>, <a href=btn:202>попросите проводить вас до ближайшего жилья</a> или <a href=btn:291>откажетесь и уйдете</a>?
</html>

end

:22
<html>
Вы внимательно осматриваете трон, но не находите в нем ничего примечательного. Судя по всему, ужас должен внушать не сам престол, а его хозяин. Но что-то подсказывает вам, что этому месту надо уделить побольше внимания. Повинуясь внезапной догадке, пробуете передвинуть трон, надеясь, что под ним что-то может быть. Внезапно одна из боковых дощечек сиденья с треском отскакивает, открывая секретный ящичек. В нем - короткая <a href="javascript: addItem('Стрела с белым оперением')">стрела с белым оперением</a><!-- (+ 137)-->, которую можете взять с собой. После этого за дверью в той же стене, где вход, слышится громкий топот Гоблинов. Вам некогда задумываться, идут ли они ужинать, или ваше присутствие обнаружено. Скорее решайте, через какую дверь уходить: <a href=btn:398>правую</a>, <a href=btn:206>левую</a> или <a href=btn:350>среднюю</a>?
</html>

end

:23
<html>
Торговец говорит, что может сообщить кое-что полезное для вас, но просит за это 7 золотых или подарок. <a href=btn:42>Заплатите</a> ему, поищите в заплечном мешке <a href=btn:217>подарок</a> или вежливо поблагодарите и <a href=btn:106>уйдете</a>? А может быть, решите, что лучше <a href=btn:518>убить</a> его и поискать, нет ли чего интересного в лавке.
</html>

end

:24
<html>
Если у вас есть еще заклятия <a href="javascript: useItem2('Плавание', 238)">Плавания</a> или <a href="javascript: useItem2('Левитация', 238)">Левитации</a>, используйте их и достигните другого берега озера. Если же нет, то фруктов вам хватит надолго, и вы еще сможете узнать, кто охраняет золотой апельсин и для чего он нужен. Но это будет еще не скоро…
</html>

end

:25
param=6
proc addStrength
proc changedress
<html>
Буфет переполняют разнообразные сладости. Вы можете подкрепиться ими и восстановить силы. Если после этого решите уходить, сделайте это либо через <a href=btn:427>дверь в той же стене, где вход</a>, либо через одну из трех других: <a href=btn:398>правую</a>, <a href=btn:206>левую</a> или <a href=btn:350>среднюю</a>. Если же захотите, то можете на свой страх и риск <a href=btn:125>продолжить исследование столовой</a>.
</html>

end

:26
<html>
Они со смехом отвечают, что не принимают воинов со стороны, а такие слабые и хилые, как вы, им вообще не нужны. В ответ встаете в оскорбленную позу и громко произносите: «Но меня призвал сюда сам чародей. Способны ли ваши тупые головы это понять?!» На лицах Орков появляется столь непривычное для них задумчивое выражение. <a href="javascript: CheckCharm('624', '105')">Проверьте ваше ОБАЯНИЕ</a>.<!-- Если все в порядке, то 624, если нет, — 105.-->
	
</html>

end

:27
instr str=
if ball=1 then str="Если у вас есть клубочек, можете <a href=btn:57>посмотреть</a>, куда он покатится."
<html>
Лес меняется, теперь вдоль дороги растут только сосны, словно часовые, поставленные для того, чтобы не дать вам свернуть с выбранного пути. Примерно через полтора часа ходьбы вы приходите на развилку: от той дороги, по которой шли, отходит еще одна - направо. На перекрестке стоит покосившийся указатель, деревянная стрелка смотрит направо, но дожди давно уже смыли надпись, и разобрать ее не удается. <a href=btn:514>Пойдете, куда указывает стрелка</a>, или <a href=btn:35>не будете сворачивать</a>? #str$
</html>

end

:28
<html>
Он вполне <a href=btn:443>доволен вашим подарком</a>.
</html>

end

:29
<html>
Деревня кажется нескончаемой, но вот и еще одна дорога. Дальше пути нет: сплошной бурелом. Так что придется либо <a href=btn:235>пойти по дороге</a>, либо <a href=btn:580>войти в деревню</a>.
</html>

end

:30
<html>
Вы спускаетесь по лестнице и <a href=btn:10>открываете дверь</a>.
</html>

end

:31
<html>
Стражники спрашивают, чем же вы собираетесь торговать. Если у вас есть шкура лисы, <a href="javascript: tryItem('Шкура лисы', 31, 17)">покажите ее</a> как образец и проходите, если же нет, ни одна другая вещь из вашего заплечного мешка не привлечет их внимания, и вам <a href=btn:428>придется драться</a>.
</html>

end

:32
param=1
proc removeAgility
<html>
Вы всегда предпочитали белое вино и выбираете для пробы именно его. Но, всемогущие боги, что за кошмарный вкус! Оно явно предназначено не для людей. Постарайтесь не показать своего неудовольствия Троллю<!--, потеряйте 1 ЛОВКОСТЬ--> и <a href=btn:207>уходите</a> через дверь в противоположном конце прохода между полками.
</html>

end

:33
<script>
expr_action = 'fightStart(9,8,"ОРК"); afterBattle("33.1")';
</script>
<html>
Вы входите внутрь и понимаете, что попали на Заставу, построенную здесь специально для того, чтобы не пропускать таких, как вы. Орк-часовой бросается на вас так стремительно, что вы даже не успеваете применить заклятия - придется <a href="javascript: eval(expr_action)">защищаться</a>.<!--
	ОРК
	Ловкость 9 Сила 8
	Если вы убили его, то сделали это как раз вовремя: из погреба с бутылкой вина поднимается Гоблин. Увидев вас, он бросает бутылку и хватается за боевой топор.
	ГОБЛИН
	Ловкость 7 Сила 8 Лояльность 6
	Во время этого боя вы, если хотите, можете попробовать убежать (143). Если его Лояльность станет меньше 3, он сам кинется в лес, не разбирая дороги. Если же вы убили Гоблина, то 239.-->
</html>

end

:33.1
<script>
expr_action = 'fightStart(7,8,"ГОБЛИН"); setLoyalty(6, "end", "239"); Flee("143"); afterBattle("239")';
</script>
<html>
Вы убили Орка и сделали это как раз вовремя: из погреба с бутылкой вина поднимается Гоблин. Увидев вас, он бросает бутылку и хватается за боевой топор. Что ж, придется <a href="javascript: eval(expr_action)">драться</a>. Во время этого боя вы, если хотите, можете попробовать убежать.
</html>

end

:34
<html>
Вы так и не узнаете, кто были эти люди, но зато можете подобрать <a href="javascript: addItem('Золотой свисток')">золотой свисток</a><!-- (+ 156)-->, <a href="javascript: addItem('Зеркальце')">зеркальце</a><!-- (- 83)--> и небольшую <a href="javascript: addItem('Эмблема Черного Замка')">эмблему в виде Черного замка</a><!-- (+ 59)-->, оброненные ими во время боя. Скорее всего, это Беглецы из замка, и тогда <a href=btn:3>вы на правильном пути</a>.
</html>

end

:35
<html>
Наступает ночь. Хотите <a href=btn:204>отдохнуть</a> и поспать после долгой дороги или решите, что лес слишком опасен для этого и <a href=btn:342>пойдете дальше</a>?
</html>

end

:36
<script>
if (newGame) AgilityFactor = 2;
</script>
<html>
Вы накладываете заклятие Ловкости, и оно успешно действует.<!-- На время боя можете увеличить на 2 свою Ловкость - 183.--> Теперь можете <a href=btn:183>драться</a>.
</html>

end

:37
param=2
proc removeStrength
<script>
desc = 'ДРАКОН'; expr_action = 'fightStart(10,6,desc); afterBattle("454.1")';
</script>
<html>
Вы используете заклятие Огня, и огненный шар сжигает одну из голов Дракона. <a href="javascript: useItem2('Огонь', 344)">У вас есть еще одно заклятие Огня</a>, или <a href="javascript: eval(expr_action)">будете драться с оставшейся головой</a>? Пока же она, не теряя понапрасну времени, дышит на вас пламенем<!-- (потеряйте 2 СИЛЫ)-->, и вы теряете силы.<!--
	ДРАКОН
	Ловкость 10 Сила 6
	Если вы убили Дракона, то 454.-->
</html>

end

:38
<html>
По дороге приходится идти так долго, что вам уже начинает казаться, будто это будет длиться вечно. Несколько раз вы проходите по мостикам, перекинутым над глубокими оврагами. Кажется, по дну оврагов тоже идут дороги или тропинки, но прыгать вниз как-то не хочется: слишком высоко. Наконец дорога приводит вас к покосившейся вросшей в землю деревянной хижине. Трудно определить, обитаема ли она. Можно только <a href=btn:221>войти внутрь и все выяснить</a> или <a href=btn:55>пройти мимо по тропинке дальше в лес</a>.
</html>

end

:39
proc changedress
<html>
Перед вами огромная зала, но определить, для чего она предназначена, довольно сложно. Мебели нет. В одном конце комнаты огромная парадная лестница поднимается вверх, такая же лестница, напротив, спускается вниз. Обе деревянные, перила богато украшены золотыми изображениями драконов и грифонов. Внимание привлекают окно в полстены по левую руку от вас и висящая поблизости картина. На ней изображена какая-то битва, но с того места, где вы стоите, деталей не разглядеть. В комнате три двери, однако открыть удается только одну - ту, что напротив окна. Пойдете <a href=btn:138>через дверь</a>, по лестнице <a href=btn:523>вверх</a>, по лестнице <a href=btn:452>вниз</a>, подойдете <a href=btn:70>к окну</a> или <a href=btn:205>к картине</a>?
</html>

end

:40
<script>
expr_action = 'fightStart(7,10,"ПЕРВЫЙ ГОБЛИН",7,6,"ВТОРОЙ ГОБЛИН"); setLoyalty(12, 8, "change", -2); afterBattle(after_battle_action)';
expr_action2 = 'if (itemExists("Копия")) {createCopy(); eval(expr_action) }';
after_battle_action = 'if (num_killed == 2) readParagraph("620"); else if (num_killed == 1) readParagraph("652"); else readParagraph("118"); void(0)';
</script>
<html>
Вам придется <a href="javascript: eval(expr_action)">драться</a> с ними одновременно, но вы можете <a href="javascript: eval(expr_action2)">воспользоваться заклятием Копии</a>.<!--
	ПЕРВЫЙ ГОБЛИН
	Ловкость 7 Сила 10 Лояльность 12
	ВТОРОЙ ГОБЛИН
	Ловкость 7 Сила 6 Лояльность 8
	Как только вам удастся уменьшить Лояльность любого из них до 3, Гоблин обратится в бегство, а Лояльность оставшегося опустится на 2 единицы. Если вы убили обоих, то 620, если только одного, - 652. Когда же удалось обратить в бегство всех, поторопитесь перейти реку: путь свободен - 118.-->
</html>

end

:40.1
<script>
if (num_killed == 2)
   readParagraph("620");
else
   if (num_killed == 1)
      readParagraph("652");
   else
      readParagraph("118");
</script>

end

:41
<script>
expr_action = 'fightStart(10,6,"ДРАКОН"); afterBattle("454.1")';
</script>
<html>
Огонь прижигает Дракону отлетевшую голову - она больше не отрастет. Вы же <a href="javascript: eval(expr_action)">продолжаете бой</a>. Кстати, если вы победите Дракона и срубили вторую голову, ей уже не удастся отрасти.
</html>

end

:42
<script>
if (Gold < 7) { readParagraph('18'); alert('У Вас не хватает денег!'); } else modifyGold(-7);
</script>
<html>
<a href=btn:443>Ваши деньги исчезают в огромном кошеле торговца</a>.
</html>

end

:43
param=2
proc removeStrength
<html>
Когда вы задаете свой вопрос, один из Орков невозмутимо дергает рычаг под столом, и вы летите куда-то вниз. Вероятно, спросили что-то не то… Когда вы падаете, то от удара <a href=btn:409>теряете сознание</a><!-- (и 2 СИЛЫ впридачу)-->…
</html>

end

:44
<html>
Вы спокойно идете по дороге. Вдруг откуда ни возьмись перед вами появляется Волк. Но ваше удивление еще больше возрастает, когда он ударяется о землю и превращается в юношу-оруженосца. Оборотень говорит, что его заколдовал ненавистный Барлад Дэрт, так что он с радостью готов помочь вам. Ведь вы идете сражаться с волшебником, не так ли? Смелых людей видно издалека. Вы в нерешительности: предложение о помощи заманчиво, но вдруг это ловушка? Тем временем Оборотень рассказывает, что впереди будет перекресток. Самая опасная дорога оттуда - налево. Злой и коварный Дракон съедает каждого, кто пойдет по ней. Вам же надо идти прямо. Потом - развилка, и опять надо идти прямо, потому что на дороге, которая пойдет налево, устроили засаду воины жестокого мага. Поверите ему и <a href=btn:431>скажете, что идете драться с волшебником</a> или же решите, что осторожность никогда не помешает, откажетесь от его помощи и <a href=btn:240>пойдете дальше</a>?
</html>

end

:45
<html>
Издалека пришла с волшебником его верная гвардия - Зеленые рыцари. Много лет назад маг разослал по деревням своих шпионов, чтобы они взяли на заметку тех юношей, сердца которых были подвержены Злу, чья жадность и жестокость вызывали удивление их родителей и товарищей. После этого к каждому было подослано по Оборотню с предложением служить у чародея. Шпионы хорошо поработали: ни один из юношей не отказался. Всего их было двадцать четыре. Барлад Дэрт поделился с ними своим мастерством и наложил на каждого колдовское заклятие. С тех пор они умели многое: развеивать заклятия врага, накладывать свои, но любимой их забавой в бою было направить на противника то заклятие, которым он хотел поразить их самих. Из юношей было отобрано трое - самых ловких и умелых. Им волшебник пожаловал баронское достоинство и доверял возглавлять походы своих войск. Лучший же был назначен Капитаном, начальником над всеми рыцарями. Ему-то маг и собирался перед смертью передать свой трон. Чтобы рыцарям легче было сражаться и побеждать, чародей заколдовал их щиты. Один раз взглянув, враг уже не мог отвести от них глаз. Теперь вы можете попросить либо книгу <a href=btn:345>о самом волшебнике</a>, либо <a href=btn:208>о Принцессе</a>, либо <a href=btn:627>покинуть библиотеку</a> через дверь в противоположной стене.
</html>

end

:46
<html>
Перед вами две дороги. Пойдете <a href=btn:445>направо</a> или <a href=btn:524>налево</a>?
</html>

end

:47
if treasure=1 then str="<a href=btn:187>две невысокие березки</a>" else str="две невысокие березки"
treasure=0
<html>
Тропинка понемногу уводит назад, и вы понимаете, что возвращаетесь к опушке леса. Вокруг очень красиво: березовая роща горит на солнце, радуя глаз. Судя по всему, недавно прошел дождь, капли воды дрожат на листьях, и приходится обходить небольшие лужицы. Вскоре рощица кончается, только на холме рядом с дорогой стоят #str$, как бы оторвавшиеся от своих соседок и вышедшие из леса проводить вас. Тропинка понемногу расширяется, становится видно, что по ней часто ходят. Скорее, это уже даже не лесная тропинка, а дорога, которая вскоре поворачивает налево. Впереди показалась деревня. Но вам не обязательно идти в нее: еще одна дорожка, петляя, идет к лесу, который теперь оказывается не только позади, но и справа от вас. Направитесь <a href=btn:101>к деревне</a> или <a href=btn:617>к лесу</a>?
</html>

end

:48
<html>
Миновав ворота, осторожно осматриваетесь в полутемном дворе замка. Прямо перед вами в центре двора - большое темное строение, но пока его сложно рассмотреть или хотя бы определить количество этажей. Однако хорошо видно, что сверху оно переходит в узкую высокую башню, которая, чем дольше вы смотрите, тем больше привлекает ваше внимание. Постепенно вас охватывает волнение, и вы понимаете, что наступают решающие минуты. Ведь в башне может быть или Принцесса, или Барлад Дэрт. В левом, дальнем от вас углу двора из-под низенькой башенки вытекает река и скрывается под кирпичными сводами. Входа внутрь не видно. Справа, немного в стороне от ворот, видна сторожка, откуда слышны веселые голоса Гоблинов и звон стаканов. Слева - невысокий одноэтажный домик, похожий на маленькую часовенку. Куда вы пойдете?<br>
<a href=btn:308>К строению в центре двора?</a><br>
<a href=btn:218>К сторожке?</a><br>
<a href=btn:116>К маленькому домику слева?</a>
</html>

end

:49
<html>
Вы успеваете сделать по дороге всего несколько шагов, как из-за поворота слышится приближающийся стук копыт. Что вы предпримете? Быстро вернетесь обратно на перекресток и <a href=btn:14>пойдете в другую сторону</a>? Или <a href=btn:404>останетесь на дороге</a>, чтобы узнать, кто едет вам навстречу?
</html>

end

:50
<html>
Старик отвечает охотно: чувствуется, что ему давно не хватает человеческого общества. Вы узнаете, что некогда это была большая и веселая деревня, в которой жили охотники и грибники, известные на весь Элгариол. Да что там Элгариол - из Хайрингарда эльфы за грибами приезжали. Но с тех пор, как Барлад Дэрт превратил лес в свое королевство, добрым людям ходить туда опасно. Один за другим со слезами на глазах покидали жители деревню, где были похоронены их деды и прадеды. Старик остался последним: понимая, что скоро умрет, он решил не уходить из родных мест.<br>
<a href=btn:310>Доверитесь ему и скажете, что вы идете в Черный замок сражаться с волшебником?</a><br>
<a href=btn:418>Попытаетесь осторожно выведать у него что-нибудь еще, не называя себя?</a><br>
<a href=btn:179>Покинете деревню?</a><br>
</html>

end

:51
instr str=
if ball=1 then str="Если у вас есть клубочек, можете <a href=btn:81>посмотреть</a>, куда он покатится."
<html>
Неутомимо бежит вперед дорога, уже несколько часов идете по ней, а ловушек и опасностей все еще не видно. Даже появляется надежда, что лес беспрепятственно пропустит вас и скоро покажутся высокие башни Черного замка. Неужели вы будете первым, кто доберется до них? А может быть, главные препятствия совсем не в лесу, а в самом замке? Задумавшись, чуть было не проходите мимо незаметной тропинки, отходящей налево от дороги. Посмотрев в ту сторону, замечаете, что через густую листву невдалеке виднеется белый домик с красной черепичной крышей. <a href=btn:21>Свернете к нему</a> или решите, что дорога ведет вас в правильном направлении, и <a href=btn:27>поторопитесь к цели</a>? #str$
</html>

end

:52
proc lose
<html>
Однако стоит вам достать и развязать заплечный мешок, как женщина в ужасе кричит. Через незаметную поначалу дверь в комнату врываются Зеленые рыцари во главе с Капитаном. Противостоять их натиску вы просто не в силах, и вашей жизни суждено окончиться именно в этих покоях…
</html>

end

:53
param=113
proc inarmor
<html>
Вы подходите к правой двери. Она не заперта и, гостеприимно распахнувшись, пропускает вас в комнату. Это что-то вроде помещения для охраны, на стенах которого развешаны карты и пергаментные свитки на непонятном языке. Вы не успеваете разглядеть обстановку комнаты, потому что из-за стола навстречу вам встают два огромных Орка в полном вооружении. Вы оказались прямо перед стражами замка. Что вы сделаете: попробуете с ними <a href=btn:519>поговорить</a> или будете <a href=btn:328>драться</a>? А может быть, у вас есть <a href="javascript: putOnItem('Латы', 53, 60)">латы зеленого рыцаря</a>?
</html>

end

:54
<html>
Вы взбираетесь наверх, но на полпути вдруг понимаете, что странная веревочная лестница напоминает… гигантскую паутину! В ужасе вы начинаете спускаться, но поздно. То, что казалось вам логовом или гнездом, оказывается брюхом гигантского паука, и он быстро-быстро начинает подтягивать вас к себе. <a href="javascript: CheckLuck('558', '618')">ПРОВЕРЬТЕ СВОЮ УДАЧУ</a> или 
считайте, что вам <a href=btn:618>не повезло</a>. ;Если вы удачливы, то 558, если нет, - 618.
</html>

end

:55
<html>
Короткая тропинка вскоре выводит на узкую мощеную дорогу. Оглянувшись назад, немало удивляетесь: лес уже успел заботливо спрятать тропинку, так что даже вы уже не в силах сказать, где она только что была. Дорога же, напротив, самая обычная, странно только, что лес как будто сторонится ее. Она беззаботно петляет среди холмов, а деревья безмолвно косятся на нее со стороны. Куда вы пойдете по дороге - <a href=btn:121>направо</a> или <a href=btn:188>налево</a>?
</html>

end

:56
proc lose
<html>
У вас нет ни одного полезного заклятия. Остается надеяться только на то, что вас выведут из клетки на допрос. Но Барлад Дэрт не интересуется непрошенными гостями. Когда Гоблины заканчивают игру, они принимаются за работу. Вы с ужасом обращаете внимание на незамеченную ранее груду кирпичей в углу. Неторопливо, перебрасываясь шуточками и плоскими остротами, они начинают замуровывать вас. Конечно, вы пытаетесь уговорить их не делать этого, обещая все, что только возможно. Но слуги чародея не знают жалости - вскоре работа закончена. Вам же суждено прожить еще несколько недель и умереть от голода в подземельях Черного замка, так и не выполнив своей миссии. Теперь-то становится понятно, почему никто из смельчаков не вернулся домой…
</html>

end

:57
<html>
Клубочек катится прямо. <a href=btn:27>Вернитесь</a> и сделайте самостоятельный выбор, но учтите: если вы свернете, клубочек укатится.
</html>

end

:58
proc changedress
<html>
Cосуд оказывается скользким, как рыба, и вам только чудом удается не уронить его на пол. Он пуст, но вы можете <a href="javascript: addItem('Стеклянный сосуд')">положить его в заплечный мешок</a><!-- (- 287)-->. Хотите теперь попробовать взять <a href=btn:545>серебряный сосуд</a>? Если нет, то самое время <a href=btn:39>выйти</a> из комнаты через противоположную дверь.
</html>

end

:59
<html>
Чудом успеваете отскочить, и дерево падает всего в нескольких сантиметрах от вашего плеча. Вы понимаете, что Оборотень просто заманил вас в ловушку, которой удалось избежать только благодаря благосклонности Судьбы. Если торопитесь, можете идти дальше <a href=btn:240>вперед</a>, если же жажда мести берет верх, стоит свернуть с дороги и <a href=btn:528>сразиться</a> с негодяем, чей силуэт виднеется неподалеку среди деревьев.
</html>

end

:60
<html>
Дорога оказывается недлинной, вскоре вы уже видите ее конец и спешите <a href=btn:181>вперед</a>.
</html>

end

:61
<html>
Вы идете по левому коридору. Неожиданно одна из его стен переходит в решетку. За ней - небольшие каменные помещения, похожие на тюремные камеры. Вы подносите свет к первой из них. За решеткой - павлин. Вы настолько удивлены, что несколько минут стоите в растерянности. Кому понадобилось держать павлина в каменном мешке в подземелье? Если у вас есть перо павлина, <a href="javascript: useItem2('Перо павлина', 61, 206)">достаньте его</a>, если же нет, <a href=btn:147>посмотрите, кто сидит за следующей решеткой</a>.
</html>

end

:62
<html>
Вы накладываете заклятие, и медвежонок выздоравливает на ваших глазах. Благодарная медведица тянет вас за собой в угол берлоги. Там на шкуре лисы лежат маленький амулет и красивый пояс. Вряд ли стоит демонстрировать жадность, поэтому вы можете взять с собой только одну из двух вещей: либо <a href=btn:156>пояс</a>, либо <a href="javascript: addItem2('Шкура лисы', '367')">шкуру</a> или отказаться, вылезти из берлоги и <a href=btn:44>уйти</a> по дороге, ведущей с поляны в глубь леса.
</html>

end

:63
<html>
Медный ключик не подходит к отверстию в люке и ломается<!-- (вычеркните его с Листка путешественника)-->. Не дожидаясь, пока сюда заглянет кто-нибудь из слуг волшебника, вы <a href=btn:416>уходите</a>.
</html>

end

:64
<html>
Вы идете по дороге дальше. Начинает смеркаться. Как странно быстро пролетело время. Кажется, что только-только вошел в лес, а уже темно. Хотите <a href=btn:340>поискать убежище на ночь</a> или <a href=btn:442>пойдете вперед</a>, несмотря на усталость: позади и так достаточно опасностей, зачем добавлять к ним новые из-за своей беспечности?
</html>

end

:65
<script>
expr_action = 'fightStart(9,6,"НАЧАЛЬНИК СТРАЖИ"); afterBattle("92",">3","619")';
expr_action2 = "if (itemExists('Ловкость')) {removeItem('Ловкость'); AgilityFactor = 2; eval(expr_action) }";
expr_action3 = "if (itemExists('Слабость')) {removeItem('Слабость'); enemyPowerFactor = -2; eval(expr_action) }";
expr_action4 = "if (itemExists('Копия')) {createCopy(); eval(expr_action); }";
</script>
<html>
Начальник стражи не успевает даже открыть рот, как вы <a href="javascript: eval(expr_action)">накидываетесь на него с мечом</a>. Но будьте осторожны: ведь вы можете оказаться далеко не единственным посетителем. На столе перед вами слишком много бумаг, так что устраивать пожар, используя заклятие Огня, вряд ли будет разумно. Однако заклятие <a href="javascript: eval(expr_action4)">Копии</a> в вашем распоряжении. Кроме того, можете воспользоваться заклятием <a href="javascript: eval(expr_action2)">Ловкости</a>, увеличив свою ловкость<!-- на две единицы-->, или <a href="javascript: eval(expr_action3)">Слабости</a>, уменьшив<!--на столько же--> мощность удара противника.; Если вы победили противника за три Раунда атаки, то 92. Если же нет, - 619.
</html>

end

:66
<html>
"Так вы и в самом деле встречали Гиену?", - удивляются они. Вы снова недоумеваете: что может быть общего у этого забавного разговорчивого животного с разбойниками. Но не спрашивать же их об этом! Тем временем разбойники не только соглашаются отпустить вас, ничего не взяв, но и дарят <a href="javascript: addItem('Камея с изображением дракона')">камею с изображением дракона</a><!-- (- 28)-->, уверяя, что в дороге она может пригодиться. И кстати, если вы пойдете от их поляны направо, то как раз выйдете к мосту, а там и до замка недалеко. С этими словами разбойники растворяются в лесу, давая вам возможность <a href=btn:46>подумать</a>, верить их словам или нет.
</html>

end

:67
<html>
"Правильно, - одобрительно говорит Домик, - это дракон. Ну что ж, вот тебе коготь Дракона. Когда встретишься с ним, покажи ему коготь, и он тебя не тронет". И вправду, не успели вы подумать, как это Домик будет вам что-то давать, как прямо у ваших ног падает <a href="javascript: addItem('Драконий коготь')">драконий коготь</a><!-- (- 382)-->, как будто брошенный откуда-то сверху. Вы решаете ничему не удивляться, и слушаете вторую загадку. "Легче легкого, проще простого, но чтобы попасть в замок, нет ничего ценнее". Если вы знаете, что это, то <a href="javascript: inputAnswer('пароль', '95', 'incorrect_answer')">отвечайте</a>, если же нет, придется <a href=btn:98>уходить</a>.
</html>

end

:68
<html>
Вдали раздается глухой звон колоколов. "На допрос", - говорит один старик другому. Слава Богу, думаете вы, значит, все-таки не изваяния. Старик встает, отпирает вашу решетку и, прицепив к поясу кинжал, а за спину закинув ваш заплечный мешок, <a href=btn:160>выводит вас из камеры</a>.
</html>

end

:69
proc lose
<html>
Рыцарь странно смотрит на бронзовый свисток у вас в руках - и отступает в сторону, пропуская вас. Вы делаете шаг вперед, но в это время он с силой налегает на какую-то рукоять, торчащую рядом с ним из стены. Вы с ужасом чувствуете, как пол уходит из-под ног, и летите в бездну. Воды реки далеко внизу примут ваш труп…
</html>

end

:70
proc changedress
<html>
Вы подходите к окну и выглядываете наружу. Все еще стоит ночь, и почти ничего не видно, кроме черных зубцов стены и силуэтов сторожевых башенок на фоне бархатно-черного звездного неба. Налюбовавшись открывающимся видом, можете либо отойти от окна и <a href=btn:111>вернуться в залу</a>, либо, воспользовавшись заклятием Левитации, <a href="javascript: useItem2('Левитация', 273)">вылететь наружу</a> и посмотреть, нет ли еще где-нибудь незапертых окон.
</html>

end

:71
<html>
Фигурный ключ, к сожалению, не подходит к отверстию в люке. Опасаясь, что вот-вот может появиться кто-нибудь из слуг чародея, вы <a href=btn:416>покидаете домик</a>.
</html>

end

:72
<html>
Уже поздним вечером вы выходите на какую-то дорогу. <a href=btn:340>Поищите убежище на ночь</a> или <a href=btn:442>пойдете дальше</a>, несмотря на усталость?
</html>

end

:73
<html>
Вскоре еще одна развилка. Сколько же можно, думаете вы, так ведь недолго и заблудиться и вообще никогда не выйти к замку, а только плутать всю жизнь по этим дорогам и тропинкам. Но так или иначе, а выбор делать надо. Свернете на дорогу, которая идет <a href=btn:286>налево</a>, или пойдете <a href=btn:646>дальше</a>?
</html>

end

:74
<html>
Донжон - главная башня замка - совсем рядом. В сердце цитадели ведут <a href=btn:257>большие массивные двери</a>, к которым подвешен дверной молоток в форме боевого топора.
</html>

end

:75
proc changedress
<html>
Только меч Зеленого рыцаря может сразить Каменных крыс. Увидев его, они в ужасе разбегаются. Ваш путь свободен. Дверь справа от вас <a href=btn:480>ведет в следующую комнату</a>.
</html>

end

:76
param=136
proc inarmor
<html>
Дверь открывается, и вы попадаете на кухню. На огромных плитах в котлах что-то варится. Кажется, повар и два поваренка совсем не удивлены вашим появлением: они заняты стряпней. В углу кухни виден какой-то сундук, которого здесь явно быть не должно, настолько странно он смотрится. Рядом с ним дверь, через которую вы можете <a href=btn:379>выйти</a>. Но, если хотите, можете сначала <a href=btn:486>поговорить с поварами</a>. Вряд ли разумно сразу совать свой нос в сундук, даже если вам безумно любопытно, что там: ведь на кухне есть посторонние.
</html>

end

:77
param=2
proc removeStrength
<html>
Лошадь всегда чувствует неумелого наездника - она легко сбрасывает вас и уносится в лес. Вы же с размаху падаете на землю<!-- (потеряйте от боли 2 СИЛЫ)-->. К тому же вам лучше поторопиться <a href=btn:378>уйти</a>, ведь если появится хозяин коня, он вряд ли скажет вам спасибо.
</html>

end

:78
if Pegasos=1 then str="Иначе остается только <a href=btn:609>позвать Пегаса</a>. Если вы и этого не можете сделать, то через" else str="Через"
proc changedress
<html>
Вы попадаете в абсолютно пустую комнату. Из нее только одна дверь, но она наглухо закрыта и не поддается, как бы ни старались ее открыть. Если у вас есть еще одно заклятие Левитации, используйте его либо для того, чтобы <a href="javascript: useItem2('Левитация', 111)">вернуться обратно</a>, либо для того, чтобы <a href="javascript: useItem2('Левитация', 566)">влететь в окно немного ниже</a>. #str$ несколько часов стены комнаты раскалятся и сдвинутся, а вам придется, по возможности не теряя спокойствия, смотреть на это и торопить смерть…
</html>

end

:79
<script>
if (newGame) if (Gold) modifyGold(-1); else { readParagraph('255'); alert('У Вас не хватает денег!') }
</script>
<html>
Вы кидаете женщинам 1 золотой, из-за которого начинается драка. Жадность вас подвела, и теперь остается только один выход: <a href=btn:251>быстро выбежать в следующую дверь</a>, что вы и делаете, попадая в какой-то коридор.
</html>

end

:80
<html>
Дверь в конце маленького коридорчика ведет на лестницу. Охраны поблизости нет, дверь не заперта. <a href=btn:322>Вы открываете ее</a>.
</html>

end

:81
<html>
Клубочек катится прямо, а вы можете <a href=btn:51>вернуться</a> и самостоятельно сделать выбор, куда вам лучше пойти. Но учтите: если вы свернете, клубочек укатится прочь, и дальше вам придется обходиться без него.
</html>

end

:82
<html>
Вы продолжаете идти дальше. Вдруг ваше внимание привлекает какое-то движение в листве большого клена, стоящего справа от дороги. Остановившись, поднимаете голову. Из листвы на вас смотрит умное лицо с маленькой аккуратной бородкой. Большие серые глаза внимательно изучают вас какое-то время, а потом вниз спрыгивает маленький старичок в зеленой курточке и аккуратных зеленых штанишках, заправленных в сапожки. Это Лесовичок, охраняющий дорогу. Но от кого: от ваших врагов или от ваших друзей? Этого-то вы и не знаете, а между тем Лесовичок спрашивает, кто вы. Вы отвечаете, что вы - одинокий искатель приключений, которого судьба занесла в Зачарованный лес. Однако он не успокаивается и интересуется, что вы ищете в этом лесу. Теперь уже туманными неопределенностями не отделаться. Что вы ответите:<br>
<a href=btn:610>Что идете в Черный замок сражаться с волшебником</a>,<br>
<a href=btn:284>Что идете туда освобождать Принцессу</a>,<br>
<a href=btn:492>Что забрели в лес случайно</a>.<br>
<a href=btn:563>Решите, что он не имеет права задавать вам никаких вопросов - и обнажите меч</a>?
</html>

end

:83
param=2
proc removeStrength
<script>
expr_action = 'fightStart(10,enemy [0].Strength,"ДУХ МЕРТВЫХ"); afterBattle("381")';
</script>
<html>
Вы пытаетесь отступить назад и захлопнуть дверь, но скелет не дает вам это сделать. Несмотря на то, что он только ранил вас, когда вы повернулись к нему спиной<!-- (потеряйте 2 СИЛЫ)-->, бегство не удалось. Вам придется вернуться и <a href="javascript: eval(expr_action)">сразиться</a> с ним.
</html>

end

:84
<html>
Вы входите в саркофаг со статуей Короля. Внутри еще одна статуя: Король, сидящий на троне. На его шее на золотой цепи висит что-то вроде медальона с золотым изображением орла, уносящего в когтях свою добычу. В осанке Короля столько величия, что вы можете представить его только во главе огромного и могущественного государства. Орел - герб Катэны, так что это скорее всего Свен Айрин II, захороненный еще в те дни, когда население Двэлла переживало Эпоху Единства. Однако дни его великой славы остались в прошлом. Теперь же вы можете снять с шеи Короля <a href="javascript: addItem('Медальон с орлом')">медальон с орлом</a><!-- (- 72)--> и взять его с собой. Одолеваемый думами о Королях и Лордах былых времен, выходите из саркофага. Пронизывающее воздух напряжение не позволяет задерживаться: все в вас стремится прочь от этого места. Через какую из дверей вы покинете подземную усыпальницу: через <a href=btn:547>правую</a> или через <a href=btn:501>левую</a>?
</html>

end

:85
<html>
На несколько секунд замерев, внимательно прислушиваетесь. За одной из дверей раздается громкий топот Гоблинов. Вы наугад <a href=btn:398>дергаете ручку одной из дальних дверей</a>.
</html>

end

:86
<html>
Дорога широка и удобна. По ней явно ходят чаще, чем по той, что отходила влево. Следы копыт в пыли говорят о том, что совсем недавно здесь проезжали всадники, и вы уже жалеете, что поверили сказам об ужасах Зачарованного леса и не отправились в путь верхом. Вот и развилка: наезженная дорога немного поворачивает влево и скрывается в лесу, другая, поуже, менее удобная и утоптанная, отходит от нее направо. Куда вы пойдете?<br>
    <a href=btn:530>Налево?</a><br>
    <a href=btn:403>Направо?</a>
</html>

end

:87
<html>
Вы произносите заклятие и готовитесь взлететь, но… ничего не происходит. Волшебник надежно защитил свой замок от непрошенных магов. Однако заклятие истрачено и вы <a href=btn:533>отправляетесь дальше в обход замка</a>.	
</html>

end

:88
<html>
Поле кончается, впереди заросли малогостеприимного низкого кустарника. Мысль о том, что придется через него продираться, не доставляет вам ни малейшего удовольствия. Ну так что же?<br>
<a href=btn:177>Пойдете через кустарник?</a><br>
<a href=btn:212>Свернете к озеру?</a>
</html>

end

:89
<html>
Деревья, растущие по краям тропинки, закрывают почти весь свет, идти приходится медленно и осторожно. Внезапно вы чувствуете, что сзади на вас кто-то смотрит, и хотя никаких шагов слышно не было, медленно оборачиваетесь. Посреди дороги стоит невысокий человек в потрепанной крестьянской одежде. Он небрит и оброс, в глазах - голодный блеск. За спиной слышится легкий шум, и краем глаза вы видите, что из леса выходит еще один человек, одетый так же, как и первый, но немного повыше ростом и пошире в плечах. Теперь и вперед дороги нет. Оба медленно приближаются к вам, и решение надо принимать как можно быстрее.<br>
 <a href=btn:419>Попробуете поговорить с ними и убедить в том, что вы не желаете им зла?</a><br>
 <a href="javascript: useItem2('Еда', 104)">Предложите им еду в знак своих мирных намерений?</a><br>
 <a href=btn:374>Будете драться?</a><br>
</html>

end

:90
proc lose
<html>
К сожалению, дверь не поддастся, даже если вы постараетесь ее выломать. А вам придется попытаться это сделать: потолок начинает медленно опускаться. Если не удастся открыть дверь, то жить вам осталось всего несколько минут: комната-западня выполнит свое предназначение…
</html>

end

:91
<script>
expr_action = 'if (Gold > 1) { modifyGold(-2); readParagraph("621"); void(0) } else alert("У Вас не хватает денег!")';
</script>
<html>
Вы просите накормить вас. Повар соглашается, но требует за это плату - 2 золотых. Если согласны, то <a href="javascript: eval(expr_action)">заплатите</a>, если нет, то <a href=btn:379>уходите</a>. Однако если вас крайне заинтересовал сундук, не остается иного выхода, кроме как <a href=btn:604>убить</a> повара и его подручных и удовлетворить свое любопытство.
</html>

end

:92
<html>
Начальник стражи со стоном падает на пол у ваших ног. Он мертв. На первый взгляд в комнате нет совершенно ничего интересного. Решив не проверять, слышал ли кто-нибудь шум схватки, <a href=btn:39>выходите</a> в дверь по ту сторону стола и плотно прикрываете ее за собой.
</html>

end

:93
<script>
expr_action = 'fightStart(11,14,"ЖЕНЩИНА-ВАМПИР"); afterBattle("93.1")'
</script>
<html>
Заклятия вам не помогут: она слишком искусная колдунья, чтобы ее можно было удивить иллюзией или копией - придется <a href="javascript: eval(expr_action)">драться</a>. <!--Если вы победили ее, то, осмотрев комнату повнимательнее, обнаруживаете дверь, скрытую за портьерой слева от вас - 301.-->
</html>

end

:93.1
proc changedress
<html>
Осмотрев комнату повнимательнее, <a href=btn:301>обнаруживаете дверь</a>, скрытую за портьерой слева от вас.
</html>

end

:94
<html>
Все правильно, и Лев <a href=btn:265>впускает вас</a>.
</html>

end

:95
password = 1
<html>
Домик доволен вашей сообразительностью. "Ну что ж, - говорит он, - раз так, храбрый путешественник, то я скажу тебе пароль, чтобы попасть в замок. Пароль - "Хобгоблин".<!--(Когда вам понадобится пароль, вычтите 197 из номера параграфа, на котором будете тогда находиться.)--> "А теперь - последняя загадка. Если убьешь на поединке чужеземного рыцаря, о себе не напомнит и сон твой не нарушит. Если же друга предашь, разговорами замучит, пожалеешь, что родился". Если знаете отгадку, <a href="javascript: inputAnswer('совесть', '163', 'incorrect_answer')">отвечайте</a>. Если же нет, то придется <a href=btn:98>уходить</a>.
</html>

end

:96
<html>
Огненный шар попадает стражу прямо в грудь и прожигает латы. Он мертв, вы же торопитесь <a href=btn:241>дальше</a> по коридору, пока дорогу не преграждает дверь.
</html>

end

:97
<html>
Вы решаете идти по дороге дальше, не обращая внимания на ощущение некоторой опасности, исходящее от этого узкого прохода. Но вскоре понимаете, что иногда все же стоит доверять своим предчувствиям. Слышится шум обвала, и с вершин обоих холмов вниз начинают катиться огромные валуны. Но откуда они там взялись? Вы готовы поклясться, что еще несколько минут назад их там не было. Так и есть: это ловушка! Теперь остается надеяться только на Судьбу. <a href="javascript: CheckLuck('622', '306')">ПРОВЕРЬТЕ СВОЮ УДАЧУ</a>.<!-- Если удачливы, то 622, если же нет, - 306.-->
</html>

end

:98
<html>
Судя по всему, дорожка идет в правильном направлении. Вы чувствуете, как вокруг сгущаются сумрак и беспокойство, словно вы потревожили какую-то неумолимую силу, которая не замедлит нанести ответный удар. Но вот лес, доставивший столько неприятностей, кончается, и вы выходите на странную огромную поляну. Деревья по ее краям повалены и обуглены, однако задуматься о причине этого вы <a href=btn:412>не успеваете</a>.
</html>

end

:99
proc lose
<html>
Тропинка не сулит вам ничего хорошего: понемногу ноги начинает засасывать, сначала вы идете вперед через силу, потом, осознав всю тщетность этого, поворачиваете назад с надеждой выбраться из западни. Но не тут-то было. Под ногами - мерзкое, засасывающее болото, обрадованно чавкающее, почуяв очередную жертву. Через несколько минут все кончено, и лишь заплечный мешок, зацепившийся за одно из склонившихся над трясиной деревьев, напоминает о смелом, но неосторожном путешественнике…
</html>

end

:100
<html>
Вы оказываетесь во дворе Черного замка. Яркий свет факелов прямо перед вами заставляет остановиться и спрятаться в нише ворот. Двор полон Гоблинами и Орками, снующими между палаток, тут и там горят костры. Вы чуть было не оказались в самом центре военного лагеря врага. За палатками, в центре двора, виднеется большое мрачное строение. Судя по всему, это и есть цель вашего путешествия. Как ни странно, река течет и здесь — справа от вас. При мерцающем свете видно, что вода уходит под землю где-то неподалеку от центрального здания. Вам надо решать, куда держать путь.<br>
	<a href=btn:375>К реке?</a><br>
	<a href=btn:424>К палаткам?</a>
</html>

end

:101
<html>
Вы направляетесь к деревне и вскоре уже идете по ее главной улице. Здесь нет ничего сказочного или таинственного, многие похожие поселения вы проходили еще по дороге к Зачарованному лесу. Возле одного из домов из земли бьет небольшой родничок. Хотите <a href=btn:363>попить</a>, <a href=btn:307>наполнить флягу</a>, если она пуста, или не будете рисковать и пойдете <a href=btn:161>дальше</a>?
</html>

end

:102
<script>
expr_action = 'fightStart(8,10,"ГОБЛИН"); setLoyalty(11, "end", "623"); afterBattle("8")';
</script>
<html>
Перед вами широкая, полноводная река с быстрым течением. Дорога пересекает ее по небольшому прочному мосту, но у моста охрана. Это Гоблин - один из воинов бесчисленной армии Черного замка. Размахивая ятаганом, он приближается к вам. Вы столкнулись с ним настолько неожиданно, что времени наложить заклятие уже нет и выход лишь один: <a href="javascript: eval(expr_action)">драться</a>.<!--
	ГОБЛИН
	Ловкость 8 Сила 10 Лояльность 11
	Если его Лояльность уменьшится до 3, - 623. Если же вы убили его, то 8.-->
</html>

end

:103
<html>
Увы, вы не только не в силах оторвать скобы, но и чуть было не сломали меч. Теперь, если вы еще этого не сделали, можете посмотреть два оставшихся сундука: <a href=btn:474>большой</a> или <a href=btn:540>средний</a> или же <a href=btn:39>вернуться в большую залу</a> и сделать иной выбор.
</html>

end

:104
<html>
Видя, что вы не хотите причинить им вред, незнакомцы успокаиваются, а увидев еду, неистово и с благодарностью набрасываются на нее. После чего вы садитесь под дерево <a href=btn:520>поговорить</a>.
</html>

end

:105
<html>
Видимо, вы не слишком убедительны, если даже тупоголовые Орки почуяли неладное. Что ж, придется <a href=btn:341>драться</a>.
</html>

end

:106
<html>
Вы выходите из лавки торговца, радуясь, что первая встреча с человеком в таинственном лесу ничего странного и волшебного собой не представляла. Если бы и дальше все было так же легко! Но теперь перед вами три дороги. Вы можете пойти <a href=btn:329>направо</a>, <a href=btn:432>налево</a> или <a href=btn:20>прямо</a>.
</html>

end

:107
<html>
Вы заходите в таверну. Она совсем не похожа на подобные заведения в Элиссе. И это еще мягко сказано! Прежде всего вам едва удается сохранить равновесие на пороге: ведь пола в помещении нет. Вместо него - вода, и только узкие мостки вдоль левой стены ведут на другой конец комнаты. Из воды выныривает хозяин. По спутанной зеленой бороде, за которую цепляются несколько водорослей, можно легко догадаться, что это Водяной. Пока он подплывает, вы успеваете мельком осмотреться. На стенах - картины с изображениями рыб. Интересно было бы знать, кто это - друзья и родственники Водяного или иллюстрации к меню? На противоположной стороне странного помещения - невысокий плавающий помост. Мостки идут к нему, и именно туда взбирается сейчас Водяной, желая поприветствовать гостя в более привычной для него обстановке. Он достаточно доброжелателен, и если какие-то опасения и были, то они <a href=btn:527>рассеиваются</a>.
</html>

end

:108
<html>
Путь свободен. Теперь вы можете двигаться дальше. Из-за деревьев виднеется мрачный замок, сторожевые башенки по бокам внимательно наблюдают за дорогой. Ворота смотрят прямо на вас, и видно, что они охраняются. Пойдете <a href=btn:319>прямо</a> к ним или <a href=btn:232>налево</a> по лесу, в обход замка, надеясь проникнуть в него более легко?
</html>

end

:109
<html>
<a href="javascript: CheckCharm('453', '242')">Проверьте ваше ОБАЯНИЕ</a>.<!-- Если все в порядке, то 453, если нет - 242.-->
</html>

end

:110
<html>
Не успевает развилка скрыться за деревьями, как шум впереди заставляет насторожиться. Вы медленно идете по дороге, пока не замечаете человека в грязной и потрепанной одежде, лежащего на обочине. Все выдает в нем разбойника: и богатый расшитый пояс, которым подвязаны лохмотья, и сломанная кривая сабля, валяющаяся неподалеку. На оружии и вокруг него - пятна крови. Скорее всего незадолго до вашего появления здесь разыгралась битва не на жизнь, а на смерть, и тот, кто перед вами, не вышел из нее победителем. Незнакомец тяжело ранен, с первого взгляда видно, что он умирает. Увидев вас, он с трудом приподнимается и зовет: "Путник… подойди, кто бы ты ни был. Я несчастный торговец… на меня напали… разбойники, ограбили до нитки и бросили здесь умирать. Подойди… помоги мне!" Вы понимаете, что он вряд ли говорит правду. Скорее всего он что-то не поделил со своими собратьями, и те нанесли ему несколько настолько страшных ран, что даже лохмотья не могут скрыть их. Что вы сделаете? Подойдете к человеку и <a href=btn:302>выясните, что ему надо</a>? Или оставите умирать и <a href=btn:234>пойдете дальше</a>?
</html>

end

:111
proc changedress
<html>
Вы возвращаетесь в залу. Но что теперь? Попробуете <a href=btn:138>выйти через дверь</a>, <a href=btn:523>подняться</a> или <a href=btn:452>спуститься</a> по лестницам, или <a href=btn:205>подойдете к картине</a>, если вы этого еще не делали?
</html>

end

:112
<script>
if (newGame) removeItem('Огонь');
expr_action = 'AgilityFactor = -1; fightStart(10,10,"ЗЕЛЕНЫЙ РЫЦАРЬ"); afterBattle("414")';
</script>
<html>
Вы накладываете заклятие Огня, и мгновенно появившийся в воздухе огненный шар ударяет в грудь Первого рыцаря, не ожидавшего от вас такого коварства. Огонь прожигает мощные латы и достигает цели: корчась от боли, противник падает с лошади. Теперь перед вами только один враг, а времени на новые заклятия уже нет.<!--
	ЗЕЛЕНЫЙ РЫЦАРЬ
	Ловкость 10 Сила 10
	Если вы сражаетесь с ним, стоя на земле, вычитайте 1 из своей Ловкости. Если же хотите драться с ним на равных, ПРОВЕРЬТЕ СВОЮ УДАЧУ. Если Фортуна с вами, то удается оседлать коня Первого рыцаря, и ваша Ловкость не изменяется, иначе драться все же придется, стоя на земле. Если вы победили рыцаря, то - 414.--> Если вы хотите драться с ним на равных, <a href="javascript: CheckLuck('112.1', '112.2')">ПРОВЕРЬТЕ СВОЮ УДАЧУ</a>, иначе придется <a href="javascript: eval(expr_action)">сражаться с ним, стоя на земле</a>.
</html>

end

:112.1
<script>
expr_action = 'AgilityFactor = 0; fightStart(10,10,"ЗЕЛЕНЫЙ РЫЦАРЬ"); afterBattle("414")';
</script>
<html>
Вам удается оседлать коня Первого рыцаря - теперь Вы можете <a href="javascript: eval(expr_action)">сражаться</a> на равных.
</html>

end

:112.2
<html>
Вам не удается оседлать коня Первого рыцаря - придется <a href="javascript: eval(expr_action)">сражаться</a>, стоя на земле.
</html>

end

:113
<html>
Перед входом в комнату вы успели надеть зеленые латы. Это нечто вроде помещения для охраны, на стенах которого развешаны карты и пергаментные свитки на непонятном языке. Вы не успеваете разглядеть обстановку комнаты, потому что из-за стола навстречу вам встают два огромных Орка в полном вооружении. Вы оказались прямо перед стражами замка. Увидев "своего", Орки низко кланяются и садятся обратно за стол допивать брагу, мерзкий запах которой заполняет всю комнату. Они больше не обращают на вас никакого внимания: судя по всему, Зеленые рыцари должны отлично ориентироваться в замке, и любой вопрос на эту тему будет неуместен. Между тем в комнате еще три двери: по одной в каждой стене. Но имеет ли право Зеленый рыцарь войти в любую из них? Однако долго думать нельзя: Орки могут насторожиться. Решайте - вы пойдете <a href=btn:446>в правую</a> дверь, <a href=btn:607>в левую</a> - она заперта, но стражники услужливо откроют ее для вас или в дверь <a href=btn:397>в противоположной стене</a>?
</html>

end

:114
proc lose
<html>
Вы накладываете заклятие Огня, и огненный шар устремляется к Гоблинам. Они не успевают убежать, шар настигает обоих. Через несколько секунд все кончено, стражи мертвы. Но ваши шансы выбраться из клетки нисколько не увеличились, а накладывать заклятие Иллюзии больше не на кого. И когда через пару месяцев кто-нибудь из Орков случайно забредет в эту комнату, он увидит трупы не только охранников, но и скончавшегося от голода узника…
</html>

end

:115
param=2
proc removeStrength
<html>
Второе заклятие спасает вас: вы накладываете его, оттолкнувшись ногами от невидимой решетки, и оно благополучно выносит вас на берег. Однако плыть против течения не так-то просто<!-- - потеряйте 2 СИЛЫ-->. Поблизости видны палатки Гоблинов. Пошатываясь и мало что соображая, <a href=btn:424>направляетесь к ним</a>.
</html>

end

:116
<html>
Вы подходите к небольшому домику. Тяжелая каменная дверь приоткрыта, но внутри совершенно темно, и слышится только легкий шорох откуда-то из-под крыши. <a href=btn:16>Войдете</a> или решите не рисковать и направитесь <a href=btn:416>к центральному строению</a> или <a href=btn:4>к реке</a>?
</html>

end

:117
<html>
Через некоторое время вы видите в лесу то, что меньше всего ожидали увидеть: белый домик с красной черепичной крышей. Он выглядит так мирно, что кажется, будто стоит здесь уже много лет, и Зло не коснулось его своей рукой. Вокруг домика небольшой сад, от которого отходит несколько дорожек. <a href=btn:21>Войдете в домик</a> или выберете одну из дорожек - <a href=btn:294>направо</a>, которая вскоре переходит в тропинку, уходящую в лес, или <a href=btn:334>налево</a>, которая проходит через сад и скрывается за домом?
</html>

end

:118
<html>
Вы быстро переходите мост. Справа - излучина реки, вдали сквозь лес виднеются очертания замка. Но идти к нему приходится гораздо дольше, чем хотелось бы. День уже клонится к вечеру, когда вы выходите на опушку леса. Черный замок перед вами. Ужас исходит от его мрачных башен, и вы впервые жалеете, что отправились в это путешествие. Лес позади, но теперь вы как никогда понимаете, что это было только начало. Главные трудности только поджидают под этими неприветливыми сводами. Большие угрюмые ворота смотрят прямо на вас, возле них видна охрана, но до нее еще слишком далеко, чтобы можно было судить о точном количестве стражников. Лес обтекает замок со всех сторон. Вам надо сделать выбор: либо <a href=btn:190>направиться прямо к воротам и попытаться пройти через них</a>, либо <a href=btn:236>пойти налево в обход замка</a>: пытаться перелететь или переплыть через реку на глазах стражи - не самое разумное, что можно придумать. А может быть, у вас есть <a href="javascript: useItem2('Волшебный пояс для крота', 167)">волшебный пояс?
</html>

end

:119
<html>
Если бы вы были более внимательны, то заметили бы, что все звериные следы не только сходятся к середине поляны, но и заканчиваются там. Когда вы уже близки к этому месту, земля расступается под ногами, и вы проваливаетесь вниз. Это берлога, и медведица, рядом с которой лежит маленький медвежонок, отнюдь не в восторге от вашего появления. Угрожающе рыча, она приближается к вам. Будете <a href=btn:529>защищаться</a> или попробуете <a href=btn:447>поговорить с ней</a>?
</html>

end

:120
<html>
Откидываете ставни, и слабый свет проникает в домик. Вы видите тяжелый кованый ларь в углу и крышку какого-то люка, скорее всего ведущего в подпол. В это время снаружи раздаются голоса Гоблинов. Они совсем уже было собираются войти в домик, но вспоминают, что забыли взять две бутылки вина. Послать за ними только одного им не приходит в голову, и голоса постепенно удаляются. У вас есть немного времени. Заглянете в <a href=btn:433>ларь</a>, исследуете <a href=btn:227>люк</a> или решите <a href=btn:416>уйти</a> от греха подальше?
</html>

end

:121
<html>
Через несколько часов ходьбы вы начинаете нервничать: ни одного поворота, а от цели явно удаляетесь. Солнце нещадно палит, пот заливает глаза, и вы уже начинаете мечтать о лесе, пусть полном опасностей, но тенистом и прохладном. Дерево в стороне от дороги кажется вам хорошим предзнаменованием - под ним можно отдохнуть и немного поспать: от ходьбы в такую жару все равно толку немного. <a href=btn:525>Подойдете к дереву</a> или <a href=btn:210>пойдете дальше по дороге</a>?
</html>

end

:122
<html>
"Хобгоблин", - таинственным полушепотом говорите вы, и стража, вытянувшись по струнке, беспрепятственно <a href=btn:48>пропускает вас в замок</a>.
</html>

end

:123
<script>
expr_action = 'fightStart(9,4,"ПЕРВЫЙ РАЗБОЙНИК",7,8,"ВТОРОЙ РАЗБОЙНИК",6,6,"ТРЕТИЙ РАЗБОЙНИК"); afterBattle("123.1")';
expr_action2 = "if (itemExists('Ловкость')) {removeItem('Ловкость'); AgilityFactor = 2; eval(expr_action) }";
expr_action3 = "if (itemExists('Слабость')) {removeItem('Слабость'); enemyPowerFactor = -2; eval(expr_action) }";
expr_action4 = "if (itemExists('Копия')) {createCopy(); eval(expr_action); }";
</script>
<html>
Вы мгновенно обнажаете меч и наносите удар ближайшему разбойнику. Вам удается ранить его, но <a href="javascript: eval(expr_action)">драться</a> придется все равно одновременно со всеми тремя. В вашем распоряжении есть заклятие <a href="javascript: eval(expr_action4)">Копии</a>. Если хотите воспользуйтесь, заклятием <a href="javascript: eval(expr_action2)">Ловкости</a><!--, можете на время боя прибавить к своей Ловкости две единицы.--> или заклятием <a href="javascript: eval(expr_action3)">Слабости</a>.<!-- - уменьшите на столько же МОЩНОСТЬ УДАРА любого из противников.
	ПЕРВЫЙ РАЗБОЙНИК
	Ловкость 9 Сила 4
	ВТОРОЙ РАЗБОЙНИК
	Ловкость 7 Сила 8
	ТРЕТИЙ РАЗБОЙНИК
	Ловкость 6 Сила 6
	Если вы победили их, то можете либо поскорее уйти, опасаясь, что поблизости могут быть их друзья (46), либо обшарить карманы убитых (335).-->
</html>

end

:123.1
<html>
Вы победили. Теперь можете либо поскорее <a href=btn:46>уйти</a>, опасаясь, что поблизости могут быть их друзья, либо <a href=btn:335>обшарить карманы убитых</a>.
</html>

end

:124
<html>
Торговец нисколько не удивляется и говорит, что тогда он может сообщить вам кое-что интересное, но это будет стоить 7 золотых. Впрочем, он согласен и на скромный, но ценный подарок. <a href=btn:42>Заплатите ему</a>, поищете в заплечном мешке <a href=btn:217>подарок</a> или вежливо поблагодарите и <a href=btn:106>уйдете</a>? А может быть, решите, что лучше <a href=btn:518>убить</a> его и осмотреть лавку?
</html>

end

:125
<html>
<a href="javascript: CheckLuck('219', '85')">ПРОВЕРЬТЕ СВОЮ УДАЧУ.</a><!-- Если фортуна за вас, то 219, если нет, то 85.-->
</html>

end

:126
<script>
expr_action = 'addItem("Меч Зеленого рыцаря"); modifyAgility(1); removeItem("Меч")';
</script>
<html>
Враг убит. Если хотите, можете взять с собой его <a href="javascript: addItem('Латы')">латы</a>. Они займут 3 места в вашем заплечном мешке. К сожалению, вы не успели поймать его лошадь, поэтому ни на лесных дорогах, ни при входе в замок доспехи не помогут: пеший рыцарь сразу же вызовет подозрения. Однако если будет суждено проникнуть в замок (чего не бывает),<!-- прибавьте 60 к номеру первого же параграфа--> можете надеть латы.<!-- Пока латы на вас, ваша собственная одежда будет в заплечном мешке.--> Но будьте осторожны: ведь неизвестно, как должен вести себя Зеленый рыцарь, какие двери в замке перед ним открыты, а какие нет. Поэтому злоупотреблять переодеванием явно не стоит - можете попасть в беду. Карманы у противника пусты, но ведь главное богатство рыцаря - <a href="javascript: eval(expr_action)">меч</a><!-- (- 177)-->. Можете взять его с собой, он прибавит <!--1 ЛОВКОСТЬ (в том числе и сверх изначальной)-->вам ловкости, но тогда ваш собственный клинок придется оставить на поле боя. После этого вы <a href=btn:534>отправляетесь в путь</a>.
</html>

end

:127
<html>
Вы протягиваете талисман сквозь решетку. Волшебник слегка подрагивающей от волнения рукой принимает его и тут же надевает на шею. Вы ждете, что он разрушит свою темницу и выйдет к вам, но, кажется, он совсем не собирается этого делать. "Старости не свойственно торопиться, - говорит он. - Сначала я вспомню заклинания, разрушающие злую власть Барлада Дэрта, а потом уже выйду отсюда. Если же вы спешите, молодой человек, то послушайтесь моего совета. Когда будете будить Принцессу, подходите к ней только слева и никак иначе. Если же решите сразиться с волшебником, для этого лучше иметь золотое кольцо". Вы благодарите старика за совет и <a href=btn:225>идете к соседней клетке</a>.
</html>

end

:128
param=4
proc addStrength
<html>
Вы пробуете красное вино. Оно действительно великолепно. Можете восстановить силы, поблагодарить Тролля и, не рискуя быть излишне навязчивым, <a href=btn:207>покинуть погреб</a> через дверь в противоположном конце прохода между полками.
</html>

end

:129
<html>
Путь ваш недолог. Лес расступается, и открывается вид на большую деревню. Это так неожиданно, что вы несколько минут не можете поверить своим глазам. Но все же надо решать: <a href=btn:580>идти в деревню</a> или двинуться по лесу <a href=btn:223>вправо</a>, обходя ее.
</html>

end

:130
<html>
За дверью узкая лестница, уходящая вверх. Хотите <a href=btn:607>подняться</a> по ней или попробуете (если еще не пытались это сделать) открыть две другие двери: <a href=btn:393>за вашей спиной</a> или <a href=btn:337>справа от вас</a>.
</html>

end

:131
param=4
proc removeStrength
<html>
Вы отважны, но вряд ли кто-нибудь рискнет назвать вас осмотрительным. Это Микстура для лечения больных обезьян. Она настолько противна, что вы теряете силы. После этого можете отправляться <a href=btn:305>дальше</a>.
</html>

end

:132
param=6
proc addStrength
<html>
Остров кажется вам немного странным: он весь засажен прекрасными фруктовыми деревьями, но нигде не видно ни единой живой души. Среди деревьев больше всего апельсиновых. Можете сорвать три плода<!--, каждый из них восстановит вам по 2 СИЛЫ--> - они восстановят вам силы. В центре островка на высоком дереве растет апельсин, который привлекает ваше внимание. Сначала вы даже не можете понять, почему он блестит на солнце, но когда подходите ближе, то видите, что он из чистого золота. <a href=btn:336>Рискнете сорвать его</a> или <a href=btn:24>будете выбираться с острова</a>?
</html>

end

:133
<html>
Узнав, что талисмана у вас нет, старик сразу теряет к вам интерес. Вы же переходите к соседней клетке и <a href=btn:225>вглядываетесь во тьму</a>.
</html>

end

:134
<html>
Вы предлагаете коготь дракона. Дракон явно удовлетворен вашим выбором: он поднимается в воздух и <a href=btn:454>улетает</a>.
</html>

end

:135
<html>
Вы тихо шепчете: "Трое из Эвенло". Провожатый вздрагивает от удивления и вопросительно смотрит на вас. Вы, без сомнения, угадали, что это именно тот человек, который вам нужен. После того как расскажете "старику" о судьбе Беглецов, он отдаст вам свечу, которую несет, и ваши вещи. Вы свободны. А как же он, ведь чародей не простит измены? Ничего страшного: доложит, будто убил вас при попытке к бегству. Спрашиваете его, как отсюда выбраться, и узнаете, что есть два пути. Либо свернуть в первый коридор налево, который приведет к лестнице вниз, либо пойти прямо - тогда вы придете к лестнице наверх. Куда вы пойдете, поблагодарив старика, <a href=btn:422>прямо</a> или <a href=btn:435>налево</a>?
</html>

end

:136
<html>
Дверь открывается, и вы попадаете на кухню. На огромных плитах в котлах что-то варится. Кажется, повар и два поваренка совсем не удивлены вашим появлением: они заняты стряпней. В углу кухни виден какой-то сундук, которого здесь явно быть не должно, настолько странно он смотрится. Рядом с ним дверь, через которую вы можете <a href=btn:379>выйти</a>. Вряд ли разумно совать свой нос в сундук, даже если вам безумно любопытно, что там: наверняка настоящий Зеленый рыцарь не стал бы демонстрировать подобный интерес. Однако если эта мебель вас крайне заинтересовала, остается только попытаться <a href=btn:604>перебить поваров</a>.
</html>

end

:137
<html>
Сколько монет вы кинете нищенке? <a href=btn:458>Три</a>, <a href=btn:369>шесть</a> или <a href=btn:274>восемь</a>? Если у вас нет такого количества денег, придется либо попытаться <a href=btn:522>отогнать ее мечом</a>, либо предложить какой-нибудь <a href=btn:194>подарок</a>.
</html>

end

:138
<html>
Вы открываете дверь и видите странную узкую комнату. Рядом с вами стоит нечто похожее на вешалку, на которой висит то ли одежда, то ли просто мешковина. Другого выхода из комнаты нет: у противоположной стены стоят три сундука. <a href=btn:243>Войдете в комнату</a> или <a href=btn:39>вернетесь в большую залу</a> и сделаете другой выбор?
</html>

end

:139
<html>
Видимо, вы не слишком убедительны, если даже тупоголовые Орки почуяли неладное. Что ж, придется <a href=btn:428>драться</a>.
</html>

end

:140
<html>
Коридор упирается в дверь, за которой оказывается лестница, ведущая наверх. Она освещена. Вы быстро идете вверх, минуя один пролет за другим, но выхода нет. Наконец перед вами последний пролет, в начале его дверь, однако все старания открыть ее оканчиваются ничем. Придется <a href=btn:322>подниматься до конца</a>.
</html>

end

:141
proc lose
<html>
Рыцарь странно смотрит на бронзовый свисток у вас в руках и отступает в сторону, пропуская вас. Вы делаете шаг вперед, но в это время он с силой налегает на какую-то рукоять, торчащую рядом с ним из стены. С ужасом почувствовав, что пол уходит из-под ног, летите в бездну. Воды реки далеко внизу примут ваш труп…
</html>

end

:142
<html>
Склонившись к цветам, вдыхаете их запах. Он великолепен, но слишком резок. Вы чувствуете, как кружится голова, и <a href=btn:409>теряете сознание…</a>.
</html>

end

:143
param=1
proc removeStrength
<html>
Вы выбегаете с Заставы и сломя голову несетесь по дороге<!-- (потеряйте 1 СИЛУ)-->. Сзади слышен шум погони. Вправо отходит узенькая тропка, и вы сворачиваете на нее, надеясь затеряться в лесу. Замысел удается, шум стихает: преследователи ничего не заметили и, кажется, побежали дальше. Слава богам, ни Гоблины, ни Орки никогда не отличались особой сообразительностью! Отдышавшись, вы <a href=btn:531>идете вперед</a>, пока не выходите на другую тропинку.
</html>

end

:144
mirror=1
<html>
Вы просовываете шкуру оленя сквозь решетку и кидаете ее на пол клетки. Олень, как будто только этого и ждал, неторопливо ложится на нее и обретает дар речи. Он не расположен рассказывать вам, за что томится, но ненавидит Барлада Дэрта и говорит, что, насколько ему известно (он слышал разговоры стражников, которые не подозревали, что животное их понимает), в кабинете у волшебника и в зале, где спит Принцесса, стоят одинаковые зеркала. За ними потайные дверцы, ведущие на специальную лестницу: именно по ней волшебник приходит в покои Принцессы. Вы благодарите благородное животное за помощь и обещаете ему убить ненавистного мага. После этого можете идти дальше. Если вы когда-нибудь захотите воспользоваться потайной лестницей из кабинета волшебника, подойдите к зеркалу<!-- и вычтите 13 из номера того параграфа, на котором будете находиться-->. То же самое можете сделать, если надо будет от Принцессы попасть к магу. А теперь идите <a href=btn:465>дальше</a>.
</html>

end

:145
<html>
Повернув налево, вы идете по дороге, вымощенной черным камнем, навевающим не слишком приятные мысли. Лес расступается, будто не желает иметь с ней ничего общего, но он хорошо виден и не собирается выпускать свою жертву. Дорога петляет среди холмов, и скоро полуденная жара заставляет пожалеть о прохладе леса. Солнце нещадно палит, а нигде нет даже намека на тень. Однако боги сжалились над вами: за очередным поворотом в стороне от дороги виднеется большое дерево. От ходьбы в такую жару все равно толку немного, и вы можете отдохнуть под его кроной. <a href=btn:525>Свернете к дереву</a> или все же <a href=btn:188>пойдете дальше</a>?
</html>

end

:146
<html>
Они со смехом отвечают, что не принимают воинов со стороны, а такие слабые и хилые, как вы, им вообще не нужны. М-да, об этом вы как-то не подумали. Приходится импровизировать на ходу. Встав в позу оскорбленного достоинства, громко произносите: "Но меня призвал сюда сам чародей. Способны ли ваши тупые головы это понять?!" На лицах Орков появляется столь непривычное для них задумчивое выражение. <a href="javascript: CheckCharm('630', '139')">ПРОВЕРЬТЕ СВОЕ ОБАЯНИЕ</a>.<!-- Если все в порядке, то 630, если нет, - 139.-->
</html>

end

:147
<html>
За следующей решеткой вы видите человека и облегченно вздыхаете. С ним хоть поговорить можно. К сожалению, он подозрительно напоминает сумасшедшего: смотрит в одну точку, бормочет что-то про какой-то серебряный свисток и напрочь отказывается разговаривать о чем бы то ни было. Если у вас есть <a href="javascript: tryItem('Серебряный свисток', 147, 313)">серебряный свисток</a>, можете показать его несчастному. В противном случае вам придется на развилку (остальные клетки оказываются пустыми) возвратиться и выбирать, куда вы пойдете: <a href=btn:348>налево</a> или <a href=btn:537>обратно</a>.
</html>

end

:148
<html>
Вы говорите, что идете в Черный замок сражаться с Барладом Дэртом. "А чем же он так не угодил вам?" - интересуется старичок. Вы понимаете, что <a href=btn:464>надо идти до конца</a>.
</html>

end

:149
<html>
Вы решаете задержаться и поговорить с Домиком. "Давай поиграем с тобой в загадки, храбрый путешественник, - предлагает Домик. - Если отгадаешь загадку, подарок тебе сделаю, не отгадаешь - не солоно хлебавши уйдешь". Почему бы не согласиться, ведь вы ничего не теряете. "А вот и моя первая загадка, - говорит Домик. - Для начала самая легкая. По небу летело, даже не шипело##59$ только разозлилось, пламя с дымом появилось". Если вы отгадали загадку, то, конечно же, поняли, о чем или о ком идет речь<!--. Сложите между собой порядковые номера всех букв в этом слове и посмотрите параграф с нужным вам номером.-->, - <a href="javascript: inputAnswer('дракон', '67', 'incorrect_answer')">назовите ответ</a>. Если же не отгадали, как ни грустно, а придется <a href=btn:98>уходить</a> по дорожке, ведущей от домика.
</html>

end

:150
<html>
Вы подносите кусочек металла к отверстию в люке, но он легко проваливается сквозь него. Вы расстроены, однако через секунду внутри слышится мелодичный звон, и люк распахивается. Скорее всего вам удалось привести в действие какой-то механизм. Перед вами подземный ход. Хотите <a href=btn:269>пройти по нему</a> или лучше <a href=btn:416>уйдете</a> из домика, пока не вернулись Гоблины?
</html>

end

:151
proc lose
<html>
Дорога, которую вы избрали, вновь возвращает вас к опушке леса. Но стоит вам выйти из него, как… дорога исчезает. Вы стоите посреди поля, лес рядом, рукой подать, но войти в него вновь никак не удается: сучья деревьев отбрасывают назад. Вы пытаетесь перехитрить лес - обойти его и найти ту дорогу, по которой входили. Через полтора дня вы действительно подходите к этому месту, но что это? Дорога заканчивается у опушки, не рискуя войти под кроны деревьев. Лес победил. Вам придется вернуться во дворец и признаться Королю, что не смогли выполнить возложенной на вас миссии. Однако почему-то кажется, что на следующее утро вы вновь предстанете перед лордом Элгариола и снова отправитесь в путь, чтобы освободить Принцессу. Хотя это будет уже совсем другая история…
</html>

end

:152
<html>
Вы дотрагиваетесь до зеркала, и оно начинает поворачиваться вокруг своей оси, открывая черный провал потайного хода. Взяв свечу со стола волшебника, переступаете порог. Дверь мягко закрывается, однако когда вы пробуете снова ее открыть, то она поддается. Маг мертв, и волшебство, заставляющее двери намертво захлопываться за вашей спиной, перестало действовать. На много этажей вниз спускаетесь по темной лестнице, пока наконец не упираетесь в такую же дверь. Она послушно поворачивается, и вы вступаете в святая святых замка: небольшую залу, в которой душно от множества горящих свечей. В одной из стен - четыре одинаковые двери. В центре залы на небольшом возвышении стоит хрустальная кровать, на которой спит волшебным сном прекрасная девушка с распущенными золотыми волосами. Это Принцесса, вы сразу узнаете ее, хотя лишь мельком видели во дворце ее портрет. Но чтобы ее разбудить, надо приблизиться к ложу. Подойдете <a href=btn:472>с правой</a> или <a href=btn:275>с левой</a> стороны?
</html>

end

:153
<html>
Попробуете наложить заклятие <a href="javascript: useItem2('Огонь', 538)">Огня</a> или <a href="javascript: useItem2('Иллюзия', 370)">Иллюзии</a>? Если нет ни того, ни другого, остается только <a href=btn:68>ждать</a>, что будет дальше.
</html>

end

:154
<html>
Вы выбираете тропинку, ведущую направо, но она оказывается гораздо длиннее, чем вы предполагали. Только к полудню пересекаете широкую дорогу, на которой виднеются следы множества копыт. Можете выйти на дорогу и пойти по ней <a href=btn:559>направо</a> или <a href=btn:181>налево</a>, если же пойдете <a href=btn:445>прямо по тропинке</a>, то вскоре она выведет на другую дорогу.
</html>

end

:155
<script>
if (newGame) { modifyGold(-Gold); ContainsObjects[0] = 0; ContainsObjects[1] = 0; newGame = false; init_Inventory(); newGame = true; }
</script>
<html>
Вы просыпаетесь в лесу. Раннее утро, только-только начинают петь птицы, однако никакой таверны поблизости нет. Ваш заплечный мешок и деньги исчезли. Водяной попросту ограбил вас! Или все это приснилось? Так или иначе, надо двигаться вперед, другого выхода нет, благо меч привычно висит на боку: на него никто не покусился. Наугад пробираясь через лес, вы все же выбираетесь и не просто на дорогу, а на перекресток. Теперь можете идти дальше уже по дороге: либо <a href=btn:461>прямо</a>, либо <a href=btn:250>направо</a>. Очевидно, что путь налево приведет обратно к опушке.
</html>

end

:156
<script>
if (newGame) {
   addItem('Волшебный пояс для крота');
   dice = Math.floor(Math.random() * 6);
   Luck [dice] = true;
}
</script>
<html>
Вы берете пояс и надеваете на себя. Это Волшебный пояс: с его помощью можете в любой момент (но только один раз за все путешествие) позвать на помощь крота. Он выроет ход, по которому сможете проникнуть во двор Черного замка. <!--Когда вы увидите замок, обратитесь к параграфу 167, если, конечно, будет такое желание. Боги рады за вас: киньте кубик и почистите соответствующий квадрат УДАЧИ. -->Теперь же пора выбираться из берлоги. С поляны в глубь леса ведет какая-то дорога, и вы решаете <a href=btn:44>пойти по ней</a>.
</html>

end

:157
proc lose
<html>
Вы заговариваете с женщинами, но что это… Ужас написан на их лицах. С громкими криками они убегают в соседнюю комнату, а в дверь врывается стража. Зеленым рыцарям запрещен вход в гарем, кроме случаев крайней необходимости. Но и тогда им не позволяется разговаривать с женами мага. Бой со стражей недолгий, неравный и кровавый. Их слишком много. Последнее, что вы увидите в этом мире, будет короткий меч Гоблина…
</html>

end

:158
<html>
Вы врываетесь в сторожку и застаете там еще одного Гоблина и двух Орков, сидящих вокруг невысокого деревянного стола. Перед ними кружки с какой-то жидкостью - стражники явно пьяны. Увидев ваш обнаженный клинок, они сразу все понимают и беспрекословно кидают оружие к вашим ногам. Заперев их в погребе, можете <a href=btn:484>осмотреть помещение</a>.
</html>

end

:159
proc lose
<html>
К тому же вас клонит ко сну. Не в силах сопротивляться, вы решаете поспать часок-другой и ложитесь на траву. Но вам не повезло: это луг, на котором растет силлиэл, сон-трава. И проснуться когда бы то ни было уже не суждено - трава питается именно неосторожными путешественниками…
</html>

end

:160
instr str=
if message=1 then str="А может быть, вы хотите <a href=btn:135>что-то передать</a> старику?"
<html>
Вы идете за стариком по коридору. Он безмолвно указывает путь. Попробуете <a href=btn:371>напасть</a> на него или <a href=btn:276>пойдете дальше</a>? #str$
</html>

end

:161
<html>
В деревне странно только одно - она совершенно пуста. Не слышно даже лая собак. Кажется, все жители покинули ее, но вдруг вы видите дряхлого старика, как ни в чем не бывало сидящего возле одного из домов на грубой, вросшей в землю скамье. Подойдете к нему <a href=btn:50>поговорить</a> или <a href=btn:179>пойдете дальше</a>?
</html>

end

:162
<html>
Вы дергаете за ручку, но дверь не открывается. Осмотревшись, замечаете, что рядом висит шнурок звонка. Пожалуй, позвонить разумнее, нежели ломиться силой. <a href=btn:611>Рискнете сделать это</a> или <a href=btn:76>пойдете в другую дверь</a>?
</html>

end

:163
<html>
"Ты разгадал самую сложную мою загадку, - с радостью говорит Домик. - Более того, много десятков лет я загадываю ее прохожим, и ты первый, от кого я услышал правильный ответ. За это я расскажу тебе то, что не слышал от меня еще никто. Высок и полон тайн Черный замок, но пуще других волшебник бережет самую страшную тайну: где находится Принцесса. Ее-то я тебе и открою: несчастная девушка спит на хрустальной кровати в самом глухом подземелье замка, на самом нижнем этаже. Охраняют ее Зеленые рыцари. Когда пойдешь туда, то увидишь пять дверей. Про две из них тебе сразу все станет известно. Могу сказать только одно: птица лучше перьев. А три останутся загадкой. И эту загадку я помогу тебе отгадать. Левая дверь - смерть. Средняя и правая - кровь. Как видишь, легкого пути нет, но и знание можно использовать как оружие. Только человеку, который ведает, что такое Совесть, могу я доверить эту тайну". Вы благодарите Домик и, попрощавшись, <a href=btn:98>идете дальше по дорожке, которая уходит в лес прямо от его дверей</a>.
</html>

end

:164
<html>
Вы используете заклятие Плавания и незамеченным <a href=btn:424>перебираетесь на другой берег реки</a>.
</html>

end

:165
if mirror=1 then str="<a href=btn:152>Вы подходите к зеркалу.</a>" else str="Вы подходите к зеркалу, но оно, как ни странно, самое обыкновенное и вряд ли может хоть чем-то помочь. Теперь выбирайте: осмотрите <a href=btn:560>шкаф</a> или <a href=btn:288>карты на столе</a>?<br> <a href=btn:493>Или вы уже делали и то, и другое?</a>"
<html>
#str$
</html>

end

:166
<html>
Вы платите деньги, и Начальник стражи выписывает <a href="javascript: addItem('Пропуск')">пропуск</a> на небольшом кусочке пергамента. Он предупреждает, что пропуск действителен только на первые два этажа. Если понадобится предъявить его, прибавьте 20 к номеру параграфа, на котором будете находиться. Начальник стражи может проводить вас до лестницы, если скажете ему, что вам надо <a href=btn:550>на второй этаж</a>, или же <a href=btn:39>уходите</a> через ту дверь, на которую он вам указывает - в противоположной стене.
</html>

end

:167
<html>
Волшебный пояс надет, и крот появляется сразу же, как только вы его зовете. Выяснив, в чем дело, он принимается за работу. Меньше чем за полчаса удобный подземный ход к вашим услугам, после чего вы благодарите крота и, <a href=btn:100>пройдя под стенами</a>,…
</html>

end

:168
<html>
Вы показываете рыцарю четки и понимаете, что угадали: они служат пропуском через этот пост. Можете <a href=btn:241>идти дальше</a> по коридору, пока путь не преградит дверь.
</html>

end

:169
wizardKilled=1
if awaken=1 then str="вы можете <a href=btn:655>покинуть замок</a> вместе с Принцессой." else str="можете <a href=btn:612>обратить внимание на побежденного врага</a> или осмотреть его кабинет:<br><a href=btn:560>Подойти к шкафу</a>,<br><a href=btn:288>Посмотреть карты на столе</a>,<br><a href=btn:165>Приблизиться к зеркалу</a>."
<html>
Вы склоняетесь над убитым, все еще не веря собственным глазам. Теперь #str$
</html>

end

:170
<html>
Неожиданно вы чувствуете, что Оберег ведет себя как-то неспокойно, словно хочет вырваться наружу. Повинуясь не совсем осознанному импульсу, вы вынимаете его из-под одежды и показываете рыцарям. Как ни странно, они низко кланяются. Ваш Оберег - не что иное, как пропуск, разрешающий беспрепятственно проходить через этот пост. Теперь можете взойти по лестнице и, оказавшись на небольшом балкончике, решить, какая из дверей вам больше нравится: <a href=btn:594>правая</a> или <a href=btn:599>левая</a>.
</html>

end

:171
<html>
Вы достаете флакончик духов и протягиваете его женщине-вампиру. Она никогда не видела ничего подобного и не представляет себе, что бы это могло быть. Однако непривычный запах ей нравится. Пока она рассматривает подарок, можете быстро <a href=btn:301>выскользнуть в дверь слева</a>, закрытую тяжелой портьерой.
</html>

end

:172
<html>
Вы накладываете заклятие, и оно действует, <a href=btn:347>но…</a>.
</html>

end

:173
param=2
proc addStrength
proc changedress
<html>
Вы открываете сундук, но… он пуст. Видимо, его только временно принесли на кухню за неимением лучшего места. Если вы еще не пробовали местной стряпни, можете наскоро похлебать суп из котла и восстановить силы, после чего лучше будет побыстрее <a href=btn:379>уйти</a>.
</html>

end

:174
proc lose
<html>
Ваше решение было несколько опрометчивым. Один из командиров, о существовании которых вы уже наверняка забыли, наконец-то обращает на вас внимание и, подкравшись сзади, сносит голову мечом. Вообще-то человек несколько отличается от Гоблина, так что распознать шпиона не составило особого труда даже для Орка. Из-за своей беспечности вы не выполнили столь важную миссию…
</html>

end

:175
<html>
Вы поднимаетесь на холм и благополучно обходите внушающее опасения место. Затем спускаетесь обратно на дорогу и <a href=btn:121>продолжаете путь</a>.
</html>

end

:176
<script>
expr_action = 'if (Gold >= 2) if (Strength < Max_Strength) { modifyGold(-2); modifyStrength(3); } else alert("Ваша сила равна максимальной - вы не можете выпить молоко сейчас!"); else alert("У Вас не хватает денег!")';
expr_action2 = 'if (Gold >= 4) if (waterAmount < 2) { modifyGold(-4); modifyWater(2); } else alert("Ваша фляга уже полна!"); else alert("У Вас не хватает денег!")';
expr_action3 = 'if (Gold >= 2) if (waterAmount < 2) { modifyGold(-2); modifyWater(1); } else alert("Ваша фляга уже полна!"); else alert("У Вас не хватает денег!")';
expr_action4 = 'if (Gold >= 8) { modifyGold(-8); if (Sack_MaxAmount) modifyGold(2); Sack_MaxAmount = 9; } else alert("У Вас не хватает денег!")';
</script>
<html>
Как ни странно, этот человек действительно торговец, обосновавшийся в лесу не так давно. По его словам, опасностей вокруг нет никаких, все это сказки да слухи, распускаемые теми, кому хочется прослыть героями, побывав в самом обычном лесу. Он предлагает вам свои товары: <a href="javascript: buyItem('Лепешки от укуса змеи', 3)">магические лепешки</a> ценой в 3 золотых (по его словам, помогают от укуса змеи)<!--(+ 134)-->, <a href="javascript: buyItem('Мандарин', 2)">мандарин</a> (стоит 2 золотых и восстановит вам 2 СИЛЫ), <a href="javascript: buyItem('Яблоко', 1)">яблоко</a> (1 золотой и 1 СИЛА), <a href="javascript: buyItem('Банан', 6)">банан</a> (6 золотых и 6 СИЛ), <a href="javascript: eval(expr_action)">молоко</a> (2 золотых и 3 СИЛЫ), <a href="javascript: buyItem('Мешочек с лепестками розы', 5)">мешочек с лепестками розы</a>, отгоняющими злых духов, всего за 5 монет <!--(- 49)-->. За 4 золотых он предлагает наполнить вашу флягу <a href="javascript: eval(expr_action2)">целиком</a> или за 2 <a href="javascript: eval(expr_action3)">наполовину</a>. Если вы что-то хотите купить - покупайте. Молоко придется выпить сразу, а все остальное, если хотите, можете взять с собой. Если есть желание, купите еще и <a href="javascript: eval(expr_action4)">заплечный мешок</a> - он стоит 8 золотых, но в него помещается больше, чем в ваш: не 7, а 9 предметов. Однако два заплечных мешка нести неудобно, и если свой у вас еще с собой, вы должны будете оставить его в доме у торговца. Так уж и быть, он даст вам за него две монеты. Теперь можете либо <a href=btn:106>уходить</a>, либо попробовать <a href=btn:213>поговорить с ним еще</a>.
</html>

end

:177
proc lose
<html>
Вы с трудом пробираетесь через кустарник. Кажется, он наконец-то заканчивается. Но что это? Земля уходит из-под ног, и вы по пояс проваливаетесь в мерзкое, засасывающее болото. Забыв об осторожности, кричите во весь голос, зовете на помощь, но все тщетно. Через несколько секунд вас засосет одна из ловушек, приготовленных Барладом Дэртом для чересчур любопытных путешественников. Вы не выполнили свою миссию…
</html>

end

:178
<html>
Вы гонитесь за зайцем, не разбирая дороги. Ветки хлещут по лицу, но голод гонит все вперед и вперед. Неожиданно заяц жалобно пищит и начинает биться на земле. Подбежав ближе, видите, что он попал в одну из охотничьих ловушек, наверняка поставленных кем-нибудь из слуг волшебника. Если у вас есть огниво, можете воспользоваться им и <a href="javascript: useItem2('Огниво', 178, 111)">приготовить обед</a>. Если нет, то вряд ли вы настолько голодны, что станете есть сырое мясо. К сожалению, найти дорогу обратно уже невозможно, и вам приходится <a href=btn:406>идти по тропинке</a>, которая углубляется в лес от того места, где стояла ловушка.
</html>

end

:179
<html>
Никого более не встретив, выходите из деревни и углубляетесь в лес. Бодро убегающий вдаль путь не слишком радует, поскольку боязливо жмется к опушке. Вы же прекрасно знаете, что Черный замок надо искать где-то ближе к центру Зачарованного леса. Не успеваете об этом подумать, как видите тропинку, услужливо убегающую направо. <a href=btn:99>Пойдете по ней</a> или <a href=btn:377>решите, что дорога есть дорога, и она должна привести к цели</a>?
</html>

end

:180
proc lose
<html>
Женщина-вампир выхватывает из ваших рук свисток и пронзительно свистит. Через несколько секунд в комнату вбегает охрана - пять Зеленых рыцарей. Перед смертью вы еще успеете вспомнить, как достался вам этот свисток, и попытаться догадаться, для чего он служит на самом деле…
</html>

end

:181
<html>
Впереди большая поляна, на которую выходят несколько дорог. Но вы не успеваете сообразить, какую из них выбрать. После тихого свиста, очевидно, послужившего сигналом, с разных сторон на поляну выскакивают трое. Достаточно одного взгляда, чтобы понять, что это разбойники, специально поджидавшие неосторожного путешественника. Лат на них нет, только рваные кожаные куртки и шаровары. И трудно сказать, не остался ли кто-нибудь еще в засаде. Вы можете сразу <a href=btn:123>драться</a> с ними, не ожидая пощады и надеясь выиграть время, нападая первым. А можете попытаться <a href=btn:17>поговорить</a>.
</html>

end

:182
param=2
proc removeStrength
<html>
Сосуд оказывается скользким, как рыба, и со звоном разбивается об пол. На шум вбегает стража - Орки, вооруженные кривыми зазубренными саблями. Вы пытаетесь сопротивляться, но сильный удар по голове<!-- (потеряйте 2 СИЛЫ)--> сбивает с ног, и <a href=btn:409>вы теряете сознание…</a>.
</html>

end

:183
<script>
AgilityFactor -= 1;
expr_action = 'fightStart(10,10,"ПЕРВЫЙ ЗЕЛЕНЫЙ РЫЦАРЬ",10,10,"ВТОРОЙ ЗЕЛЕНЫЙ РЫЦАРЬ"); battleEndCondition("num_win > 0"); afterBattle("436")';
</script>
<html>
Вам придется<!-- не только--> <a href="javascript: eval(expr_action)">драться сразу с обоими Зелеными рыцарями</a><!--, но и вычитать 1 из своей Ловкости, поскольку-->. Драться неудобно - ведь вы стоите на земле, а они атакуют вас сверху, с коней.<!--
	ПЕРВЫЙ ЗЕЛЕНЫЙ РЫЦАРЬ
	Ловкость 10 Сила 10
	ВТОРОЙ ЗЕЛЕНЫЙ РЫЦАРЬ
	Ловкость 10 Сила 10
	Если вам удалось победить одного из рыцарей, то 436.-->
</html>

end

:184
<html>
Они не очень удивлены вашим вопросом и кивают на дверь в противоположной стене. В самом деле, им-то что - пусть Начальник стражи сам разбирается, имеете ли вы право разгуливать по замку. Менять решение уже поздно, и вы <a href=btn:337>открываете указанную дверь</a>.
</html>

end

:185
<html>
Он еще не успевает приблизиться, как вы на ходу кричите, что вам некогда, и идете дальше. Теперь перед вами три дороги. Куда вы пойдете: <a href=btn:329>направо</a>, <a href=btn:432>налево</a> или <a href=btn:20>прямо</a>?
</html>

end

:186
<html>
Проводник говорит, что мгновенно понял это, как только посмотрел на вас. Он и сам ненавидит злого волшебника и уже помогал вашим предшественникам. Но не забыли ли вы, что он берет за это 2 золотых? <a href=btn:456>Заплатите</a> или откажетесь и <a href=btn:291>уйдете</a>?
</html>

end

:187
<script>
if (newGame) {
   modifyGold(10);
   dice = Math.floor(Math.random() * 6);
   Luck [dice] = true;
}
</script>
<html>
Решительно сворачиваете с тропинки и поднимаетесь на холм к двум березам. Вы не слишком-то поверили в этот клад, но почему бы не попробовать его поискать. Прикинув, где может быть середина между двумя деревьями, несколько раз втыкаете меч в мягкую землю, чувствуя себя не совсем в своей тарелке. Наконец он во что-то упирается. Копать сразу становится гораздо интереснее. Проходит немного времени, и деревянный ларец у вас в руках. Торопливо сбиваете замок. Внутри ларца лежат 10 золотых, необычный <a href="javascript: addItem('Деревянный талисман')">деревянный талисман</a>, который кажется искусно сплетенным из кружев<!--,  серебряное кольцо (- 105) -->, потрепанная <a href="javascript: wearItem('Малиновая куртка')">малиновая куртка</a><!-- (+ 58) -->, <a href="javascript: addItem('Непонятный механизм')">непонятный механизм в позолоченном корпусе</a><!-- (- 251) -->, <a href="javascript: addItem('Огниво')">огниво</a><!-- (+ 111) --> и <a href="javascript: addItem('Светильник')">светильник</a><!-- (+ 10) -->. Можете взять с собой все, что хотите, но учтите, что зажечь светильник без огнива вам не удастся.<!-- Можете также бросить кубик и почистить соответствующий квадрат УДАЧИ. --> Теперь <a href=btn:47>возвращайтесь</a>.
</html>

end

:188
param=1
proc removeStrength
<html>
Через несколько часов за очередным поворотом дороги вы слышите шум обвала, чьи-то предсмертные крики, а затем громкий цокот копыт и звон оружия. Что бы впереди не происходило, лучше туда не ходить, и вы сворачиваете в лес. Идти по бездорожью тяжело и неудобно<!-- (потеряйте 1 СИЛУ)-->, но мысль о том, что вы явно избежали какой-то опасности, радует и греет. Вскоре вы выходите на большую дорогу: слева виднеется деревня (вы очень удивлены, увидев многолюдную деревню в Зачарованном лесу, но дымки над хатами говорят, что жителей в ней немало), справа дорога скрывается за поворотом. Куда вы пойдете: <a href=btn:580>налево</a> или <a href=btn:235>направо</a>?
</html>

end

:189
param=1
proc addGold
<html>
Паук мертв, и вы можете посмотреть, что он хранил в своей паутине. А вещичек там не так уж и мало: 1 золотой, <a href="javascript: addItem('Старинная подвеска')">старинная подвеска</a>; -189
 и <a href="javascript: addItem('Золотой свисток')">золотой свисток</a><!-- (+ 156)-->. Можете взять с собой все, что пожелаете, спуститься с дерева и <a href=btn:19>продолжить путь</a>.
</html>

end

:190
<html>
Высокие каменные ворота наводят на мысль, что в замок будет легче пробраться, чем вернуться назад. Немного правее виднеется недокопанный ров, но сейчас все вокруг пусто, если не считать стражи: трех Орков не самого любезного вида. У двух — большие боевые топоры, у третьего — меч. Они вопросительно смотрят на вас, но что вы можете им сказать?<br>
 <a href=btn:245>Что вы бродячий торговец и идете в замок торговать?</a><br>
 <a href=btn:449>Что вы азартный игрок и идете развлекать волшебника?</a><br>
 <a href=btn:26>Что собираетесь наняться на службу в его армию?</a><br>
Если же у вас не хватает воображения, ну что ж, тогда <a href=btn:341>сражайтесь</a>.
</html>

end

:191
<html>
Вы поднимаетесь по лестнице наверх и <a href=btn:532>останавливаетесь перед закрытой дверью</a>.
</html>

end

:192
<script>
expr_action = 'fightStart(7,9,"ГОБЛИН"); setLoyalty(12, "end", "437"); afterBattle("626")';
</script>
<html>
Берег охраняется: как только вы достигаете его, из кустов выскакивает Гоблин и, размахивая саблей, бросается на вас. Воспользоваться заклятиями уже не успеваете, придется <a href="javascript: eval(expr_action)">драться</a>.<!--
	ГОБЛИН
	Ловкость 7 Сила 9 Лояльность 12
	Если его Лояльность опустится до 3, он бросит саблю и, громко топая, вновь скроется в кустах, а вы сможете отправляться дальше по тропинке, ведущей в лес (437). Если же вы убили его - 626.-->
</html>

end

:192.1
<html>
Гоблин бросает саблю и, громко топая, вновь скрывается в кустах, а вы можете отправляться <a href=btn:437>дальше</a> по тропинке, ведущей в лес.
</html>

end

:193
<script>
expr_action = 'if (itemExists("Свеча")) if (Inventory [0] ["Огниво"]) { readParagraph("203"); void(0) } else alert("Вы не можете зажечь свечу без огнива!")';
expr_action2 = 'if (itemExists("Светильник")) if (Inventory [0] ["Огниво"]) { readParagraph("" + (193 + 10)); void(0) } else alert("Вы не можете зажечь светильник без огнива!")';
</script>
<html>
Свеча на столе у Гоблинов догорела и погасла. Если у вас есть <a href="javascript: eval(expr_action)">свеча</a> или <a href="javascript: eval(expr_action2)">светильник</a>, зажгите их, если же нет, - придется идти в полной темноте. Хорошо хоть догадались запомнить, где находился выход. За дверью начинается коридор. Однако чтобы нащупать дорогу, придется держаться за одну из стен. <a href=btn:230>За правую</a> или <a href=btn:352>за левую</a>?
</html>

end

:194
<html>
Что вы можете ей предложить? <a href="javascript: useItem2('Перо павлина', 194, 206)">Перо павлина</a>, <a href="javascript: useItem2('Серебряный браслет', 194, 76)">серебряный браслет</a> или <a href="javascript: useItem2('Стрела с белым оперением', 194, 137)">стрелу с белым оперением</a>? Если у вас нет ничего подходящего, можете или <a href=btn:137>дать денег</a>, если еще не пытались этого сделать, или, на худой конец, <a href=btn:522>пригрозить ей мечом</a>.
</html>

end

:195
proc lose
<html>
Увы, вам не суждено отойти далеко от развилки. Волшебник не любит людей, которые что-то выглядывают и вынюхивают, бродя вокруг замка. Вас заметил Орел — часовой над одной из башен, и наперерез из замка вышел небольшой отряд из 15 — 20 Гоблинов. Бой в лесу был суматошным, но недолгим. Приказ — уничтожить шпиона — они выполнили…	
</html>

end

:196
<script>
addItem("Перстень с рубином")
</script>
<html>
Вы надеваете на палец перстень с рубином<!-- (+ 49)-->. Увы, снять с руки второй перстень вам уже не удается. Теперь можете осмотреть кабинет. Что прежде всего привлечет ваше внимание: <a href=btn:560>шкаф</a>, <a href=btn:288>стол</a> или <a href=btn:165>зеркало</a>?
</html>

end

:197
<html>
По дороге мимо вас вихрем пролетает Зеленый рыцарь: на нем зеленые латы и шлем, в руке - копье. Это происходит так быстро, что вы не успеете выйти ему навстречу, даже если очень захотите. Так что вылезайте из укрытия и <a href=btn:534>идите дальше</a>.
</html>

end

:198
param=2
proc removeStrength
<html>
Вы проходите через комнату и понимаете, что совершили ошибку. За стеной звенит колокольчик, и при выходе вас встречает охрана. Короткий неравный бой, кто-то бьет сзади по голове<!-- (потеряйте 2 СИЛЫ)-->, и <a href=btn:346>вы теряете сознание…</a>.
</html>

end

:199
<html>
На следующей развилке стрелка снова указывает вам путь прямо. Неподалеку виднеется домик, у которого дорога и кончается. Направитесь к домику и <a href=btn:107>войдете в него</a> или <a href=btn:304>свернете по тропинке направо</a>? Однако учтите, что есть еще один путь - <a href=btn:332>дорога, уводящая в глубь леса</a>.
</html>

end

:200
<html>
Вы показываете рыцарю зеркальце, и, как ни странно, этот маленький изящный предмет действительно оказывается пропуском. Зеленый страж отступает в сторону, и вы быстро устремляетесь вперед по коридору, пока он не успел спросить что-нибудь еще. В конце пути виднеется низенькая деревянная дверца, в замке которой торчит ключ. <a href=btn:241>Вы поворачиваете его</a>.
</html>

end

:201
<html>
Воспользовавшись заклятием Плавания, благополучно достигаете противоположного берега, но на этом <a href=btn:192>ваши приключения не заканчиваются</a>.
</html>

end

:202
<html>
Проводник сразу теряет к вам интерес: он явно не ожидал такого ответа. "Никакого другого жилья поблизости нет, - хмуро говорит он. - Только леса и болота. Правда, - голос его переходит в шепот, - есть одно интересное местечко в самом центре леса. Черный замок. Не слыхали о таком?" Вы понимаете, что либо он говорит меньше, чем знает, и тогда дальнейшие расспросы бессмысленны, либо искренне хочет помочь и сам наводит разговор на логово волшебника. Попросите его все же <a href=btn:186>проводить вас в Черный замок</a> или поблагодарите за обед и <a href=btn:291>уйдете</a>?
</html>

end

:203
<html>
Темнота рассеивается. Вы направляетесь к выходу из комнаты и попадаете в каменный коридор. Через несколько шагов в его правой стене виднеется черный провал еще одного туннеля. <a href=btn:440>Свернете</a> или пойдете <a href=btn:140>прямо</a>?
</html>

end

:204
param=2
proc addStrength
<html>
Вы располагаетесь на ночь под одним из деревьев, и ничто не прерывает ваш сон. Можете восстановить силы и <a href=btn:353>отправляйтесь в путь</a> с первыми лучами солнца. Времени терять нельзя: до цели еще не близко.
</html>

end

:205
param=1
proc removeAgility
param=3
proc removeStrength
proc changedress
<html>
Подойдя поближе, видите, что картина изображает не битву, а расправу. В центре высится на коне рыцарь в латах и шлеме темно-зеленого цвета. Рукой в железной перчатке он указывает своим воинам на горящую деревню. В другой руке у него меч. Гоблины на заднем плане выволакивают из хат крестьян, несколько Орков с факелами поджигают дома. Может быть, так завоевывались деревни вокруг леса? Или это эпизод из жизни армии мага до его прихода в эти места? Но ваши размышления прерваны: с картиной что-то происходит. На ваших глазах Зеленый рыцарь разворачивает лошадь - теперь его перчатка направлена на вас. Завороженный увиденным, вы окаменели и не в силах пошевелиться. Несколько Гоблинов, вооруженных луками, поднимают их и направляют на вас. Вы испытываете странное желание убежать от этой страшной картины, но она притягивает, приковывает к себе. Гоблины отпускают тетиву, стрелы летят прямо в вас, но что это? Вы чувствуете острую боль в левой руке и под правым коленом. Стрелы! Не теряя времени, вы отскакиваете от картины. Все немедленно принимает прежний вид. Но стрелы-то все еще торчат! Вы осторожно вынимаете их, радуясь, что они хотя бы не отравлены.<!-- Потеряйте 1 ЛОВКОСТЬ и 3 СИЛЫ.--> Да, лучше уж либо <a href=btn:138>выйти через дверь</a>, либо <a href=btn:523>подняться</a> или <a href=btn:452>спуститься</a> по лестницам, либо, если вы этого еще не делали, <a href=btn:70>подойти к окну</a>.
</html>

end

:206
proc changedress
<html>
Вы входите в комнату, и дверь бесшумно захлопывается. Непонятно, куда же вы попали, - в комнате нет ничего и никого. Осторожно и внимательно, ожидая какой-нибудь ловушки, пересекаете ее и подходите к единственной двери в правой стене.<!-- Она не открывается, несмотря на отсутствие замочной скважины. Заперта с другой стороны на засов? Если вам есть чем открыть ее, сделайте это, иначе - 90.--> Но, увы, она не открывается. Если у вас есть большой ключ или <a href="javascript: tryItem('Перстень с бриллиантом', 206, 40)">перстень с бриллиантом</a>, попробуйте открыть ее, сделайте это, <a href=btn:90>иначе…</a>
</html>

end

:207
<html>
Дверь ведет в коридор, который заканчивается у очередной невысокой двери. Она заперта, но вам без особого труда и шума удается ее выломать. За ней узкая винтовая лестница, ведущая вниз, в подземелье замка. Она освещена. Более того, опытный глаз сразу замечает, что свечи в канделябрах явно недавно меняли: значит, лестницей пользуются. Через несколько пролетов - дверь. Она заперта, и открыть ее не удается. Вам приходится <a href=btn:544>продолжать спуск</a>.
</html>

end

:208
<html>
Библиотекарь с любопытством смотрит на вас и говорит, что не понимает, о чем идет речь. После этого он обещает все же найти кое-что интересное и <a href=btn:649>скрывается за стеллажами</a>.
</html>

end

:209
<script>
expr_action = 'if (Gold != 0) { modifyGold(-1);  modifyStrength(2) }';
</script>
<html>
Можете <a href="javascript: eval(expr_action)">купить</a> несколько порций рыбы (одна порция стоит 1 золотой). Купив еду и восстановив силы, благодарите радушного хозяина и <a href=btn:332>уходите</a>.
</html>

end

:210
<html>
Вы идете по дороге, пока не смеркается. Не чувствуя особенной опасности (зато чувствуя сильную усталость), ночуете под сенью большого дерева справа от дороги и продолжаете путь с рассветом. К полудню вы выходите на перекресток. Дорога на север приведет обратно в Элиссу, а вы <a href=btn:462>сворачиваете на юг</a>.
</html>

end

:211
<html>
Вы оказываетесь на берегу широкой полноводной реки. Течение сильное и быстрое, вброд ее не перейти. Вдоль берега, на котором вы сейчас стоите, вправо убегает узкая тропинка. Можете или пойти по ней, или попробовать перебраться через реку. Хотите воспользоваться заклятием <a href="javascript: useItem2('Левитация', 9)">Левитации</a>? Заклятием <a href="javascript: useItem2('Плавание', 313)">Плавания</a>? Или <a href=btn:423>пойдете по тропинке</a>?
</html>

end

:212
<html>
Вы выходите к огромному озеру. Другого берега почти не видно, но вдалеке заметен небольшой островок. Лодки поблизости нет, и придется воспользоваться заклятием либо <a href="javascript: useItem2('Плавание', 5)">Плавания</a>, либо <a href="javascript: useItem2('Левитация', 625)">Левитации</a>. Иначе можете вернуться и попробовать <a href=btn:177>пройти через кустарник</a>.
</html>

end

:213
<html>
Вы остаетесь поболтать с торговцем, надеясь узнать что-нибудь полезное. Благо он тараторит без умолку: люди-то в лесу встречаются нечасто. Всего за час хозяин лавки успевает рассказать длинную и нудную историю о том, как некогда он ехал с товарами из Элиссы в Грейкейп через пустыню, и песчаная буря заставила его пытаться найти укрытие на берегах гибельных Мортлэндских топей к югу от мощного горного хребта Лонсам. Там он стал свидетелем кошмарной гибели своего товарища, когда болото поглотило тянущуюся через него дорогу вместе с находящимся на ней караваном. Теперь же в Грейкейп караваны уже не ходят с тех пор, как неведомая сила стала топить выходящие в море корабли, и городок почти опустел. Однако… Заметив, что вы зеваете, он спускается с небес на землю и, видимо, пытаясь продемонстрировать некоторый интерес и к вашим делам, спрашивает, что вы делаете в лесу. Что ответите: <a href=btn:18>ищете Черный замок</a>, <a href=btn:124>идете сражаться с волшебником</a>, <a href=btn:23>идете будить Принцессу</a> или <a href=btn:438>просто гуляете по лесу</a>?
</html>

end

:214
<html>
Не успеваете отойти от перекрестка, как внимание привлекает прекрасный вороной конь, привязанный к дереву рядом с дорогой. Поблизости никого не видно, лес тих, и слышно только щебетание птиц. Попробуете <a href=btn:401>сесть на коня</a>, чтобы ускорить свое продвижение вперед (дорога достаточно широка для этого), или решите, что лучше оставить красивое животное хозяину и <a href=btn:378>пойти дальше</a>?
</html>

end

:215
<script>
expr_action = 'fightStart(10,10,"ОБЕЗЬЯНА"); afterBattle("408")';
expr_action2 = "if (itemExists('Ловкость')) {removeItem('Ловкость'); AgilityFactor = 2; eval(expr_action) }";
expr_action3 = "if (itemExists('Слабость')) {removeItem('Слабость'); enemyPowerFactor = -2; eval(expr_action) }";
expr_action4 = "if (itemExists('Копия')) {createCopy(); eval(expr_action); }";
</script>
<html>
Обезьяна угрожающе рычит и надвигается на вас.<!-- Вы выбираете бой.--> Если хотите, можете воспользоваться заклятиями <a href="javascript: eval(expr_action2)">Ловкости</a>, <a href="javascript: eval(expr_action3)">Слабости</a>, <a href="javascript: eval(expr_action4)">Копии</a> или <a href="javascript: useItem2('Огонь', 651)">Огня</a> или <a href="javascript: useItem2('Иллюзия', 215.1)">Иллюзии</a>. Хотя не исключено, что вы предпочтете сразу <a href="javascript: eval(expr_action)">вступить в бой</a>.<!--
	ОБЕЗЬЯНА
	Ловкость 10 Сила 10
	Если вы победили ее, то 408.-->
</html>

end

:215.1
param=2
proc addStrength
<html>
Вы творите заклятие Иллюзии – и превращаетесь в такое же животное, только побольше. Обезьяна прыгает от радости, дарит вам <a href="javascript: addItem('Гребень')">изящный гребень из слоновой кости</a> и зовёт поиграть. После игр вы некоторое время отдыхаете в тени (восстанавливаются 2 СИЛЫ), но потом заклятие спадает, обезьяна в испуге заползает на дерево, а вам пора идти дальше: <a href=btn:305>по тропинке</a> или <a href=btn:210>вернувшись на дорогу</a>.
</html>

:216
<html>
Благополучно достигаете острова и <a href=btn:132>выходите на берег</a>.
</html>

end

:217
<html>
Что вы можете ему предложить? <a href="javascript: tryItem('Стрела с белым оперением',217,137)">Стрелу с белым оперением</a>, <a href="javascript: useItem2('Старинная подвеска',217,-189)">подвеску</a> или <a href="javascript: tryItem('Золотой свисток',217,156)">золотой свисток</a>? Если у вас нет ни того, ни другого, ни третьего, то, как это ни печально, придется <a href=btn:106>уходить</a>.
</html>

end

:218
<html>
Вы подходите к сторожке, но не успеваете заглянуть в окно, как на пороге появляется пьяный Гоблин. Он застывает, увидев вас, и хочет крикнуть, чтобы позвать остальных. <a href="javascript: CheckLuck('463','539')">ПРОВЕРЬТЕ СВОЮ УДАЧУ</a>.<!-- Если удачливы, то 463, если же нет - 539.-->
</html>

end

:219
<html>
На несколько секунд замерев, прислушиваетесь. Все тихо. Можете <a href=btn:467>вернуться</a> и осмотреть что-нибудь еще.
</html>

end

:220
<html>
Невидимая рука выхватывает у вас сосуд. "В этом сосуде таится смерть, - слышится голос, - и ты посмел предложить его нам!". <a href=btn:572>Вы застываете на месте от ужаса.</a>
</html>

end

:221
<html>
Стучитесь в дверь и, услышав приглашение войти, переступаете порог. Внутри чисто и опрятно, навстречу спешит сухонький аккуратный старичок с длинной белой бородой. Белый цвет - цвет мудрости и добра, но можно ли кому-либо доверять в этом коварном лесу? Вы оглядываетесь и понимаете, что старичок несомненно жил здесь задолго до появления волшебника и был охотником. Тут и там развешены шкуры, разнообразное оружие и охотничьи рога. Как следует осмотреться не удается, потому что хозяин дома вступает в разговор, спрашивая, кто вы и с чем пришли. Что вы скажете:
<a href=btn:535>Идете в Черный замок служить</a>,
<a href=btn:148>Идете сражаться с волшебником</a>,
<a href=btn:464>Идете освобождать Принцессу</a>,
или, что зашли случайно, и <a href=btn:55>поторопитесь уйти</a>?
</html>

end

:222
<html>
Вот и другой берег. Перебираясь через реку, вы успели заметить справа, ниже по течению, мост, который наверняка должен охраняться. Понимая, что идти к нему не стоит, выбираете тропинку, которая должна вывести на дорогу, идущую от моста. Направление оказывается правильным, но путь занимает гораздо больше времени, чем можно было предположить. Когда вы выходите на опушку, уже смеркается. Перед вами высится Черный замок, и ужас исходит от его мрачных башен. Да, видимо, главные трудности еще впереди. Как проникнуть в замок? Если у вас есть <a href="javascript: useItem2('Волшебный пояс для крота', 167)">волшебный пояс</a>, вы можете воспользоваться им, иначе либо <a href=btn:190>идите к воротам</a> в той стене, которая перед вами, или, если не хотите иметь дело с охраной, попробуйте, не выходя из леса, направиться <a href=btn:236>влево</a>, в обход замка.
</html>

end

:223
<html>
Вы обходите деревню, не выпуская ее из виду. Идти приходится осторожно: ведь в лесу могут встретиться охотники или дровосеки, а такая встреча была бы, мягко говоря, нежелательной. Сделав четверть круга, обнаруживаете выходящую из деревни дорогу. Можете <a href=btn:2>отправиться по ней</a>, все-таки решить <a href=btn:580>войти в деревню</a> или попытаться быстро пересечь дорогу и <a href=btn:29>продолжать идти вокруг</a>.
</html>

end

:224
<html>
Вы откидываете крышку люка и обнаруживаете небольшой подъемник. Очевидно, с его помощью с нижнего этажа в столовую доставляют подносы с едой. Подъемник достаточно велик, и можно воспользоваться им, чтобы спуститься вниз. Если хотите, можете <a href=btn:491>попробовать это сделать</a>. Если же нет, то вы можете уйти через одну из четырех дверей: <a href=btn:427>в той же стене</a> или рядом с люком: через <a href=btn:398>правую</a>, <a href=btn:206>левую</a> или <a href=btn:350>среднюю</a>. Хотя пока что никто не мешает <a href=btn:125>продолжать осмотр</a> столовой.
</html>

end

:225
<html>
На этот раз в клетке оказывается олень. Вы недоумеваете, кому пришло в голову заточить благородное животное в этом мрачном подземелье. Может быть, у вас есть <a href="javascript: useItem2('Шкура оленя', 225, -81)">шкура оленя</a>? Если нет, идите <a href=btn:465>дальше</a>.
</html>

end

:226
<html>
Вы пробуете эль. Вкус его неплох, но он, пожалуй, слишком крепок для вас. Неожиданно вы чувствуете, что шатаетесь, и <a href=btn:409>пол уходит из-под ног…</a>.
</html>

end

:227
<html>
Люк заперт, и открыть его не удается. Если у вас есть какие-то идеи по поводу того, что могло бы послужить ключом, попробуйте отпереть замок. Может быть, вам поможет <a href="javascript: useItem2('Медный ключик',227,-164)">медный ключик</a>, <a href="javascript: useItem2('Блестящий кусок металла',227,-77)">кусочек металла</a> или <a href="javascript: tryItem('Фигурный ключ',227,-156)">фигурный ключ</a>? Если у вас нет ничего подобного, придется <a href=btn:416>покинуть домик</a>: в любую минуту сюда могут зайти воины чародея.
</html>

end

:228
<html>
Заклятие действует. Водяной чувствует, что слабеет и, понимая, что ему не победить вас, хватает какой-то ларец и скрывается под водой. В таверне больше нет ничего интересного, но, выйдя из нее и зайдя за дом, вы обнаруживаете, что он стоит на берегу большого озера, а рядом привязана лодка. Так что теперь можете либо <a href=btn:332>уйти по дороге</a>, ведущей от таверны в лес, либо сесть в лодку и попытаться <a href=btn:561>переплыть озеро</a>.
</html>

end

:229
proc changedress
<html>
За дверью - маленький встроенный шкаф, на полках которого лежат меч со щитом и стоит бутылочка с прозрачной жидкостью. Возьмете <a href=btn:568>меч</a>, <a href=btn:498>щит</a> или <a href=btn:389>выпьете жидкость</a> из бутылочки ? Разумеется, можете ничего не брать, а просто <a href=btn:300>закрыть дверь</a> и снова запереть ее.
</html>

end

:230
<html>
Вы продвигаетесь медленно и осторожно. Тьма кромешная: о существовании противоположной стены можно только догадываться. Через некоторое время рука нащупывает угол. Пойдете <a href=btn:549>направо</a> или попробуете пройти в темноте <a href=btn:466>прямо</a>, ни за что не держась?
</html>

end

:231
param=1
proc removeStrength
<html>
Тропинка, идущая прямо, несколько раз заводит в такой бурелом, через который вы едва продираетесь, а несколько раз даже спотыкаетесь и падаете<!-- (потеряйте 1 СИЛУ)-->. По пути вы видели несколько силков: <a href=btn:406>это наводит на размышления</a>.
</html>

end

:232
if secret_door=1 then str="<a href=btn:260>небольшую дверцу</a>. Если знаете, как открыть ее, то сделайте это. Иначе придется" else str="небольшую дверцу. Но вы не знаете, как открыть ее. Придется"
<html>
Лесная дорожка вскоре подходит совсем вплотную к стене Черного замка и упирается в нее. Приблизившись, замечаете в стене #str$ <a href=btn:319>идти к воротам</a>: впереди излучина реки, проникающей под стену замка, но берег в этом месте особенно неприступен.
</html>

end

:233
<html>
"Наивный смельчак, - смеются Духи, - хотел разозлить нас тем, что мы ненавидим больше всего - светом. Ты пожалеешь об этом". <a href=btn:572>Вы застываете на месте от ужаса.</a>
</html>

end

:234
<html>
Оставив умирающего, продолжаете путь. Не успели войти в лес, как сразу же начались приключения - что же будет дальше? Лес безлюден, но птиц много. Их веселое пение говорит о том, что страшные слуги волшебника еще далеко. Но вот снова развилка: дорога, чуть-чуть сворачивая направо, углубляется в лес, а влево от нее отходит тропинка. Куда вы пойдете?<br>
<a href=btn:47>По тропинке?</a><br>
<a href=btn:82>По дороге?</a>
</html>

end

:235
param=1
proc removeStrength
<html>
Вы быстро удаляетесь от деревни, считая, что выбрали правильное направление, и должны идти как раз в сторону Черного замка. Кажется, это похоже на правду: лес понемногу начинает редеть, и впереди становится виден свет. Но это не яркий солнечный свет: солнце не может пробиться сквозь плотные облака, висящие над лесом. Птиц давно уже не слышно, что все больше и больше давит, - тишина таит в себе угрозу. Вы начинаете нервничать<!-- (потеряйте 1 СИЛУ)-->. В конце концов лес позади, но <a href=btn:102>за поворотом дороги…</a>
</html>

end

:236
<html>
Замок оказывается гораздо больше, чем казалось поначалу. Стараясь не слишком приближаться к нему, доходите до южной стены, без единой бойницы и без единого просвета. Кажется, что волшебник совершенно не боится штурма: только башенки по краям внимательно смотрят в сторону леса.<br>
<a href=btn:533>Пойдете дальше?</a><br>
Или попробуете <a href="javascript: useItem2('Левитация', 87)">перелететь через стену, используя заклятие Левитации?</a><br>.
</html>

end	

:237
<html>
Тропинка приводит в светлую березовую рощу и начинает все больше и больше забирать вправо. Вдруг вы видите, что в траве рядом с тропинкой что-то блестит. <a href=btn:108>Подойдете</a> посмотреть, что это такое или <a href=btn:407>пойдете дальше</a>?
</html>

end

:238
<html>
Вы достигаете противоположного берега и, как ни странно, попадаете прямо на тропинку. Удивляться причудам Зачарованного леса некогда: надо постараться засветло достичь цитадели мага. Если вы еще ориентируетесь в лесу, то сообразите, направо или налево надо идти, так как впереди развилка. И в ту, и в другую сторону идут две одинаковые тропинки, но выбор делать придется. Пойдете <a href=btn:390>направо</a> или <a href=btn:531>налево</a>?
</html>

end

:239
param=5
proc addStrength
<html>
Справившись с обоими противниками, можете осмотреть дом, в котором оказались. В нем нет ничего интересного, кроме картины, висящей на стене напротив входа. На ней рыцарь в зеленых латах и зеленом шлеме во весь опор скачет по лесной дороге. Картина любопытна, но ни о чем не напоминает: при дворе таких рыцарей не встречалось. Может быть, это воинство волшебника? Пока же ясно только одно: если этот рыцарь враг, то такая встреча не сулит ничего хорошего. Бутылка, которую нес Гоблин, разбилась, но в погребе удается найти еще одну и немного еды. Можете использовать и то, и другое<!-- или же взять с собой: - вино восстановит вам 3 СИЛЫ, еда - 2--> - вино и еда восстановят вам силы. В кармане у Орка лежит <a href="javascript: addItem('Серебряный свисток')">серебряный свисток</a><!-- (+ 313)-->, который можете взять себе. Теперь пора уходить. От Заставы в глубь леса ведет удобная широкая дорога, и вы быстро идете по ней, стараясь наверстать упущенное время. Вскоре направо от нее отходит узенькая тропка. Хотите <a href=btn:531>свернуть</a> или пойдете <a href=btn:64>дальше</a>?
</html>

end

:240
<html>
Вот и первый перекресток. Пойдете <a href=btn:462>прямо</a> или <a href=btn:145>налево</a>?
</html>

end

:241
<html>
Вы открываете дверь. Перед вами небольшая зала, в которой жарко и душно от множества горящих свечей, стоящих вдоль стен в тяжелых бронзовых канделябрах на двенадцати золотых столиках. Кроме "вашей", из нее ведут еще три двери. На небольшом возвышении в центре - хрустальная кровать, на которой спит прекрасная девушка. Ее длинные распущенные волосы отсвечивают золотом. Вы сразу понимаете, что это Принцесса, и сами удивляетесь тому, что узнали ее, хотя лишь раз мельком видели портрет, когда Король напутствовал вас в дорогу. В углу комнаты - большое зеркало, можете приветливо <a href=btn:485>кивнуть своему отражению</a>.
</html>

end

:242
<html>
Вам нечем это доказать, и разбойники не верят ни единому слову. "Какие только байки не рассказывают те, кто попадает к нам в руки!" - смеются они. Так что вам лучше не терять времени и <a href=btn:123>начинать неизбежный бой</a>.
</html>

end

:243
<script>
expr_action = 'fightStart(10,8,"ПРИЗРАК"); afterBattle("243.1")';
</script>
<html>
Вы входите в комнату. Но стоит только переступить порог, как одежда на вешалке начинает шевелиться, и через несколько секунд перед вами появляется кошмарный Призрак. Он похож на живого мертвеца: остекленевшие глаза, бессмысленное лицо, рот, из которого вывалились все зубы и свисает синий распухший язык. Призрак безоружен, но его правая рука рассекает воздух, как меч. Придется <a href="javascript: eval(expr_action)">драться</a> с ним. Заклятия не помогут - исчадие Тьмы без труда с ними справится.
</html>

end

:243.1
proc changedress
<html>
Призрак исчез, а вы можете либо уйти от греха подальше (<a href=btn:39>вернувшись в большую залу</a> и выбрав что-нибудь более приятное), либо осмотреть сундуки у противоположной стены. В этом случае решите, с какого начнете: с <a href=btn:474>большого</a>, <a href=btn:540>среднего</a> или <a href=btn:380>маленького</a>?
</html>

end

:244
<html>
Вспомнив о серебряном сосуде, вы достаете его из заплечного мешка и по лицам рыцарей видите, что это то, что надо. Даже Капитан привстает из своего кресла, но не успевает ничего сказать - на его лице отражается ужас. Вы быстро срываете крышку, и зеленоватый газ наполняет помещение. Однако вы и сами напуганы не меньше стражников, так как не знаете, что именно выпустили на свободу. Впрочем, этого вы не узнаете никогда. Придется удовлетвориться тем, что газ задушил всех рыцарей, не причинив вам никакого вреда. Но удивляться времени нет, и вы быстро взбегаете по лестнице на небольшой балкончик. С него ведут две двери. Войдете <a href=btn:594>в правую</a> или <a href=btn:599>в левую</a>?
</html>

end

:245
<html>
Если у вас есть шкура лисы, то <a href="javascript: tryItem('Шкура лисы', 245, 17)">покажите</a> ее как образец товара и проходите, если же нет, то что бы вы не доставали из заплечного мешка, стражу это не заинтересует, и вам придется <a href=btn:341>прокладывать путь в замок своим мечом</a>.
</html>

end

:246
proc changedress
<html>
Слава Богу, есть чем открыть дверь, и вы быстро <a href=btn:350>делаете это</a>, спасаясь от неминуемой смерти.
</html>

end

:247
<script>
expr_action = 'fightStart(10,12,"ДУХ МЕРТВЫХ"); Flee("83"); afterBattle("381")';
</script>
<html>
Что ж, <a href="javascript: eval(expr_action)">начинайте бой</a>. Кстати, если придется совсем туго, можете попробовать убежать.
</html>

end

:248
proc lose
<html>
Драться с охраной в замке было не самым разумным решением. Лязг и грохот далеко разносятся по гулким коридорам, и Оркам приходит подмога. Отряд Гоблинов врывается в комнату, и вы не в силах противостоять такому числу врагов. Боевой топор глубоко входит в ваше тело, а труп еще долго рвут на куски озверевшие воины чародея…
</html>

end

:249
<html>
Но что вы можете ему сказать?<br>
<a href=btn:562>Что вас пригласили в замок и вы просто ошиблись дверью?</a><br>
<a href=btn:315>Что вам поручили что-то передать ему?</a>
</html>

end

:250
<html>
Вы решаете довериться дороге и пойти прямо. Она не обманывает ваших ожиданий и приводит к крепкому бревенчатому дому, <a href=btn:33>заканчиваясь у его дверей</a>.
</html>

end

:251
<html>
После нескольких поворотов коридор заканчивается тупиком. Но теперь перед вами две двери: <a href=btn:162>направо</a> и <a href=btn:76>налево</a>.
</html>

end

:252
<html>
Как только закрылась дверь, из угла комнаты на вас бросаются Крысы. Вы с ужасом замечаете, что они не обыкновенные, а каменные. Если хотите, можете <a href="javascript: tryItem('Пропуск', 252, 20)">показать им пропуск</a>, надеясь, что это поможет, или же можете воспользоваться заклятиями <a href="javascript: useItem2('Слабость', 564)">Слабости</a> или <a href="javascript: useItem2('Огонь', 541)">Огня</a>. Хотите, вынимайте меч и <a href=btn:494>сражайтесь с ними</a>. Если же у вас есть <a href="javascript: tryItem('Меч Зеленого рыцаря', 252, -177)">меч Зеленого рыцаря</a>, то разумнее было бы использовать именно его.
</html>

end

:253
<script>
expr_action = 'dice1 = Math.floor(Math.random()*6) + 1; dice2 = Math.floor(Math.random()*6) + 1; if (dice1 + dice2 >= Agility) { readParagraph("58"); void(0) } else { readParagraph("182"); void(0) }';
</script>
<html>
Вы берете стеклянный сосуд.<!-- Киньте кубик два раза. Если сумма выпавших на нем чисел больше или равна вашей ЛОВКОСТИ, то 58. Если меньше - 182. --> <a href="javascript: CheckLuck('58', '182')">ПРОВЕРЬТЕ СВОЮ УДАЧУ</a>.
</html>

end

:254
<html>
Вы используете заклятие и <a href=btn:366>переплываете через реку</a>.
</html>

end

:255
<html>
Заговорив с ними, выясняете, что, как ни странно, женщины вполне довольны своей жизнью, и их ничего не интересует, кроме денег. На шум голосов из соседней комнаты выходит хозяйка гарема. Можете попробовать найти с ней общий язык, подарив ей какой-нибудь <a href=btn:551>подарок</a>, или дать деньги женам мага. Но сколько: <a href=btn:79>1 золотой</a>, <a href=btn:382>4 золотых</a> или <a href=btn:495>6 золотых</a>? Хотите, попробуйте извиниться за вторжение и <a href=btn:198>пройти через комнату к двери</a>.
</html>

end

:256
<html>
Вы накладываете заклятие Слабости и, так и не узнав, подействовало оно или нет, <a href=btn:316>начинаете бой</a>.
</html>

end

:257
<script>
desc = 'ЛЕВ'; expr_action = 'fightStart(9,14,desc); afterBattle("265")';
</script>
<html>
Вы стучите молотком по двери. Она неохотно со скрипом открывается, и перед вами предстает привратник - огромный лев, закованный в доспехи. Если вы знаете условную фразу для входа в замок, то <a href=btn:565>назовите ее</a>, если же нет, придется <a href="javascript: eval(expr_action)">пробиваться с помощью своего меча</a>. Убив стража, можете перешагнуть через него и войти.
</html>

end

:258
<script>
addItem("Перстень с изумрудом")
</script>
<html>
Перстень с изумрудом нет смысла класть в заплечный мешок, и вы <a href="javascript: addItem('Перстень с изумрудом')">надеваете его на палец</a><!-- (+ 169)-->. К сожалению, снять с руки мага второй перстень вам уже не удается. Что вы осмотрите теперь: <a href=btn:560>шкаф</a>, <a href=btn:165>зеркало</a> или <a href=btn:288>стол</a>?
</html>

end

:259
<html>
Стража недоверчиво смотрит, но, судя по всему, вы угадали, и <a href=btn:48>вас впускают внутрь</a>.
</html>

end

:260
<html>
Это как раз то, что надо. Вы прекрасно помните слова старичка: нажимаете на третий камень слева от дверной ручки, и слышится глухой щелчок. Путь открыт, и вы быстро проскальзываете во двор замка. В центре двора высится большое здание, но уже темно, и разглядеть его очень трудно. Слева из-под угловой башенки вытекает река и скрывается под зданием. Справа - невысокое маленькое строение, которого отсюда почти не видно. Пойдете <a href=btn:116>к нему</a>, <a href=btn:4>к реке</a> или <a href=btn:416>к зданию в центре двора</a>?
</html>

end

:261
param=2
proc removeStrength
<html>
Дракон решает, что вы предлагаете ему причесаться (в самом деле, что ему делать с гребнем?), и возмущенно выпускает небольшую струю пламени в вашу сторону.<!-- Потеряйте 2 СИЛЫ и сражайтесь--> <a href=btn:316>Сражайтесь, теперь уже другого выхода нет</a>.
</html>

end

:262
<html>
«Что ж, товар неплох», — говорит один из стражников, <a href=btn:100>пропуская вас</a>.	
</html>

end

:263
<html>
Вы вспоминаете про серебряный сосуд, в который так и не заглянули. Быстро достаете его из заплечного мешка и готовитесь открыть. Однако Зеленый рыцарь умоляет этого не делать, разрешая пройти. <a href=btn:590>Откроете крышку</a>, несмотря на его уговоры, или достаточно того, что вы как следует напугали стража и теперь можете <a href=btn:392>идти дальше</a>?
</html>

end

:264
<script>
expr_action = 'fightStart(8,6,"ГИЕНА"); afterBattle("117")';
</script>
<html>
Ну что ж, <a href="javascript: eval(expr_action)">деритесь</a>.<!--
	ГИЕНА
	Ловкость 8 Сила 6
	Если вы убили ее, можете двигаться дальше - 117.-->
</html>

end

:265
inCastle=1
canChangeDress=1
<html>
Осторожно входите в гулкий Главный коридор Черного замка. В этот момент какой-то странный звук привлекает внимание. Нервы напряжены, и вы резко оборачиваетесь: дверь за спиной захлопывается. Через несколько секунд это уже не дверь, а часть стены, и даже нельзя сказать, где она была. Пытаетесь открыть ее - слишком поздно. Может быть, когда-нибудь вы узнаете, почему все двери в замке будут закрываться за вашей спиной (так, что их при этом будет не открыть ни силой, ни ключами), но пока есть только один путь - вперед. Через каждые несколько шагов на стенах висят канделябры в виде извивающихся змей: света достаточно. Но потолка не видно, он уходит куда-то вверх, в загадочную темноту, где царит эхо, сопровождающее каждый ваш шаг. Из коридора ведут две двери и две лестницы. Лестница справа уходит вниз, слева - наверх. В конце Главного коридора две двери - тоже направо и налево, но они совершенно одинаковые, и ничто не подсказывает вам, какую из них выбрать. Решайте, куда пойдете. По лестнице <a href=btn:191>вверх</a> или <a href=btn:30>вниз</a>, в дверь <a href=btn:53>направо</a> или <a href=btn:467>налево</a>? А может быть, у вас есть <a href="javascript: putOnItem('Латы', 265, 60)">латы Зеленого рыцаря</a>?
</html>

end

:266
<html>
Вы подходите к зеркалу и поворачиваете его, открывая проход на лестницу. Когда вы выходите на нее, дверь бесшумно закрывается: назад пути уже нет. Выход только один: сразиться с волшебником и победить его. Лестница идет вверх на много этажей. В конце - дверь. Вы толкаете ее, и она отходит в сторону вместе с зеркалом с другой стороны. Вы же <a href=btn:553>переступаете порог</a>.
</html>

end

:267
<script>
if (newGame) addItem("Зажженное перо павлина");
</script>
<html>
Вы достаете перо павлина. Стоит павлину посмотреть в вашу сторону, как перо начинает ярко светиться.<!-- Теперь вы овладели секретом и сможете зажигать перо, когда захотите (+ 16).--> Понимая, что впоследствии это может пригодиться, вы аккуратно убираете перо в заплечный мешок. Мысленно поблагодарив павлина, <a href=btn:147>переходите к следующей решетке</a>.
</html>

end

:268
param=2
proc addStrength
<html>
Срываете огурец и пробуете. Вкус у него самый обычный, и вы без опаски съедаете овощ целиком.<!-- Можете восстановить 2 СИЛЫ--> А теперь поскорее <a href=btn:80>уходите</a>, пока не появился разъяренный садовник.
</html>

end

:269
<html>
Вы идете в полной темноте. Где-то наверху шумит река, но ход идет дальше и заканчивается винтовой лестницей, в конце которой дверь. <a href=btn:265>Вы открываете ее и…</a>
</html>

end

:270
<html>
Вы предлагаете нищенке серебряный браслет, который она с радостью надевает на свою костлявую руку. Перед тем как растаять в воздухе, она показывает на дверь, ведущую из комнаты направо. Послушаетесь совета и <a href=btn:542>войдете в нее</a> или же выберете <a href=btn:252>дверь в противоположной от входа стене</a>?
</html>

end

:271
<html>
«В кости», — отвечаете вы, но Орки даже не знают такой игры. Вы понимаете, что ответ неудачен, и решаете <a href=btn:341>пробиться в замок силой</a>.	
</html>

end

:272
<html>
Машинально показываете крысам пропуск, не надеясь, что это поможет. Но, как ни странно, пропуск действует на животных успокаивающе, и они, повизгивая, уползают в угол. Можете еще раз похвалить себя за отсутствие жадности и обилие предусмотрительности и <a href=btn:480>выйти</a> из комнаты через дверь справа.
</html>

end

:273
<html>
Вы накладываете заклятие Левитации и вылетаете в окно. Снаружи замок очень красив. Окон почти не видно, но над "своим" окном вы замечаете еще два - одно над другим. <a href=btn:111>Вернетесь</a> обратно в то окно, из которого вылетели, попробуете влететь в окно <a href=btn:78>повыше</a> или <a href=btn:566>пониже</a>?
</html>

end

:274
<script>
if (Gold < 8) { readParagraph('137'); alert('У Вас не хватает денег!'); } else modifyGold(-8);
</script>
<html>
Старуха подбирает монеты, кланяется, после чего делает знак следовать за ней. Она открывает правую дверь и тает в воздухе. Но когда вы делаете шаг в сторону от двери, она снова возникает и снова настойчиво указывает на дверь справа. Повинуетесь ее настояниям и <a href=btn:542>войдете</a> или попробуете <a href=btn:522>отогнать старуху мечом</a>?
</html>

end

:275
if wizardKilled=0 then str="btn:279" else str="javascript: alert('Этот путь закрыт.')"
<html>
Вы приближаетесь к ложу и склоняетесь над Принцессой. Если у вас есть волшебный перстень (<a href="javascript: useItem2('Перстень с изумрудом',275,169)">с изумрудом</a> или <a href="javascript: useItem2('Перстень с рубином',275,49)">с рубином</a>) или <a href="javascript: tryItem('Золотой апельсин',275,200)">золотой апельсин</a>, то вы знаете, что надо делать. Если же нет, то разбудить Принцессу не удастся, и вы можете либо подойти <a href="#str$">к зеркалу</a>, либо <a href=btn:385>к столикам</a>, на которых горят свечи.
</html>

end

:276
proc lose
<html>
Старик открывает потайную дверцу в стене. За ней комната, в которой в изобилии представлены разнообразные орудия пыток. И огромный Орк, который, собственно, и принимается за дело. Как вы ни пытаетесь вырваться из его рук, это не удается. Не спасет и волшебство - старик поможет Орку развеять любое заклятие, которое вы будете в силах наложить. Конечно, вы не поддадитесь пыткам и не выдадите себя. Но ваше путешествие закончено, до казни на рассвете остается всего несколько часов…
</html>

end

:277
<script>
expr_action = 'if (itemExists("Свеча")) if (Inventory [0] ["Огниво"]) { readParagraph("287"); void(0) } else alert("Вы не можете зажечь свечу без огнива!")';
expr_action2 = 'if (itemExists("Светильник")) if (Inventory [0] ["Огниво"]) { readParagraph("" + (277 + 10)); void(0) } else alert("Вы не можете зажечь светильник без огнива!")';
</script>
<html>
Вы входите в комнату, и дверь закрывается. В ту же секунду комната погружается во тьму. Но это не просто темнота - она живет, дышит, чьи-то руки трогают вас, чье-то дыхание едва уловимым ветерком касается лица, воздух вокруг колеблется. Вы осторожно проводите рукой по стене, пытаясь нащупать выход. Через несколько мгновений слышится Голос. Вам кажется, что он идет отовсюду: и справа, и слева, и даже из-под ног. "Никто не может безнаказанно нарушить покой Духов тьмы!" В углу комнаты появляется слабый свет, но его достаточно, чтобы разглядеть человеческий скелет, лежащий вдоль стены. Невидимая рука, держащая свечу, движется: вот еще один скелет, он уже сидит, прислонившись к той же стене, вот еще один, еще. А это уже не скелет, человек погиб совсем недавно, и вы с ужасом узнаете в нем одного из пажей, которых видели в королевских покоях. Видимо, вы путешествуете слишком долго, и паж был следующим, кто вызвался освободить Принцессу. По лесу он наверняка прошел быстрее - и вот такая смерть… Может быть, поможет какая-нибудь вещица из вашего заплечного мешка? Что вы достанете? <a href="javascript: tryItem('Мешочек с тьмой', 277, 277)"> Мешочек, внутри которого непроглядная тьма?</a> <a href="javascript: tryItem('Зажженное перо павлина', 277, 16)">Перо павлина</a>, если<!-- вы толком умеете с ним обращаться--> оно светится? <a href="javascript: tryItem('Серебряный сосуд', 277, -57)">Серебряный сосуд</a>? <a href="javascript: useItem2('Ожерелье из топазов', 277, 152)">Ожерелье из топазов</a>? Зажжете <a href="javascript: eval(expr_action)">свечу</a> или <a href="javascript: eval(expr_action2)">светильник</a>? Или же <a href=btn:572>у вас нет ни одного из этих предметов</a>?.
</html>

end

:278
param=4
proc removeStrength
<html>
Вероятно, вопрос был не самым удачным, потому что один из Орков, невозмутимо глядя вам прямо в глаза, дергает какой-то рычаг под столом, и вы проваливаетесь вниз. Последнее, что почувствовали: тупую боль в голове от сильного удара<!-- (потеряйте 4 СИЛЫ)--> - <a href=btn:409>и сознание покидает вас…</a>.
</html>

end

:279
instr str=зеркалу
instr str2=
if mirror=1 then str="<a href=btn:266>зеркалу</a>" else str2="Но как следует <a href=btn:502>насладиться прекрасным орнаментом вам не дают</a>."
<html>
Вы подходите к #str$, но не замечаете ничего необычного. Его обрамляет золотая рама с изображениями сцен из жизни гарпий. #str2$
</html>

end

:280
<html>
Вы решаете использовать заклятие Иллюзии. Гоблинам начинает казаться, что в клетке томитесь не вы, а сам черный маг. Они в ужасе отпирают ее и выражают готовность подчиняться любым вашим приказам. Что бы такого приказать? Ничего особенно оригинального на ум не приходит, ну да ладно: пусть сами зайдут в клетку. А вы их там и запрете. После этого вы подходите к столу и собираете все свои вещи в заплечный мешок. Теперь можете либо <a href=btn:318>осмотреть ларь</a> в углу, либо <a href=btn:193>сразу уйти</a>.
</html>

end

:281
<html>
Перед вами саркофаг монаха. Все его богатство - <a href="javascript: addItem('Четки')">четки</a><!-- (- 187)-->, и они лежат прямо на надгробии. Вы можете взять их с собой. Пронизывающее воздух напряжение не позволяет задерживаться: все в вас стремится прочь от этого места. Остается только выбрать, через какую дверь уходить: <a href=btn:547>правую</a> или <a href=btn:501>левую</a>.
</html>

end

:282
<html>
Средняя дверь открывается в короткий коридор, который раздваивается. Вы пойдете в <a href=btn:368>правый</a> проход или в <a href=btn:536>левый</a>?
</html>

end

:283
<html>
	Что вы покажете рыцарю как пропуск?<br>
	<a href="javascript: tryItem('Зеркальце',283,-83)">Зеркальце?<br>		
	<a href="javascript: tryItem('Бронзовый свисток',283,-214)">Бронзовый свисток?</a><br>	
	<a href="javascript: tryItem('Золотое кольцо',283,214)">Золотое кольцо?</a><br>
	Если у вас нет ни одного из этих предметов, то путь вперед придется <a href=btn:567>прокладывать мечом</a>.
</html>

end

:284
<html>
Вы говорите, что в Черном замке заточена Принцесса и вы решили ее освободить. <a href=btn:555>Но не слишком ли опрометчив ваш ответ?</a>
</html>

end

:285
<html>
Открываете дверь и делаете несколько шагов вперед. В этот момент вы замечаете, что попали далеко не в самое обычное помещение. Это Подземелье мертвых. Бог весть откуда взялось оно в этом замке, лишь недавно возведенном злыми чарами Барлада Дэрта. Но самое страшное то, что вы стоите прямо на надгробии. На нем едва заметными от времени буквами написано: "Кто потревожит мой сон, навсегда упокоится рядом со мной". Холодок пробегает по спине. А вдруг и правда… Но что это? Надгробие откидывается, отбрасывая вас назад, и из него поднимается высокий скелет в рыцарских латах. Вы цепенеете от ужаса, а он <a href=btn:321>движется прямо на вас</a>, улыбаясь пустым темным оскалом рта.
</html>

end

:286
<html>
Лишь только ступили на левую дорогу, как в ту же секунду кажется, будто закружилась голова, а лес начал бешено вращаться вокруг. Потом все успокаивается так же внезапно, как и началось. Вы снова стоите на дороге. Никакой развилки позади нет, да и дорога совсем другая. Но делать нечего, надо идти <a href=btn:129>вперед</a>.
</html>

end

:287
<html>
Вы пытаетесь зажечь свет, но чья-то невидимая рука накидывает на него черный платок, и <a href=btn:233>он гаснет</a>.
</html>

end

:288
<html>
На столе действительно разложены карты Элгариола. Стрелки, прочерченные тонким пером волшебника, не оставляют никаких сомнений: вторжение должно было начаться со дня на день. Тогда по Главному Южному тракту на Элиссу хлынули бы бесчисленные полчища Орков и Гоблинов. Очевидно, волшебник вполне справедливо полагал, что угроза штурма столицы и смерти отца сломит Принцессу. Можете гордиться: планы злого чародея сорваны, к тому же в самый последний момент. Теперь можно или <a href=btn:165>подойти к зеркалу</a> или <a href=btn:560>осмотреть шкаф</a>. <a href=btn:493>Или вы уже сделали и то, и другое?</a>
</html>

end

:289
param=6
proc addStrength
<html>
Собрав хворост, можете разжечь небольшой костерок, подкрепиться вкуснейшей зайчатиной и восстановить силы. Однако с собой взять ее не в чем - все придется съесть на месте. Найти дорогу обратно уже невозможно, и вам приходится <a href=btn:406>идти по тропинке</a>, которая углубляется в лес от того места, где стояла ловушка.
</html>

end

:290
<script>
expr_action = 'fightStart(7,6,"ГОБЛИН"); setLoyalty(8, "end", "620"); afterBattle("620")';
expr_action2 = "if (itemExists('Копия')) {createCopy(); eval(expr_action) }";
</script>
<html>
Вы накладываете заклятие Огня, и огненный шар попадает в грудь первого Гоблина. Один из противников мертв, но остается еще второй. Если хотите, воспользуйтесь заклятием <a href="javascript: eval(expr_action2)">Копии</a>, и <a href="javascript: eval(expr_action)">выясните, кто же победит</a>.<!--
	ГОБЛИН
	Ловкость 7 Сила 6 Лояльность 8
	Как только вам удастся уменьшить его Лояльность до 3, Гоблин обратится в бегство. Если вы убили обоих, то 620, если же только одного, можете забрать у него бронзовый свисток (- 214), который ему больше не понадобится, и перейти реку - 118.-->
</html>

end

:291
<html>
Перед вами две тропинки. Одна уходит в лес <a href=btn:294>направо</a> от входа в дом, другая огибает его <a href=btn:334>с левой стороны</a>, проходя через сад. По какой из них вы пойдете?
</html>

end

:292
<html>
Примерно через четверть часа пути на тропинку выходит Гиена и преграждает вам путь. Попробуйте <a href=btn:503>выяснить, что ей нужно</a>, или хотите <a href=btn:264>сразиться с ней</a>?
</html>

end

:293
<html>
<!--Перо павлина вспыхивает в ваших руках-->Вы достаете светящееся перо павлина, но тут же чья-то рука накидывает на него черный платок, и <a href=btn:233>оно гаснет</a>.
</html>

end

:294
<html>
Вскоре тропинка выводит вас <a href=btn:27>на дорогу</a>.
</html>

end

:295
<html>
Услышав про замок, Повар сразу же теряет словоохотливость. Он или не хочет ничего сказать, или ему запрещено это делать, а в вас он вполне оправданно подозревает шпиона. Однако в конце концов его удается разговорить. Под большим секретом, десять раз взяв с вас обещание, что не проболтаетесь, и непрерывно оглядываясь, не подслушивают ли его поварята, он сообщает самую последнюю сплетню, только вчера распространившуюся по цитадели: волшебник пристрастился к игре в карты. Стараясь не подать вида, что ожидали чего-то большего, спрашиваете его, какие комнаты еще вы не видели на этом этаже и что вообще есть интересного в замке. Но Повар не понимает вашего вопроса. "Какие еще комнаты? - искренне удивляется он. - Кухня наша да кабинет мага - вот тебе и все комнаты. Отсюда - он показывает на люк - еду ему наверх подаем. Замок, конечно, небольшой, зато как все удобно и продумано!". Вы понимаете, что волшебник позаботился о том, чтобы заколдовать своих слуг от ненужных расспросов, и, поблагодарив за беседу, <a href=btn:379>выходите из кухни</a>.
</html>

end

:296
<html>
Вы достаете из заплечного мешка гребень и предлагаете его хозяйке. Она с удовольствием принимает красивую вещицу и говорит, что ей давно уже никто не делал таких подарков. Она не привыкла оставаться в долгу и предлагает в ответ свою помощь. Но вы не рискуете довериться ей и сказать, что идете сражаться с Барладом Дэртом - Зачарованный лес многому научил. Тогда хозяйка гарема спрашивает, есть ли у вас любимая девушка. И прежде чем успеваете ответить, дарит для нее хрустальный <a href="javascript: addItem('Флакончик духов')">флакончик изысканных эльфийских духов</a><!-- (- 223)-->. От подарков отказываться не принято: вы смущенно благодарите. После этого хозяйка гарема удаляется к себе в комнату, предоставляя вам возможность <a href=btn:255>поговорить с женами мага</a> или <a href=btn:251>выйти из гарема</a> в следующий коридор.
</html>

end

:297
Pegasos=1
<html>
Вы гладите Пегаса, и он отзывается на ласку радостным ржанием. К несчастному животному здесь мало кто хорошо относится, и вы завоевали его расположение. Теперь, если придется выбираться из замка, а в комнате будет открытое окно, вы можете позвать его<!--, посмотрев параграф 609-->. Но учтите, Пегас может перенести вас только во Дворец Короля, ведь он не раз отвозил туда послов чародея. Поскольку управлять им вы не умеете, ни в какое другое место попасть не удастся. Погладив Пегаса, выходите из конюшни и <a href=btn:416>направляетесь к зданию в центре двора</a>.
</html>

end

:298
param=2
proc removeStrength
<script>
desc = 'ЛЕВ'; expr_action = 'fightStart(9,14,desc); afterBattle("265")';
</script>
<html>
"Ты обманул меня! - в негодовании рычит Лев. - Ты не знаешь нужных слов!". И его лапа наносит удар прежде, чем вы успеваете защититься<!-- (потеряйте 2 СИЛЫ)-->. Теперь<!-- вернитесь на 257 и--> попробуйте <a href="javascript: eval(expr_action)">победить привратника в честном бою</a>.
</html>

end

:299
play #quest_path$/Snd/MINUS.WAV
<script>
if (newGame) AgilityFactor = -2;
</script>
<html>
Вы накладываете заклятие Слабости и… чувствуете, что слабеете. Коварный рыцарь <a href="javascript: eval(expr_action)">обратил заклятие на вас<!--: теперь придется во время боя вычитать 2 из своей МОЩНОСТИ УДАРА - 567-->.</a>
</html>

end

:300
<html>
В какую дверь теперь попробуете выйти: в ту, что <a href=btn:337>перед вами</a>, или в ту, что <a href=btn:595>слева</a>?
</html>

end

:301
param=361
proc inarmor
<html>
Узкая длинная комната переходит в широкую парадную лестницу, поднимающуюся наверх. У подножия лестницы четыре больших деревянных кресла: три слева и одно, чуть на отшибе, справа. Резная спинка правого кресла украшена большой золотой короной. В креслах - Зеленые рыцари. На них нет ни шлемов, ни тяжелых лат, только легкие панцири и мантии с вышитым на них силуэтом Черного замка. Рыцарь, сидящий в кресле с короной, очевидно, Капитан. Склонив голову немного набок, он указывает на вас двум другим. Они встают с кресел и медленно приближаются. С лязгом, от которого холодеет кровь, мечи вылетают из ножен. Сердце учащенно бьется: вы понимаете, что наконец-то добрались до сердца цитадели. Если у вас есть <a href="javascript: tryItem('Оберег', 301, -131)">Оберег</a> или <a href="javascript: tryItem('Серебряный сосуд', 301, -57)">серебряный сосуд</a>, можете попытаться воспользоваться ими. <a href=btn:628>Иначе…</a>
</html>

end

:302
<html>
Вы подходите поближе и склоняетесь над умирающим. "Я знаю, что мне недолго осталось жить, - говорит он. - И ты ничем не можешь мне помочь. Прошу тебя только об одном: облегчи мои страдания. Дай мне напиться из твоей фляги". Что вы сделаете?<br>
<a href=btn:11>Дадите умирающему напиться?</a><br>
<a href=btn:629>Откажете и пойдете дальше?</a>
</html>

end

:303
<html>
Лес редеет, тропинка в траве почти незаметна, под ногами попадается все больше и больше мха. Чувствуется, что почва становится все мягче и мягче, идти удается с большим трудом, земля засасывает. Но тропинка уверенно бежит вперед, и вы можете либо идти по ней <a href=btn:99>дальше</a>, либо вернуться на развилку и пойти <a href=btn:117>направо</a>.
</html>

end

:304
<html>
Тропинка покидает лес и идет по непаханому полю неподалеку от опушки. Вы начинаете понимать, что вряд ли пошли в правильном направлении: ведь Черный замок должен быть в самом сердце леса. Оглядевшись вокруг, замечаете, что слева осталась лишь тонкая полоска деревьев, за которой мерцает, переливаясь на солнце, большое озеро. <a href=btn:88>Пойдете дальше</a> или <a href=btn:12>свернете к озеру</a>?
</html>

end

:305
<html>
Тропинка становится все шире и шире и превращается в большую дорогу. Вы недоумеваете: кому это пришло в голову посреди чащобы проложить такой путь. Быть может, дорогу просто не достроили? Но это останется одной из загадок Зачарованного леса, которую вам вряд ли суждено разгадать. Конец дороги уже виден: она выходит на огромную поляну. Деревья по ее краям повалены и обуглены, кажется, недавно здесь бушевал пожар. На безлюдную поляну <a href=btn:412>выходит еще несколько таких же широких дорог</a>.
</html>

end

:306
proc lose
<html>
Последнее, что вы увидите в этой жизни, будет громадный черный валун, настигающий вас, и буквы Б и Д, горящие на нем недобрым зеленым пламенем и закрывающие от вас небо…
</html>

end

:307
<script>
if (!waterAmount)
  modifyWater(2);
else {
   readParagraph('363');
   alert('Ваша фляга уже полна!');
}  
</script>
<html>
Вы наполняете флягу. В будущем можете использовать эту воду так же, как и ту, что была с собой. Потом, внимательно глядя по сторонам, <a href=btn:161>идете дальше по главной улице</a>.
</html>

end

:308
<html>
Вы приближаетесь к центральному строению, и сторожка перестает загораживать длинное низкое здание в глубине двора. Это или сарай, или конюшня. В то же время внимание все больше и больше привлекает река. Может быть, с ее помощью можно проникнуть под цитадель незамеченным? Или стоит переплыть ее и осмотреть ту часть двора, которая сейчас не видна? Куда же вы направитесь?<br>
	<a href=btn:416>К центральному строению?</a><br>
	<a href=btn:386>К низкому зданию справа?</a><br>
	<a href=btn:4>К реке?</a>
</html>

end

:309
<script>
expr_action = 'AgilityFactor = -1; fightStart(10,10,"ЗЕЛЕНЫЙ РЫЦАРЬ"); afterBattle("126")';
</script>
<html>
На дороге появляется скачущий во весь опор рыцарь. На нем тяжелые зеленые латы, в руке - копье, на щите силуэт огромного Черного замка, а чуть слева и пониже голубая змейка. Вы не можете оторвать взгляд от щита, изображение начинает расти, и в какой-то момент появляется ощущение, что вы стоите прямо перед этим замком, а змейка превращается в широкую реку, исчезающую под одной из угловых башенок… Резкая боль заставляет прийти в себя. Вы понимаете, что Зеленый рыцарь просто-напросто загипнотизировал вас волшебным щитом, а теперь, ударив копьем<!-- (потеряйте 3 СИЛЫ)--> и отбросив его, на полном скаку разворачивается, вынимая из ножен меч. Если хотите попытаться <a href=btn:481>убежать</a>, не медлите. Иначе - <a href="javascript: eval(expr_action)">сражайтесь</a>: пытаться наложить какое-нибудь заклятие уже поздно.<!--
	ЗЕЛЕНЫЙ РЫЦАРЬ
	Ловкость 10 Сила 10
	Если вы победили его, то 126. Но учтите, каждый раз вам придется вычитать из вашей МОЩНОСТИ УДАРА 1, ведь он бьется на коне, а вы нет.-->
</html>

end

:310
<html>
Старик радостно улыбается и говорит, что, хотя он и не надеется дожить до того дня, когда силы Зла будут низвергнуты, но с радостью поможет отважному путешественнику. Он рассказывает, что дорога пойдет мимо гибельных Коричневых топей, поэтому на первой развилке сворачивать с нее ни в коем случае нельзя: болото не выпускает своих жертв. Кроме этого он предупреждает, что самые страшные и отважные воины среди слуг волшебника - Зеленые рыцари. Они не только смело сражаются, но и мало кто оказывается в силах противостоять их натиску. Барлад Дэрт передал им частицу своего мастерства, и теперь они не менее искусно развеивают многие заклятия врага, но успешнее всего - заклятие Копии. Недоумевая, откуда старик про все это знает, вы благодарите его и <a href=btn:179>отправляетесь дальше</a>.
</html>

end

:311
<html>
Когда она видит зеркальце, то поначалу с интересом берет незнакомый предмет. Но стоит женщине взглянуть в него, как ее лицо искажается злобой. Изящная вещица летит на пол и разбивается вдребезги. Кажется, вам все же придется <a href=btn:93>драться</a>.
</html>

end

:312
param=3
proc removeStrength
<html>
Вам удается построить плот, но после этого чувствуете себя совершенно выдохнувшимся и измочаленным<!-- (потеряйте 3 СИЛЫ)--> от непривычной работы. Однако вы вполне благополучно пересекаете озеро, хотя на противоположном берегу <a href=btn:192>поджидает еще один сюрприз</a>.
</html>

end

:313
<html>
Заклятие действует успешно, и вы без приключений <a href=btn:222>переплываете реку</a>.
</html>

end

:314
play #quest_path$/Snd/MINUS.WAV
<script>
if (newGame) AgilityFactor = -2;
</script>
<html>
Накладываете заклятие Слабости - и действительно слабеете. Вы - а не рыцари! Они, не долго думая, направили магию обратно. Теперь <a href=btn:183>деритесь с ними</a><!--, но уменьшайте на 2 МОЩНОСТЬ своего УДАРА - 183-->.
</html>

end

:315
param=2
proc removeStrength
<html>
Вы поворачиваетесь к Начальнику стражи и говорите: "Мне поручили передать вам…", однако фраза так и остается незаконченной. Глаза Гоблина лезут на лоб, а рука тянется к звонку. Всего через мгновение комната наполняется вооруженными Орками. Вы пытаетесь сопротивляться, но один из стражников, подкравшись сзади, бьет вас своим мечом плашмя по голове<!-- (потеряйте 2 СИЛЫ)-->. <a href=btn:409>Вы теряете сознание…</a>
</html>

end

:316
param=4
proc removeStrength
<script>
expr_action = 'fightStart(12,8,"ДРАКОН"); battleEndCondition("enemy [0].Strength == 4"); afterBattle("513")';
expr_action2 = "if (itemExists('Копия')) {createCopy(); eval(expr_action); }";
</script>
<html>
Вы достаете меч и <a href="javascript: eval(expr_action2)">нападаете</a> на Дракона. Дохнув пламенем<!-- (потеряйте 4 СИЛЫ)-->, он бросается в бой.<!--
	ДРАКОН
	Ловкость 12 Сила 8
	--> Кстати, обнаружив, что перед вами столь сильный противник, можете воспользоваться заклятием <a href="javascript: eval(expr_action2)">Копии</a>.<!-- Если удастся дважды ранить Дракона, то 513.-->
</html>

end

:317
<html>
Решившись, показываете талисман. В ответ он рассказывает, что некогда был одним из трех волшебников, живших в лесу до появления Барлада Дэрта. Его имя Хэрнок. Когда пришли тяжелые времена, он, единственный из трех, объявил войну магу. И потерпел неудачу. Деревянный талисман - символ власти и мудрости - был похищен, а сам он брошен в эту подземную тюрьму. Неудивительно, что старик умоляет вернуть талисман. <a href="javascript: useItem2('Деревянный талисман', 127)">Сделаете это</a>? Или откажетесь и посмотрите, <a href=btn:225>кто сидит в соседней клетке</a>?
</html>

end

:318
<html>
Без труда откинув крышку ларя, достаете большой <a href="javascript: addItem('Большой ключ')">металлический ключ</a>.<!-- На нем выгравировано: "Все".--> Этот ключ поможет вам открыть некоторые запертые двери в замке. Если какая-то дверь не открывается обычным способом, попробуйте<!-- вычесть 40 из номера параграфа, на котором вы будете--> открыть ее ключом, - вдруг<!-- ключ и--> подойдет. Но сейчас вам надо торопиться и <a href=btn:193>уходить</a>.
</html>

end

:319
if password=1 then str="Если знаете пароль, <a href=btn:122>воспользуйтесь им</a>, если же нет, то" else str="Пароль вы не знаете, так что"
<html>
Ворота хорошо охраняются. Возле них стоят три Орка, подозрительно оглядывающие вас с ног до головы. Вы понимаете, что легко проникнуть в замок не удастся. #str$ придется на ходу придумать, что им сказать. Будете утверждать, что вы бродячий торговец и <a href=btn:31>идете в замок торговать</a>, что вы азартный игрок и <a href=btn:439>идете развлекать волшебника</a> или что вы <a href=btn:146>собираетесь наняться в армию чародея</a>? Иначе придется <a href=btn:428>драться</a>.
</html>

end

:320
<html>
Вы заходите за угол. Прямо перед вами - Зеленый рыцарь. На его щите сверкает баронская корона, а меч направлен прямо на вас. "Пропуск!" - глухо говорит он из-под забрала. Рискнете <a href=btn:355>предложить что-то в виде пропуска</a> или <a href=btn:543>атакуете его</a>? Кроме того, можете, если хотите, попытаться <a href="javascript: tryItem('Серебряный сосуд', 320, -57)">воспользоваться серебряным сосудом</a>.
</html>

end

:321
<html>
Дух мертвых, который зорко охраняет могилы, пробудился. Теперь придется драться с ним. Попробуете наложить какое-нибудь <a href=btn:640>заклятие</a> или будете <a href=btn:247>сражаться</a> мечом?
</html>

end

:322
proc changedress
<html>
Поднявшись по лестнице, попадаете в маленькую прихожую. Наверняка до цели уже недалеко: обстановка здесь гораздо богаче и роскошней, странно только, что у дверей нет охраны. Справа от входа - огромное окно, в стенах напротив и справа - двери. В какую дверь вы пойдете? <a href=btn:277>Прямо</a> или <a href=btn:556>направо</a>?
</html>

end

:323
<html>
Вы открываете дверь и входите в очень странную комнату. Она абсолютно пуста: голые стены, никакой мебели. Из комнаты ведут три двери, в одну из которых вы только что вошли. Неожиданно от стены отделяется маленькая сгорбленная старушка. Сначала вы не заметили ее, да и была ли она здесь? Медленно приближаясь к вам, она протягивает руку, как бы прося милостыню. Что вы сделаете?<br>
<a href="javascript: tryItem('Пропуск', 323, 20)">Предъявите пропуск?</a><br>
<a href=btn:522>Замахнетесь на нее мечом?</a><br>
<a href=btn:137>Дадите ей денег?</a><br> 
<a href=btn:194>Предложите какой-нибудь подарок?</a>?
</html>

end

:324
<html>
Когда вы склоняетесь над Принцессой, свет свечи падает на рубин перстня, и камень оживает. Вам кажется, что от него начинает исходить тепло, однако само кольцо остается совсем холодным… О, чудо: тепло от перстня не только согревает Принцессу, но и будит ее! Она глубоко вздыхает и, приоткрыв глаза, приподнимается на кровати. Оглядевшись из-под полуопущенных век, Принцесса спрашивает, жив ли еще ее тюремщик, ненавистный Барлад Дэрт? К счастью, <a href=btn:655>вы можете ее порадовать</a>: чародей мертв.
</html>

end

:325
<html>
Вам повезло: вы не только оказались в Черном замке, но у вас есть еще с собой латы Зеленого рыцаря. Перед каждой дверью вы имеете право решить, хотите войти в нее в латах или нет. Однако, если надумаете переодеться, учтите, что такая возможность доступна только в пустой комнате. Сделаете двойной щелчок на латах, чтобы переодеться. В том случае, если одежда будет играть хоть какую-нибудь роль, вы узнаете, что случится, когда вы захотите выдать себя за рыцаря. Теперь же <a href=btn:265>вернитесь</a> и идите дальше.
</html>

end

:326
<script>
expr_action = 'enemyStrengthFactor = 3; fightStart(9,8,"ВОДЯНОЙ"); Flee("504"); afterBattle("573")';
</script>
<html>
<!--Если вы победили его, то 573. --><a href="javascript: eval(expr_action)">Сражайтесь</a>, но если хотите, во время боя можете покинуть таверну и бежать.
</html>

end

:327
param=2
proc removeStrength
<html>
Это какой-то неправильный Дракон. Драгоценности его мало интересуют, и он недвусмысленно дает вам это понять, выдохнув струю пламени (потеряйте 2 СИЛЫ). Теперь вам придется <a href=btn:316>драться</a>.
</html>

end

:328
<script>
expr_action = 'fightStart(8,8,"ПЕРВЫЙ ОРК",7,8,"ВТОРОЙ ОРК"); afterBattle("505",">8","248")';
expr_action2 = "if (itemExists('Ловкость')) {removeItem('Ловкость'); AgilityFactor = 2; eval(expr_action) }";
expr_action3 = "if (itemExists('Слабость')) {removeItem('Слабость'); enemyPowerFactor = -2; eval(expr_action) }";
expr_action4 = "if (itemExists('Копия')) {createCopy(); eval(expr_action) }";
</script>
<html>
Пока Орки не успели понять, в чем дело, вы нападаете на них. <a href="javascript: eval(expr_action)">Сражаться</a> с ними придется одновременно. Если хотите, можете воспользоваться заклятиями <a href="javascript: eval(expr_action4)">Копии</a>, <a href="javascript: eval(expr_action2)">Ловкости</a> или <a href="javascript: eval(expr_action3)">Слабости</a><!-- (в последних случаях можете либо увеличить на время боя на 2 свою Ловкость, либо ослабить на столько же МОЩНОСТЬ УДАРА одного из противников). Если убили обоих врагов за 8 раундов атаки, то 505. Если нет, то 248-->.
</html>

end

:329
<html>
Тропинка спускается на дно неглубокого оврага. Над вами по мосту проходит дорога, но склоны оврага слишком круты, чтобы можно было взобраться на нее. Через некоторое время вы подходите к крепкому бревенчатому дому, и <a href=btn:33>тропинка заканчивается у его дверей</a>.
</html>

end

:330
proc lose
<html>
Вы делаете шаг вперед и, не успев еще толком сообразить, что случилось, чувствуете, как земля под ногами с шумом проваливается, и летите в неглубокую яму, на дне которой укреплено несколько копий. Одно из них протыкает вас насквозь. Это охотничья ловушка слуг Барлада Дэрта, и через несколько минут вы умрете. Гоблинам и в самом деле ни к чему было ходить в лес дальше этого места…
</html>

end

:331
<html>
Она смотрит на вас как на сумасшедшего и с негодованием ломает стрелу. Подарок ей явно не понравился. Можете теперь либо попробовать <a href=btn:137>откупиться</a>, либо вынуть меч и <a href=btn:522>драться</a>.
</html>

end

:332
<html>
Дорога от таверны ведет прямо в лес, и вы радуетесь, что наконец-то идете в нужном направлении. Невысокий подлесок вновь сменяется древними могучими деревьями. Интересно, кто же все-таки проложил здесь все эти дороги и тропы? Неужели неутомимые воины Барлада Дэрта? Или они существовали задолго до них? Так или иначе вы замечаете, что заброшенных тропинок пока что не попадается: по всем ходят много и часто. Погруженный в свои мысли, доходите до развилки. Ваша дорога идет прямо, другая отходит от нее налево. Но куда направитесь вы? <a href=btn:250>Прямо</a> или <a href=btn:461>налево</a>?
</html>

end

:333
<html>
Тропинка выводит к маленькому домику, стоящему посреди поляны. Трудно даже предположить, кто может жить в такой крошечной хижине. Вероятно, или гномы, или карлики. Но когда вы собрались наклониться и заглянуть в окошечко (домик в половину вашего роста), как вдруг откуда-то слышится голос: "Поговори со мной, храбрый путешественник". "Но кто ты?", - оторопело спрашиваете вы. "Я - Лесной домик", - слышится в ответ. С вами говорит сам домик! Ну так что, <a href=btn:149>поговорите с ним</a> или <a href=btn:98>пойдете дальше</a> по дорожке, ведущей прочь?
</html>

end

:334
<html>
Вы проходите через сад, и тропинка, петляя, уходит <a href=btn:99>в лес</a>.
</html>

end

:335
param=7
proc addGold
<html>
Обшарив одежду разбойников, находите 7 золотых, <a href="javascript: addItem('Камея с изображением дракона')">камею с изображением дракона</a><!-- (- 28)--> и <a href="javascript: addItem('Статуэтка Орробы')">бронзовую статуэтку богини смерти Орробы</a><!-- (+ 109)-->. Можете взять с собой все, что считаете нужным, и <a href=btn:46>идти дальше</a>.
</html>

end

:336
<script>
if (newGame) {
   addItem('Золотой апельсин');
   dice = Math.floor(Math.random() * 6);
   Luck [dice] = true;
}
</script>
<html>
Немного подумав, решаете все же сорвать золотой апельсин<!-- (+ 200)-->. Вокруг все тихо - ничего особенного не происходит. Теперь можете <a href=btn:24>покинуть остров</a>.<!-- А кроме того, бросить кубик и почистить соответствующий квадрат УДАЧИ - 24.-->
</html>

end

:337
<html>
Вы оказываетесь в комнате Начальника стражи. Гордый и важный Гоблин с надутыми щеками, в расшитом золотыми галунами плаще, на котором вышиты буквы "Б" и "Д", он сидит за столом и очень удивлен, увидев вас. Попробуйте <a href=btn:613>подкупить</a> его, <a href=btn:249>поговорить</a> с ним или будете <a href=btn:65>драться</a>?
</html>

end

:338
<html>
Дорога начинает петлять, вы скоро запутываетесь в ее поворотах и перестаете понимать, в каком направлении идете. Тем временем смеркается. Не чувствуя особенной опасности (зато чувствуя сильную усталость), ночуете прямо на обочине (благо ночи еще стоят теплые) и продолжаете путь с первыми лучами солнца. За ночь дорога не стала вести себя лучше: сначала она подходит к самой опушке леса, но потом опять устремляется в чащу. Наконец перед вами два пути: <a href=btn:151>направо</a> и <a href=btn:231>прямо</a>. Какой из них вы изберете?
</html>

end

:339
goto 66
;Если вы действительно уже встречали кого-то из их знакомых, то сложите порядковые номера букв, составляющих его имя, прибавьте к этому 30 и посмотрите параграф с получившимся номером. Если же вы сказали ;неправду, то обман непременно откроется, и уж лучше самому начать бой - 123.

:340
param=2
proc addStrength
<html>
Неподалеку в лесу виднеется шалаш. Он давно заброшен, но может служить прекрасным местом для ночлега. Положив меч рядом, вы чутко спите, но ночь проходит спокойно. Можете восстановить<!--2 СИЛЫ--> силы и <a href=btn:509>отправляйтесь в путь с рассветом</a>.
</html>

end

:341
<script>
expr_action = "if (itemExists('Ловкость')) {removeItem('Ловкость'); AgilityFactor = 2; readParagraph('487'); void(0) }";
expr_action2 = "if (itemExists('Слабость')) {removeItem('Слабость'); enemyPowerFactor = -2; readParagraph('487'); void(0) }";
</script>
<html>
Вы можете воспользоваться заклятиями <a href="javascript: eval(expr_action)">Ловкости</a>, <a href="javascript: eval(expr_action2)">Слабости</a> или <a href="javascript: useItem2('Огонь', 506)">Огня</a>. Или <a href=btn:487>просто сражайтесь мечом</a>.
</html>

end

:342
if ball=1 then goto 372
param=3
proc removeStrength
<html>
Вы идете по дороге всю ночь. К сожалению, приходится миновать несколько перекрестков, но в темноте вы не рискуете сворачивать с намеченного пути. Начинает сказываться усталость, глаза слипаются<!-- (потеряйте 3 СИЛЫ)-->. Но когда из-за деревьев робко встает солнце, вы видите, что <a href=btn:181>конец дороги близок</a>.
</html>

end

:343
<html>
Вы показываете пропуск, и она тает в воздухе. Кажется, еще одного стража удалось миновать вполне благополучно. Но в комнате две двери, в какую из них пойти? <a href=btn:252>Прямо</a> или <a href=btn:542>направо</a>?
</html>

end

:344
<html>
Вы быстро накладываете еще одно заклятие Огня, и оно поражает вторую голову Дракона. Вам повезло: неутомимый страж мог причинить вам немало неприятностей. <a href=btn:454.1>Но все хорошо, что хорошо кончается.</a>
</html>

end

:345
<html>
Библиотекарь говорит, что попробует найти что-нибудь подходящее, и <a href=btn:649>скрывается за полками</a>.
</html>

end

:346
<html>
Вы очнулись в каменном мешке. На стенах - сырость, маленькое окошко в двери забрано крупной решеткой. Это тюрьма для особо опасных преступников. Голова почти прошла, и вы подходите к окошку. При слабом свете свечи, горящей где-то снаружи, видно, что по обеим сторонам двери стоят каменные табуреты. На них неподвижно сидят два старика. Вы даже не можете понять, статуи это или живые люди. Хотите <a href=btn:153>воспользоваться каким-нибудь заклятием</a>, чтобы выбраться отсюда, или <a href=btn:68>посмотрите, что будет дальше</a>?
</html>

end

:347
proc lose
<html>
К вашему ужасу и изумлению, голова у Дракона отрастает вновь. Вам не суждено победить его - он спалит вас огнем быстрее, чем вы сможете решить, что же делать. А жаль, ведь башни Черного замка уже видны сквозь деревья…
</html>

end

:348
<html>
Коридор приводит к двери. Она не заперта, и когда вы открываете ее, то видите лестницу, ведущую вниз. <a href=btn:544>Вы спускаетесь по ней</a>.
</html>

end

:349
param=1
proc addStrength
<html>
Банан резко меняет настроение Обезьяны. Она съедает его и проникается к вам нескрываемой симпатией. А кроме того, в ответ тоже дарит подарок: <a href="javascript: addItem('Гребень')">изящный гребень из слоновой кости</a><!-- (- 255)-->. После этого вы некоторое время отдыхаете в тени<!-- (можете восстановить 1 СИЛУ)-->, но вскоре Обезьяна начинает нетерпеливо дергать вас за рукав. Как бы подавая пример, она бежит вперед по тропинке, ведущей к лесу, и явно зовет за собой. Когда вы подходите поближе, то видите, что она отнюдь не собирается входить в лес по тропинке, а манит вас куда-то в сторону. <a href=btn:615>Пойдете за ней</a>, <a href=btn:305>по тропинке</a> или <a href=btn:210>вернетесь на дорогу</a>?
</html>

end

:350
<script>
expr_action = "if (Agility < 12) { readParagraph('253'); void(0) } else addItem('Стеклянный сосуд')";
canChangeDress = 1;
</script>
<html>
Вы попадаете в комнату, посреди которой высится нечто похожее на алтарь. На нем два сосуда: серебряный и стеклянный. Никакой стражи поблизости не видно, и вы можете либо попробовать взять один из сосудов с алтаря (тогда какой: <a href=btn:545>серебряный</a> или <a href="javascript: eval(expr_action)">стеклянный</a>), либо <a href=btn:39>выйти</a> в противоположную дверь.
</html>

end

:351
<html>
Крестьянин внимательно смотрит на вас и говорит, что может проводить к человеку, который вам нужен. Через несколько домов живет торговец, поставляющий в Черный замок сено для лошадей волшебника. Тот за небольшую плату (3 золотых) соглашается спрятать вас на одном из возов под сеном и доставить в замок. <a href=btn:574>Примете его предложение</a> или откажетесь и покинете деревню по одной из дорог: <a href=btn:235>на юг</a> или <a href=btn:2>на запад</a>.
</html>

end

:352
<html>
Держась за стену, доходите до двери. За ней лестница, но она освещена, и приходится несколько минут постоять, пока глаза привыкнут к свету. Затем вы поднимаетесь по лестнице, но ни через два, ни через три, ни через четыре пролета не встречаете выхода с нее. Наконец перед вами последний пролет, в начале его дверь, но как вы ни стараетесь, открыть ее не удается. Придется <a href=btn:322>подниматься до конца</a>.
</html>

end

:353
instr str=
if ball=1 then str="Если у вас есть клубочек, можете <a href=btn:383>посмотреть</a>, куда он покатится."
<html>
Ранним утром вы выходите на перекресток. От дороги отходят две тропинки. Свернете <a href=btn:154>направо</a>, <a href=btn:237>налево</a> или пойдете по дороге <a href=btn:181>прямо</a> и посмотрите, куда она вас приведет? #str$
</html>

end

:354
<html>
Он с удивлением смотрит на протянутую стрелу и говорит, что не понимает, зачем бы она могла ему пригодиться. Так что вам придется либо <a href=btn:42>платить деньги</a>, либо <a href=btn:518>драться</a> с ним, либо <a href=btn:106>уходить</a>.
</html>

end

:355
<html>
Что, по-вашему, может послужить пропуском?<br>
	<a href="javascript: tryItem('Золотое кольцо',355,214)">Золотое кольцо?</a><br>
	<a href="javascript: tryItem('Бронзовый свисток',355,-214)">Бронзовый свисток?</a><br>
	<a href="javascript: tryItem('Четки',355,-187)">Четки?</a><br>
Если у вас нет ни одного из этих предметов, вам придется <a href=btn:543>драться</a>.
</html>

end

:356
<script>
expr_action = 'fightStart(9,14,"ТРОЛЛЬ"); afterBattle("356.1")';
</script>
<html>
Вы без предупреждения <a href="javascript: eval(expr_action)">нападаете на Тролля</a>. Хозяин винного погреба без труда развеет ваши заклятия, поэтому драться с ним придется, надеясь только на себя и на свой меч.<!--
	ТРОЛЛЬ
	Ловкость 9 Сила 14
	Если вы победили Тролля, то обнаруживаете в одном из его карманов Золотое кольцо (+ 214). Как оно попало сюда и для чего служит, вам неведомо. Кроме того, можете бросить кубик и почистить соответствующий квадрат УДАЧИ. А теперь уходите через дверь в противоположном конце прохода между полками - 207.-->
</html>

end	

:356.1
<script>
if (newGame) {   
   dice = Math.floor(Math.random() * 6);
   Luck [dice] = true;
   canChangeDress = 1;
}
</script>
<html>
В одном из карманов убитого Тролля вы обнаруживаете <a href="javascript: addItem('Золотое кольцо')">Золотое кольцо</a><!-- (+ 214)-->. Как оно попало сюда и для чего служит, вам неведомо. А теперь <a href=btn:207>уходите</a> через дверь в противоположном конце прохода между полками.
</html>

end	

:357
play #quest_path$/Snd/PLUS.WAV
<script>
if (newGame) AgilityFactor = 2;
</script>
<html>
Заклятие действует, и<!--вы можете прибавлять на время этого боя две единицы к своей Ловкости - 316--> на время этого боя ваша <a href=btn:316>Ловкость увеличивается</a>.
</html>

end

:358
param=2
proc addStrength
<html>
Ночь проходит спокойно<!-- (можете восстановить 2 СИЛЫ)-->. Но когда вы просыпаетесь, выясняется, что лес спрятал дорогу, по которой вы шли. Вместо этого перед вами широкий перекресток и три дороги: направо, налево и прямо. Куда вы пойдете: <a href=btn:510>направо</a>, <a href=btn:214>налево</a> или <a href=btn:38>прямо</a>?
</html>

end

:359
<html>
Как ни странно, но эти рыбы действительно питаются людьми. И где они только их берут, живя в этом далеком, забытом озере? Может быть, им хватает таких путешественников, как вы?..
</html>

end

:360
<html>
Через некоторое время видите еще одну дорогу. Теперь уже вам придется либо <a href=btn:2>пойти по ней</a>, либо все-таки передумать и <a href=btn:580>войти в деревню</a> - дальше начинается бурелом, продираться через который нет ни малейшего желания.
</html>

end

:361
proc lose
<html>
Вы входите в комнату и видите перед собой… четырех Зеленых рыцарей. Они несколько секунд удивленно смотрят на вас, не вставая со своих глубоких деревянных кресел. Потом один из них кивает другому, и тот поворачивается вместе с креслом вокруг оси. Еще не успев сообразить, зачем он это делает, чувствуете, как пол вместе с вами описывает полукруг, теряете равновесие и летите в бездну. Вы так и не узнаете, были ли близки к цели или нет…
</html>

end

:362
<html>
Вы прикладываете к углублению в двери медальон с золотым орлом, и он словно прилипает к ней. По крайней мере взять его обратно уже не удается. Дверь медленно раскрывается - впереди узкий коридор. Он прекрасно освещен, стены украшены дубовыми панелями с изображением гербов Катэны. Любопытно, с чего это вдруг Барлад Дэрт так чтит этот город? В конце концов коридор упирается в дверь. <a href=btn:241>Она не заперта</a>.
</html>

end

:363
param=2
proc addStrength
<html>
Вы склоняетесь к родничку и делаете несколько глотков. Вода прохладная и вкусная. Напившись, вы чувствуете себя освеженным и отдохнувшим<!-- (можете восстановить 2 СИЛЫ)-->. Теперь, если хотите, <a href=btn:307>наполните флягу</a> или <a href=btn:161>отправляйтесь дальше</a>.
</html>

end

:364
proc changedress
<html>
Только меч Зеленого рыцаря может сразить Каменных крыс. Увидев его, они в ужасе разбегаются. Ваш путь свободен. Дверь справа от вас <a href=btn:480>ведет в следующую комнату</a>.
</html>

end

:365
<html>
Какое бы заклятие вы ни наложили, Барон без труда нейтрализует его.<!--Вычеркните выбранное вами заклятие, вернитесь на 543 и--> <a href="javascript: eval(expr_action)">Надейтесь только на свой клинок.</a>
</html>

end

:366
<html>
Вы стоите на другом берегу реки. Теперь цитадель высится слева от вас. Можно <a href=btn:416>обойти ее вокруг</a> и поискать вход. Но прямо перед вами в углу двора виднеется заброшенный домик. До него еще слишком далеко и нельзя предположить, кто его обитатели. Если хотите, сначала <a href=btn:116>подойдите к нему</a>.
</html>

end

:367
<html>
Ваш выбор падает на шкуру лисы<!-- (+ 17)-->. Трудно сказать, зачем она может пригодиться, но - чего не бывает. Теперь пора выбираться из берлоги. Новая дорога уводит вас <a href=btn:44>в глубь леса</a>.
</html>

end

:368
proc lose
<html>
Выбрав правый коридор, вы успеваете сделать по нему всего несколько шагов, когда за спиной падает тяжелая железная решетка. Вы в западне. Найдут вас теперь не скоро, но и тогда пощады ждать не приходится…
</html>

end

:369
<script>
if (Gold < 6) { readParagraph('137'); alert('У Вас не хватает денег!'); } else modifyGold(-6);
</script>
<html>
Старуха подбирает монеты, кланяется и услужливо открывает правую дверь, после чего исчезает. Пойдете <a href=btn:542>в эту дверь</a> или в ту, что <a href=btn:252>прямо</a>?
</html>

end

:370
<html>
Заклятие Иллюзии не действует на стариков. Хотите наложить заклятие <a href="javascript: useItem2('Огонь', 538)">Огня</a> или <a href=btn:68>наберетесь терпения</a>?
</html>

end

:371
<html>
Бесполезно: старик даже не замечает, что вы на него напали. Колдовство слишком сильно, чтобы вы могли бороться с ним. Придется покорно <a href=btn:276>идти дальше</a>.
</html>

end

:372
param=3
proc removeStrength
<html>
Вы идете по дороге всю ночь. Поначалу клубочек еще виден в слабом свете нарождающейся луны. Однако в темноте приходится миновать несколько перекрестков, и вам не удается уловить момент, когда подарок Лесовичка исчезает в ночи. Искать его во тьме бесполезно, и вы не рискуете сворачивать с избранного пути. Начинает сказываться усталость, глаза слипаются. Когда из-за деревьев робко встает солнце, становится видно, что <a href=btn:181>конец дороги близок</a>.
</html>

end

:373
<html>
Свисток нравится торговцу, но он не знает, что с ним делать, и просит сверх того дать ему еще 2 золотых. Вы можете либо согласиться с предложением и <a href=btn:373.1>отдать деньги и свисток</a>, либо отказаться и <a href=btn:106>уйти</a>, забрав свисток обратно.
</html>

end

:373.1
<script>
if (Gold >= 2) {
   removeItem('Золотой свисток');
   modifyGold(-2); 
   readParagraph('443');
}
else {
   readParagraph('373');
   alert('У Вас не хватает денег!');   
}
</script>
end

:374
<script>
expr_action = 'fightStart(8,8,"ПЕРВЫЙ ЧЕЛОВЕК",6,12,"ВТОРОЙ ЧЕЛОВЕК"); afterBattle("34")';
</script>
<html>
Они атакуют вас одновременно - приходится <a href="javascript: eval(expr_action)">защищаться</a>.<!--
	ПЕРВЫЙ ЧЕЛОВЕК
	Ловкость 8 Сила 8
	ВТОРОЙ ЧЕЛОВЕК
	Ловкость 6 Сила 12
	Если вам удалось победить их, то 34.-->
</html>

end

:375
<html>
Вы подходите к реке, но вброд ее не перейти. Вам придется использовать заклятия: либо <a href="javascript: useItem2('Плавание', 254)">Плавания</a>, либо <a href="javascript: useItem2('Левитация', 508)">Левитации</a>. Если хотите, можете, используя заклятие Плавания, попробовать <a href="javascript: useItem2('Плавание', 596)">проплыть по течению реки под замок</a>, надеясь попасть в подземелье незамеченным. Если же у вас нет ни одного из этих заклятий или вы не хотите их использовать, <a href=btn:424>идите к палаткам</a>.
</html>

end

:376
<script>
if (newGame) modifyGold(-2)
</script>
<html>
Вы платите 2 золотых, и он подплывает к вам с красивой глиняной пиалой, наполненной водой. Она чистая и прохладная, и вы с удовольствием пьете, но вдруг чувствуете, что настолько хотите спать, что не в силах этому сопротивляться. Засыпая, медленно <a href=btn:155>опускаетесь на пол таверны</a>.
</html>

end

:377
<html>
Дорога понемногу меняет направление и ведет к середине леса. Вы радуетесь, что не свернули на тропинку: по дороге-то идти гораздо быстрее и удобнее. Но вдруг за поворотом слышится приближающийся топот копыт. Черт возьми, кажется, удобным путем решили воспользоваться не только вы! <a href=btn:197>Спрячетесь и посмотрите</a>, кто едет вам навстречу, или предпочтете <a href=btn:309>остаться и понаблюдать за всадником</a>?
</html>

end

:378
<html>
Вскоре вы выходите на мост, под которым проходит еще одна дорога. Спуска вниз нет, так что можно либо попытаться <a href=btn:415>спрыгнуть</a>, либо <a href=btn:129>идти дальше</a>.
</html>

end

:379
<html>
За дверью - коридор, в конце его еще одна дверь, на этот раз гораздо ниже. Она заперта, но вам без особого труда удается почти что бесшумно ее выломать. Узкая винтовая лестница ведет вниз, в подземелье замка. Через несколько пролетов снова дверь, которую открыть уже не удается никакими силами. Приходится <a href=btn:544>спускаться до конца</a>.
</html>

end

:380
<script>
expr_action = 'dice1 = Math.floor(Math.random()*6) + 1; dice2 = Math.floor(Math.random()*6) + 1; if (dice1+dice2+10 < Strength) { readParagraph("632"); void(0) } else { readParagraph("103"); void(0) }';
</script>
<html>
Маленький сундук заперт, однако мечом вы ухитряетесь кое-как подцепить скобы замка. Но сможете ли вы их вырвать?<!-- Киньте кубик два раза, прибавьте к сумме выпавших на нем чисел 10 и сравните полученный результат с вашей СИЛОЙ. Если он меньше ее, то 632, если же больше или равен - 103. --> <a href="javascript: eval(expr_action)">ПРОВЕРЬТЕ СВОЮ УДАЧУ</a>.
</html>

end

:381
<html>
Вы побеждаете, и скелет скрывается под своим надгробием. Теперь можно перевести дух и оглядеться. Перед вами два саркофага и могильная плита в дальнем углу огромного подземного зала. Один из саркофагов украшен конной статуей человека в длинной мантии и с короной на голове. В правой руке у него меч, другой он держит поводья лошади. На втором саркофаге высечен крест, иных знаков и украшений на нем нет. Несмотря на то, что Дух мертвых сгинул, воздух подземелья не располагает к долгим и неторопливым поискам. Вы чувствуете, что каждая лишняя минута, проведенная здесь, таит смертельную опасность. Направитесь <a href=btn:84>к саркофагу со статуей</a>, <a href=btn:281>к саркофагу с крестом</a>, <a href=btn:496>к могиле</a> или уйдете через одну из двух дверей в левой стене: <a href=btn:547>правую</a> или <a href=btn:501>левую</a>?
</html>

end

:382
<script>
if (newGame) if (Gold>3) modifyGold(-4); else { readParagraph('255'); alert('У Вас не хватает денег!') }
</script>
<html>
Вы даете женщинам 4 золотых. Они довольны вашей щедростью и предлагают вывести вас с этажа незамеченным. Если вы согласны на это, то скажите им, хотите ли пойти <a href=btn:575>наверх</a> или <a href=btn:511>вниз</a>, иначе же можете просто выйти из гарема и <a href=btn:251>идти дальше по коридору</a>.
</html>

end

:383
<html>
Клубочек сворачивает на тропинку, ведущую <a href=btn:576>направо</a>. Пойдете за ним или предпочтете <a href=btn:353>вернуться</a> и выбрать дорогу самостоятельно?
</html>

end

:384
proc changedress
<html>
Вы вставляете фигурный ключ в замочную скважину. Раздается легкий щелчок. Крышка сундука откидывается - на самом дне виден небольшой футляр. Достав и открыв его, обнаруживаете <a href="javascript: addItem('Ожерелье из топазов')">ожерелье из топазов</a><!-- (+ 152)-->. Если у вас есть лишнее место, можете взять его с собой. Что же дальше? Попробуете открыть <a href=btn:474>большой</a> сундук, <a href=btn:380>маленький</a> или уйдете от греха подальше, <a href=btn:39>вернувшись в большую залу</a>?
</html>

end

:385
<html>
Вы подходите к столикам. На их крышках выгравировано двенадцать рисунков, каждый из которых соответствует одному из месяцев. Самый красивый - рисунок Месяца туманов, но… <a href=btn:502>Насладиться ими вам не дают</a>.
</html>

end

:386
<html>
Вы подходите к нему и видите, что это конюшня. Дверь полуоткрыта - ну как не заглянуть внутрь. Никого из конюхов нет, но из стойла смотрит на вас грустными глазами черный крылатый конь - Пегас. Увидев его, вспоминаете о волшебных животных, на которых прилетали во дворец послы коварного мага. Это наверняка одно из них. <a href=btn:548>Войдете в конюшню</a> или подумаете, что в любую минуту могут вернуться конюхи, и <a href=btn:416>направитесь к центральному зданию</a>?
</html>

end

:387
<html>
Поверив, что у вас и в самом деле нет дурных мыслей, незнакомцы успокаиваются. И в знак доверия рассказывают, что некогда жили в деревушке на краю леса. Может быть, вы были в ней? (Если да, почему бы не рассказать им, что стало с деревней). Когда Черный маг захватил лес, почти все мужчины были на охоте и ни о чем не ведали. По одному многих из них переловили воины волшебника и заставили работать на полях неподалеку от замка. Но несколько недель назад им двоим удалось бежать, и с тех пор приходилось питаться тем, что дарил лес. Беглецы просят прощения за то, что чуть было не напали на вас, и беспрекословно пропускают <a href=btn:3>дальше</a>.
</html>

end

:388
<html>
Барлад Дэрт вновь смотрит на вас. На этот раз в его взгляде уже больше любопытства. "Забавно, - говорит он, - сколько же человечек может возомнить о себе. Наверно, думаешь, что ты - вершитель судеб королевства, а я сейчас помогу тебе разбудить Принцессу, и мои кони доставят вас обоих домой? На самом деле ты только мое развлечение, забава и не более того. Я наблюдал за тобой с того момента, как ты вошел в лес". Видя, что вы не верите, маг напоминает несколько наиболее опасных моментов вашего путешествия. "А теперь, - продолжает он, - мне просто любопытно, что ты собираешься делать дальше. И вообще, я не понимаю, чем тебе не понравился мой новый камердинер, - он кивает на Гарпию. - Я просто хотел, чтобы она почистила твою одежду - уж слишком она пыльная". Чародей издевается над вами, но вы-то не ожидали такой встречи, надеясь, что, когда доберетесь до его кабинета, все решится само собой. Что же делать теперь? Если хотите, то можете выхватить меч и попробовать <a href=btn:577>убить мага</a>, а может быть, у вас есть <a href="javascript: tryItem('Золотое кольцо',388,214)">золотое кольцо</a> или <a href="javascript: tryItem('Лицо древнего бога',388,217)">изображение неведомого бога</a>? Тогда воспользуйтесь ими. Иначе вам придется просто <a href=btn:483>стоять и смотреть</a>, что будет дальше.
</html>

end

:389
param=1
proc removeAgility
<html>
Вы выпиваете жидкость. Это Микстура ужаса. Каждый раз, когда вы будете встречаться с врагом, вам потребуются все силы, чтобы подавить в себе ужас перед ним<!--, поэтому потеряйте 1 ЛОВКОСТЬ-->. Пока вы возитесь с микстурой, дверь сама собой закрывается, и <a href=btn:300>отпереть ее вновь уже не удается</a>.
</html>

end

:390
proc lose
<html>
Тропинка не сулит ничего особенно хорошего: понемногу почва под ногами становится подозрительно мягкой. Осознав, что вряд ли двигаетесь в правильном направлении, поворачиваете назад с надеждой выбраться из западни. Но не тут-то было. Под ногами едва ли не самое опасное, что только может встретиться неопытному путешественнику - гибельная засасывающая топь. Из последних сил вы боретесь с ней, но все напрасно. Через четверть часа от вас не остается и следа, а фальшивая тропинка все так же продолжает заманивать доверчивых путников…
</html>

end

:391
<html>
Счастье изменило вам. Вы укололись настолько больно, что оказались не в силах сдержать <a href=btn:502>крик</a>.
</html>

end

:392
proc lose
<html>
Рыцарь, обрадованный тем, что вы не открыли крышку, действительно пропускает вас мимо себя. Но одновременно он с силой налегает на какую-то рукоять, торчащую рядом с ним из стены. Вы наказаны за свою доверчивость: пол уходит из-под ног, и вы чувствуете, что летите в бездну. Так и не выполнив свою миссию…
</html>

end

:393
<html>
Дверь заперта. Есть ли у вас медный ключик? Если да, то можете достать его и попытаться <a href="javascript: tryItem('Медный ключик',393,-164)">отпереть дверь</a>, если же нет, то попробуйте открыть или ту дверь, что <a href=btn:337>за вами</a>, или ту, что <a href=btn:595>слева от вас</a>.
</html>

end

:394
<html>
Что вы хотите ей подарить? <a href="javascript: useItem2('Бронзовый свисток',394,-214)">Бронзовый свисток</a>, <a href="javascript: useItem2('Зеркальце',394,-83)">зеркальце</a> или <a href="javascript: useItem2('Флакончик духов',394,- 223)">флакончик духов</a>? Если ни одной из этих вещиц у вас нет, придется с ней <a href=btn:93>сразиться</a>.
</html>

end

:395
<script>
expr_action = 'fightStart(12,10,"ЗЕЛЕНЫЙ РЫЦАРЬ"); afterBattle("567.1")';
</script>
<html>
Вы накладываете заклятие Ловкости, и сила Зеленого рыцаря возрастает. <a href="javascript: eval(expr_action)">Он обратил ваше заклятие на себя<!--, и теперь придется прибавлять 2 к его Ловкости - 567-->.</a>
</html>

end

:396
<html>
Вы угадали, в последнее время волшебник действительно частенько играет в карты. Подозрительно оглядев с ног до головы, стража пропускает вас <a href=btn:100>через ворота</a>.
</html>

end

:397
<html>
Вы оказываетесь в комнате Начальника стражи. Гордый и важный Гоблин, в расшитом золотыми галунами плаще, на котором вышиты буквы "Б" и "Д", привстает вам навстречу из-за стола. Но вы не знаете, как должен вести себя Зеленый рыцарь, попав в эту комнату! Пройти, кивнув? Или поговорить, придумав какое-нибудь поручение? В комнате еще две двери - одна за его спиной, одна в стене справа. Выйдете <a href=btn:512>в правую</a> дверь, <a href=btn:39>в ту, что перед вами</a>, или попробуете с ним <a href=btn:315>поговорить</a>?
</html>

end

:398
proc changedress
<html>
Открыв дверь, попадаете в маленькую проходную комнатку. Она пуста, и из нее ведет только один путь - <a href=btn:39>вперед</a>.
</html>

end

:399
param=459
proc inarmor
<html>
Открыв дверь, попадаете в просторную комнату, назначение которой сразу же становится понятно. Это гарем волшебника. Жены чародея с удивлением смотрят на вас, явно ожидая объяснений столь бесцеремонного вторжения. Всего несколько секунд вы можете потратить на то, чтобы оглядеться. Ковры и зеркала, удобные мягкие диваны, картины в золотых рамах - это самая богатая комната из всех, что вы встречали. Скорее всего Барлад Дэрт редко выходит из своего кабинета (да где же он все-таки - наверху или внизу?!), поэтому в других комнатах только самое необходимое. Но здесь он, несомненно, бывает часто. В гостиной есть еще одна дверь в противоположной стене. Решайтесь: <a href=btn:198>пройдете в нее</a>, ничего не сказав женщинам и надеясь, что они вскоре забудут о вашем появлении, или попытаетесь <a href=btn:255>поговорить с ними</a>: вдруг они увидят в вас своего спасителя и помогут вам.
</html>

end

:400
<html>
Она с презрением ломает перо и отбрасывает его в сторону. Что теперь? <a href=btn:137>Дадите ей денег</a> или будете <a href=btn:522>драться</a>?
</html>

end

:401
<html>
<a href="javascript: CheckLuck('546', '77')">ПРОВЕРЬТЕ СВОЮ УДАЧУ</a>.<!-- Если вы удачливы, то 546, если нет - 77.-->
</html>

end

:402
param=1
proc removeStrength
<html>
Вы берете копье, но оно выскальзывает из рук, царапая вас наконечником, после чего растворяется в воздухе.<!-- Потеряйте 1 СИЛУ.--> Пронизывающее воздух напряжение не позволяет задерживаться: все в вас стремится прочь от этого места. Осталось только решить, через какую дверь уходить: <a href=btn:547>правую</a> или <a href=btn:501>левую</a>?
</html>

end

:403
<html>
Не успевает пройти и четверть часа, как снова развилка. Но на этот раз на ней есть указатель. Сначала вы даже не верите своим глазам, настроившись на битвы и не рассчитывая на гостеприимство. Однако деревянная стрелка, прибитая к дереву, указывает прямо: "Таверна". Вы <a href=btn:199>пойдете туда</a> или <a href=btn:606>свернете налево</a>?
</html>

end

:404
param=3
proc removeStrength
<html>
На дороге появляются два скачущих во весь опор рыцаря. Оба закованы в тяжелые зеленые латы, на щитах - силуэт Черного замка. Вы понимаете свою ошибку - это враги, а спрятаться уже некуда. Изображение замка на щите начинает расти, и вскоре вы видите только его, и ничего больше. Мрачный, угрюмый замок, по бокам невысокие сторожевые башенки, под одной из них исчезает голубая змейка. Неужели река? Но тогда замок должен быть огромен. Резкая боль заставляет прийти в себя. Один из рыцарей уже миновал вас, на полном скаку ударив копьем<!-- (потеряйте 3 СИЛЫ)-->. И теперь, отбросив копье, он разворачивает лошадь и достает меч. Щит приворожил вас, отвлек внимание в самый нужный момент - дело явно не обошлось без колдовства. Теперь надо мгновенно решать, что делать: выхватить меч и <a href=btn:183>драться</a> или попробовать наложить какое-нибудь заклятие: <a href="javascript: useItem2('Ловкость', 36)">Ловкости</a>, <a href="javascript: useItem2('Слабость', 314)">Слабости</a>, <a href="javascript: useItem2('Копия', 7)">Копии</a>, <a href="javascript: useItem2('Огонь', 112)">Огня</a>.
</html>

end

:405
<html>
Неожиданно вы чувствуете, что ваш Оберег ведет себя как-то неспокойно, как будто хочет вырваться наружу. Повинуясь не осознанному до конца импульсу, вы вынимаете его из-под одежды и показываете рыцарю. К вашему великому удивлению, он низко кланяется и отступает в сторону, чтобы пропустить вас. Вы же <a href=btn:241>идете дальше</a> по коридору, пока он не заканчивается невысокой дверью.
</html>

end

:406
<html>
Вы надеетесь, что тропинкой пользуются охотники, снабжающие замок дичью. Тогда она должна привести вас прямо к воротам. Однако проходит несколько часов, а лес даже не редеет, безмолвные деревья все так же стоят часовыми по краям тропинки, и начинает казаться, что чаща бесконечна, а могущественные чары заставят вас всю жизнь петлять по ней, так и не увидев ни выхода, ни Черного замка. Внезапно тропинка сворачивает к небольшой поляне справа от вас. Скорее всего это пасека: видны ульи и слышится слабое жужжание пчел. Однако есть и путь вперед: неширокая, ухоженная дорожка, идущая в лес прямо перед вами. Что вы выберете?
	<a href=btn:98>Пойдете прямо</a>?
	<a href=btn:515>Или приблизитесь к ульям</a>?
</html>

end

:407
<html>
Вскоре тропинка выходит на широкую дорогу. Может быть, это та самая, которая шла от перекрестка прямо? Не исключено, но возвращаться назад ни к чему, и вы решаете, что <a href=btn:181>такая дорога</a> наверняка должна вести к какому-нибудь жилью, а если повезет, и к самому Черному замку.
</html>

end

:408
param=1
proc addStrength
<html>
Мертвая Обезьяна лежит у ваших ног. Передохнув полчасика (не зря же сражались за тенек), восстанавливаете силы. После этого вы внимательно осматриваете логово Обезьяны: кто знает, какие полезные вещи могут там оказаться, ведь наверняка вы не первый путник, на которого она напала. Да и полуобглоданный скелет какого-то странного полуживотного-получеловека, лежащего под деревом с другой стороны, говорит о том же самом. Ваши поиски не безуспешны: вы находите совершенно незнакомый вам <a href="javascript: addItem('Орден летящего сокола')">орден в виде летящего сокола</a><!-- (+ 45)--> и маленькую фляжку. Орден, разумеется, можете положить в заплечный мешок, но что делать с фляжкой? Вы осторожно открываете пробку - она полна какой-то бесцветной жидкостью, запах которой ничего вам не напоминает. <a href=btn:131>Выпьете</a> содержимое, <a href="javascript: addItem('Фляжка с бесцветной жидкостью')">возьмете фляжку с собой</a><!-- (- 187)--> или не будете рисковать и <a href=btn:305>уйдете по тропинке</a>, ведущей от дерева в лес? А может быть, <a href=btn:210>вернетесь на дорогу</a>?
</html>

end

:409
<html>
Вы приходите в себя и видите, что лежите на полу в просторной клетке, стоящей у стены в большой комнате с толстыми каменными стенами. По сырости на них вы сразу понимаете, что это должен быть один из подземных этажей замка, но какой? Впрочем, сейчас надо думать о том, как выбраться отсюда. Вы неторопливо осматриваетесь, благо времени более чем достаточно. Из мебели в комнате только стол, два покосившихся стула да небольшой ларь, стоящий у стены. За столом - два Гоблина. Они увлечены игрой в кости и не обращают на вас никакого внимания. Неудивительно: даже если бы они и знали, что вы пришли в себя, шансов выбраться из клетки у вас все равно нет. Комнату освещает единственная свеча, горящая на столе, и в ее мерцающем свете вы видите, что рядом со столом на полу валяются ваши вещи: игра идет именно на них. Вам же остается надеяться только на свою магию. Попробуете использовать заклятие <a href="javascript: useItem2('Иллюзия', 280)">Иллюзии</a>, <a href="javascript: useItem2('Огонь', 114)">Огня</a>, или <a href=btn:56>у вас нет ни того, ни другого</a>?
</html>

end

:410
<html>
Вы накладываете заклятие, и в воздухе появляется раскаленный огненный шар, устремляющийся к пауку. Он изо всех сил старается увернуться, но увы: на земле ваш противник далеко не столь проворен, и вскоре от него остается только <a href=btn:189>горстка темно-серого пепла</a>.
</html>

end

:411
param=6
proc addStrength
meat=1
<script>
expr_action = "if (!vegetables) { readParagraph('578'); void(0) } else alert('Этот путь закрыт.')";
canChangeDress = 1;
</script>
<html>
Мясо вполне сносно<!-- и может восстановить 6 СИЛ-->. Хотите попробовать еще и <a href="javascript: eval(expr_action)">овощи</a> (если вы еще этого не делали) или <a href=btn:80>покинете комнату</a> через дверь в правой стене?
</html>

end

:412
<html>
Внезапно небо над головой темнеет, и вы видите, как на поляну опускается огромный двухголовый Дракон. Теперь понятно, почему деревья по краям обуглены, но уже слишком поздно. Однако Дракон не торопится нападать. Он опускается на землю и внимательно смотрит в вашу сторону, словно чего-то ждет. Вы можете либо <a href=btn:316>сразу ринуться в бой</a>, решив обойтись без магии, либо использовать заклятия - <a href="javascript: useItem2('Огонь', 37)">Огня</a>, <a href=<a href="javascript: useItem2('Ловкость', 357)">Ловкости</a> или <a href="javascript: useItem2('Слабость', 256)">Слабости</a>. А может быть, лучше предложить миролюбивому Дракону <a href=btn:516>подарок</a>?
</html>

end

:413
<html>
Заклятие переносит вас на маленький остров, и вы <a href=btn:132>оглядываетесь по сторонам</a>.
</html>

end

:414
<script>
expr_action = 'addItem("Меч Зеленого рыцаря"); modifyAgility(1); removeItem("Меч")';
</script>
<html>
Ваши противники повержены. Вы можете взять <a href="javascript: addItem('Латы')">латы</a> одного из них и понести с собой (они займут три места в вашем заплечном мешке). Но проникнуть в замок они не помогут: ехать на лошади слишком опасно, а пеший рыцарь неизбежно вызовет подозрение. Однако если вам суждено будет попасть в замок,<!-- прибавьте 60 к номеру первого же параграфа. Пока латы на вас, ваша одежда будет занимать только одно место в заплечном мешке--> можете надеть латы. Но будьте осторожны: ведь вы не знаете, как должен вести себя Зеленый рыцарь в замке, куда ему можно, а куда нельзя ходить. Не злоупотребляйте переодеванием - можете попасть в беду. В карманах у рыцарей вы находите всего лишь <a href="javascript: addItem('Перо павлина')">перо павлина</a><!-- (+ 206)--> - можете взять его с собой. Но ведь главное богатство рыцаря не деньги, а <a href="javascript: eval(expr_action)">меч</a><!-- (- 177)-->. Можете взять клинок любого из противников, он прибавит вам ловкости, но тогда ваш собственный меч придется оставить на поле боя. Решив не рисковать встретить на этой дороге других рыцарей, вы возвращаетесь к развилке и <a href=btn:338>идете направо</a>.
</html>

end

:415
<html>
<a href="javascript: CheckLuck('430', '579')">ПРОВЕРЬТЕ СВОЮ УДАЧУ</a>.<!-- Если Судьба благосклонна к вам, то 430, если нет - 579.-->
</html>

end

:416
<html>
Вы приближаетесь к большому зданию в центре двора. Теперь ясно, что именно это и есть цитадель волшебника - цель вашего путешествия. Высокое и мрачное, оно возвышается над вами. Его венчает неприступная башня - быть может, Принцессу заточили там? Или наверху покои самого Барлада Дэрта? Так или иначе надо искать вход. Вы обходите замок и находите то, что ищете: большие массивные двери, к которым подвешен дверной молоток в форме боевого топора. Поблизости никого нет, но теперь вам виден дальний конец двора. Там горят костры и факелы, разбиты палатки, между которыми снуют Гоблины и Орки. Военный лагерь врага! Быть может, стоит <a href=btn:424>пойти туда</a> и попытаться разузнать что-нибудь о замке? Или лучше не терять времени и <a href=btn:257>попробовать войти</a>?
</html>

end

:417
play #quest_path$/Snd/PLUS.WAV
<script>
if (newGame) AgilityFactor = 2;
</script>
<html>
Вы накладываете заклятие Ловкости и чувствуете, что ваша Ловкость увеличивается.<!-- На время боя прибавьте 2 к своей Ловкости--> Теперь <a href=btn:326>сражайтесь с Водяным</a>.
</html>

end

:418
<html>
Конечно, хотелось бы поговорить со стариком подольше, но он начинает заметно нервничать, подозревая в вас одного из шпионов Черного мага. Отчаявшись что-либо узнать, вы <a href=btn:179>покидаете деревню</a>.
</html>

end

:419
<html>
Вложив меч в ножны, показываете им пустые руки, желая убедить в том, что не замышляете ничего плохого. Однако незнакомцам не так-то просто поверить вам. Неожиданно они спрашивают, нет ли у вас с собой еды. <a href="javascript: useItem2('Еда', 104)">Дадите им поесть</a> или <a href=btn:634>откажете</a>?
</html>

end

:420
<html>
Вы протягиваете Оберег, но хозяйка гарема не знает, для чего он может ей пригодиться. Однако понимая, что вы хотели сделать подарок, но незнакомы с местными обычаями, она уносит его в свою комнату, а вы можете <a href=btn:255>вернуться</a> и подумать, что делать дальше.
</html>

end

:421
<html>
По выбранной тропинке идете около получаса. Неожиданно она внезапно обрывается. Просто кончается, как будто те, кто ее проложил, ходили только до этого места. Как это может быть? <a href=btn:330>Поищете разгадку</a> или вернетесь на развилку и <a href=btn:73>изберете иной путь</a>?
</html>

end

:422
<html>
Коридор упирается в ряд решеток. Перед ними узкий проход. Вы подходите к камере справа, подносите свет и пытаетесь разглядеть, кто или что скрывается там. В углу каменной клетки сидит, скорчившись от холода, седой старик. Вы подзываете его, но он не сразу откликается на ваш голос, не в силах поверить, что его зовет человек! Когда же он отзывается, слова его очень странны: "Приветствую тебя, смельчак! Не находил ли ты в дороге деревянный талисман?". Вы удивлены: вопрос не о свободе, не о том, что творится за стенами подземелья, а о каком-то талисмане! Неужели эта вещица для узника важнее всего? Но надо отвечать. Если у вас есть талисман и вы <a href="javascript: tryItem('Деревянный талисман', 422, -105)">хотите в этом признаться</a>, можете это сделать. Иначе придется <a href=btn:133>сказать</a>, что такого талисмана у вас нет.
</html>

end

:423
<script>
expr_action =  "if (itemExists('Ловкость')) {removeItem('Ловкость'); AgilityFactor = 2; readParagraph('40'); void(0) }";
expr_action2 = "if (itemExists('Слабость')) {removeItem('Слабость'); enemyPowerFactor = -2; readParagraph('40'); void(0) }";
</script>
<html>
Тропинка петляет вдоль реки, то отдаляясь, то приближаясь к воде. По краям растет высокий густой кустарник, и поначалу вы продвигаетесь вперед крайне осторожно. Один поворот, второй, третий, опасности нет, и вы начинаете идти быстрее. Вскоре тропинка вновь спускается на берег реки, но что это? Вы вышли к мосту, а около него - охрана. Два Гоблина поставлены здесь для того, чтобы никто посторонний не мог перебраться через реку. Ваша одежда ясно показывает им, что вы не служите волшебнику. Скорее решайте, что делать, ведь они вот-вот атакуют вас. Можете воспользоваться заклятием <a href="javascript: eval(expr_action)">Ловкости</a><!--, можете на время боя увеличить на 2 свою Ловкость--> или <a href="javascript: eval(expr_action2)">Слабости</a><!--, вычитайте 2 из МОЩНОСТИ УДАРА любого из Гоблинов--> или просто <a href=btn:40>сражаться мечом</a>. Если же есть желание, обратитесь к заклятию <a href="javascript: useItem2('Огонь', 290)">Огня</a>.
</html>

end

:424
<html>
Вы неторопливо подходите к палаткам поближе. Гоблины и Орки не обращают на вас никакого внимания, к тому же вы замечаете, что они безоружны. Вскоре становится понятно, что это новобранцы, но между палатками прохаживаются и два вооруженных до зубов командира - вам лучше не попадаться им на глаза, ведь они-то сразу поймут, в чем дело. Вы можете подсесть к одному из костров и <a href=btn:582>поговорить с Орками</a> или же решить, что лучше уж попытаться <a href=btn:74>проникнуть в центральное строение</a>.
</html>

end

:425
<a href="javascript: useItem2('Плавание', 201)">Воспользуетесь заклятием Плавания.</a><br>
<a href="javascript: useItem2('Левитация', 425)">Воспользуетесь заклятием Левитации.</a>
<html>
Вам удается долететь только до середины озера, когда заклятие перестает действовать. Майлин же предупреждал вас: не переоцените свои силы. Теперь скорее накладывайте еще одно заклятие - <a href="javascript: useItem2('Левитация', 614)">Левитации</a> или <a href="javascript: useItem2('Плавание', 614)">Плавания</a> - иначе <a href=btn:581>судьба ваша плачевна</a>.
</html>

end

:426
<html>
В ответ разбойники только смеются. "Мы и так возьмем все твое золото! Наверняка в твоем мешке есть что-то более ценное, раз ты так легко готов расстаться с ним!" Вы понимаете, что пощады ждать не приходится и решаете <a href=btn:123>драться</a>.
</html>

end

:427
proc changedress
<html>
Дверь заперта. Если у вас есть <a href="javascript: useItem2('Золотой свисток',427,156)">золотой свисток</a>, можете попытаться им воспользоваться. Иначе или попробуйте <a href=btn:597>выломать дверь</a>, или уходите через любую другую: <a href=btn:398>правую</a>, <a href=btn:206>левую</a> или <a href=btn:350>среднюю</a>.
</html>

end

:428
<script>
expr_action =  "if (itemExists('Ловкость')) {removeItem('Ловкость'); AgilityFactor = 2; readParagraph('647'); void(0) }";
expr_action2 = "if (itemExists('Слабость')) {removeItem('Слабость'); enemyPowerFactor = -2; readParagraph('647'); void(0) }";
</script>
<html>
Можете воспользоваться заклятиями <a href="javascript: eval(expr_action)">Ловкости</a> или <a href="javascript: eval(expr_action2)">Слабости</a> или просто <a href=btn:647>сражаться мечом</a>. Или, если есть такое желание, обратитесь к заклятию <a href="javascript: useItem2('Огонь', 499)">Огня</a>.
</html>

end

:429
<html>
Вы достаете ожерелье из топазов, и оно начинает мягко мерцать в темноте. "Это то, что мы искали все эти годы", - слышится все тот же голос. Невидимая рука бережно принимает у вас драгоценность, и она исчезает. Через несколько секунд голос продолжает: "Ты свободен, щедрый рыцарь". Рука освещает вам выход. Дверь оказывается совсем не там, где вы думали, и вы с облегчением <a href=btn:301>открываете ее</a>.
</html>

end

:430
<html>
Все обходится благополучно, если не считать того, что дорога вскоре кончается и вперед ведет узкая тропинка, почти незаметная среди травы. Но обратно вернуться уже нельзя (не тратить же заклятие Левитации, если даже оно у вас есть), и вы <a href=btn:181>идете до самого конца</a>.
</html>

end

:431
<html>
Оборотень говорит вам, что, если идти все время прямо, можно достичь ворот Черного замка, и скрывается в лесу. Вы продолжаете свой путь по дороге, как вдруг огромное дерево со зловещим треском наклоняется и… <a href="javascript: CheckLuck('59', '636')">ПРОВЕРЬТЕ СВОЮ УДАЧУ</a>.<!-- Если вы удачливы, то 59, если нет - 636.-->
</html>

end

:432
<html>
Дорога заводит вас все глубже и глубже в лес. Наступает вечер. Положившись на удачу, ночуете под сенью нависающих над дорогой деревьев и продолжаете путь с рассветом. Вы уже начинаете немного уставать от этих бесконечных развилок, от каждой из которых может зависеть ваша жизнь: ведь выбор приходится делать вслепую. Вот опять налево отходит тропинка, и вы снова в раздумье: <a href=btn:421>свернуть на нее</a> или продолжать идти <a href=btn:73>прямо</a>?
</html>

end

:433
<html>
Внутри ларя вы находите только большую бутыль, наполненную голубой жидкостью. Рискнете <a href=btn:500>выпить ее</a>, <a href="javascript: addItem('Бутыль с голубой жидкостью')">возьмете с собой</a><!-- (+ 103)--> или предпочтете побыстрее <a href=btn:416>уйти</a> - ведь в любую минуту сюда могут зайти воины чародея?
</html>

end

:434
<html>
В конце лестницы - огромная белая дверь с черным силуэтом замка. Она гораздо уместней смотрелась бы в конце шикарной парадной лестницы, чем той, по которой вы спустились. Дверь без труда открывается, и вы попадаете в прихожую. Вдоль стен стоят красивые резные диваны. Вероятно, здесь когда-то было нечто вроде приемной. Но сейчас везде толстый слой пыли, на диванах давно уже никто не сидел. Из приемной ведет пять дверей. Перед вами едва ли не самый сложный выбор за все путешествие. Три двери гладкие: правая, левая и средняя. Но на двух других есть рисунки. На второй справа нарисована короткая стрела с белым оперением, и под ней в дереве вырезано какое-то углубление. На второй слева - золотой орел, под ним тоже виднеется углубление в форме орла. Если у вас есть <a href="javascript: useItem2('Стрела с белым оперением', 434, 137)">белая стрела</a>, вы можете попробовать открыть дверь с соответствующим рисунком, если есть <a href="javascript: useItem2('Медальон с орлом', 434, -72)">медальон с золотым орлом</a>, сделайте то же самое. Если же нет, то эти двери останутся неприступны, какие бы усилия вы ни прилагали. Однако у вас все же останется выбор: войти <a href=btn:478>в правую</a> дверь, <a href=btn:603>левую</a> или <a href=btn:282>в среднюю</a>.
</html>

end

:435
<html>
Подойдя к двери, ведущей на лестницу, вы обнаруживаете, что она не заперта, и <a href=btn:544>спускаетесь вниз</a>.
</html>

end

:436
<html>
Второй рыцарь настолько поражен вашим мастерством, что не имеет ни малейшего желания разделить судьбу своего товарища. Он подхватывает под уздцы коня с трупом, и они уносятся обратно по дороге. Во время боя из кармана первого рыцаря что-то выпало, вы наклоняетесь и видите, что в пыли лежит <a href="javascript: addItem('Перо павлина')">перо павлина</a><!-- (+ 206)-->. Можете взять его с собой. Вряд ли стоит сомневаться, что рыцарь не простит вам смерти своего товарища. А это значит, что он вот-вот может вернуться с подмогой, так что едва ли разумно идти дальше по этой дороге навстречу своей смерти. Вы решаете вернуться на развилку и <a href=btn:338>пойти направо</a>, на юго-восток.
</html>

end

:437
param=2
proc removeStrength
<html>
Несколько часов проходят без приключений, и вы немного жалеете, что потеряли столько времени, перебираясь через озеро. Ведь цель вашего путешествия от этого не приблизилась. Вы<!-- устали (потеряйте 2 СИЛЫ)--> потеряли много сил и нуждаетесь в отдыхе, но понимаете, что надо торопиться. Наконец дорога раздваивается. Изберете путь <a href=btn:531>направо</a> или <a href=btn:72>налево</a>?
</html>

end

:438
<html>
Торговец желает удачной и приятной прогулки, пряча от вас улыбку. Вы понимаете, что он не поверил вам, но теперь остается только попрощаться и <a href=btn:106>уйти</a>.
</html>

end

:439
<html>
"В какую же игру вы играете?" - недоверчиво спрашивает Орк. Надо же, об этом-то вы и не подумали. Решать приходится мгновенно, а на ум приходят только две игры. Скажете, что вы играете <a href=btn:259>в карты</a> или <a href=btn:585>в кости</a>?
</html>

end

:440
<html>
Коридор делает несколько поворотов и раздваивается. Пойдете <a href=btn:348>направо</a> или <a href=btn:61>налево</a>?
</html>

end

:441
param=3
proc removeStrength
<html>
В темноте вы сбиваетесь с дороги. Всю ночь приходится наугад продираться через чащу<!-- (потеряйте 3 СИЛЫ)-->. К утру <a href=btn:378>выходите на какую-то дорогу</a>, но понятия не имеете, куда идти.
</html>

end

:442
param=2
proc removeStrength
<html>
Вы идете всю ночь - за осторожность приходится платить усталостью<!-- (потеряйте 2 СИЛЫ)-->. К утру <a href=btn:119>выходите на поляну</a>, которую во всех направлениях пересекает множество следов каких-то крупных животных.
</html>

end

:443
<html>
Торговец предлагает вам присесть у камина и неторопливо рассказывает, куда идут дороги от его дома. Справа в лесу Застава - слуги волшебника сторожат дорогу, и никто не может пройти мимо них незамеченным. Если же избрать путь, ведущий налево, придете к небольшой хижине, в которой, насколько он знает, живет какой-то странненький старичок. Но это не более чем слухи: сам торговец по этой дороге ни разу не ходил и с обитателями хижины не встречался. Напоследок он рассказывает, что Черный замок действительно существует, но до него еще очень далеко. Проникнуть туда гораздо труднее, чем пройти через лес, и здесь он ничем не может помочь. Единственное, что можно посоветовать: идти в открытую лучше, чем прятаться. Когда однажды он пытался войти в замок со своими товарищами (его туда так и не пустили), то видел, как стража извлекала из воза с сеном какого-то человека, пытавшегося проникнуть в цитадель незамеченным. Расправа была коротка и жестока. Больше словоохотливый торговец ничего не знает, и вам остается только распрощаться и <a href=btn:106>покинуть лавку</a>.
</html>

end

:444
<html>
Перстень с изумрудом очень красив, но как он может помочь разбудить Принцессу? Может быть, он и может когда-нибудь пригодиться, но, очевидно, не сейчас. Внезапный шум, который с каждой секундой усиливается, заставляет <a href=btn:502>насторожиться</a>.
</html>

end

:445
<html>
Лес светлеет. Кажется, что вы не забираетесь все глубже и глубже в чащу, не приближаетесь к его середине, а направляетесь к мирной, спокойной опушке, где светит ласковое весеннее солнце и нет никаких опасностей. А вдруг и правда дорожки и тропы запутали вас, и через несколько мгновений вы покинете лес: ведь это будет означать, что все придется начинать сначала. Но внезапно дорога резко поворачивает, и <a href=btn:102>деревья расступаются</a>.
</html>

end

:446
<html>
Несколько раз вы дергаете за ручку двери, но безуспешно, и понимаете, что <a href=btn:328>незамеченным пройти не удастся</a>.
</html>

end

:447
<html>
Вы пытаетесь успокоить медведицу, ласково поговорив с ней, но она продолжает надвигаться, не слушая никаких уговоров. И тут вам совершенно случайно приходит в голову мысль спросить, не надо ли ей чем-нибудь помочь. Зверь с удивлением останавливается, смотрит умными черными глазами и показывает лапой на медвежонка. Вы подходите ближе и понимаете, что он болен. Но ведь вы не лекарь. Есть только один способ помочь медведице: истратить заклятие Исцеления. Если оно у вас есть, можете <a href="javascript: useItem2('Исцеление', 62)">наложить его на медвежонка</a>. Если же нет или не хотите, то вы обманули надежды медведицы, и придется <a href=btn:529>драться</a>.
</html>

end

:448
<html>
Крестьянин говорит, что и сам может снабдить вас припасами. Для этого надо всего лишь зайти к нему домой. Однако вы не решаетесь заходить в хату, и он, пожав плечами, выносит во двор все, что может предложить для продажи. Тут вас ожидает сразу два сюрприза. Во-первых, еда совсем не такая, какую обычно можно встретить в деревне. Перед вами лежит <a href="javascript: buyItem('Ананас', 2)">ананас</a> (который стоит 2 золотых и восстановит 3 СИЛЫ), <a href="javascript: buyItem('Банан', 4)">банан</a> (4 золотых - 6 СИЛ), <a href="javascript: buyItem('Лимон', 2)">лимон</a> (2 золотых - 2 СИЛЫ). Но он притащил еще и кучу вещей, которые, как он считает, могут пригодиться в дороге. Это искусно вырезанный из дерева <a href="javascript: buyItem('Кораблик', 1)">кораблик</a><!-- (- 46)--> (крестьянин просит за него всего 1 золотой), <a href="javascript: buyItem('Фигурный ключ', 2)">фигурный ключ</a><!-- (- 156)--> (2 золотых), <a href="javascript: buyItem('Попона', 5)">попона для лошади</a><!-- (+ 59)--> (5 золотых), небольшой <a href="javascript: buyItem('Блестящий кусок металла', 3)">кусочек металла</a> необычной формы<!-- (- 77)--> (3 золотых), сделанная из перламутра <a href="javascript: buyItem('Перламутровая устрица', 8)">устрица</a><!-- (+ 193)--> (8 золотых) и <a href="javascript: buyItem('Серебряный браслет', 4)">серебряный браслет</a><!-- (+ 76)--> (4 золотых). Сделайте необходимые покупки и покиньте деревню по одной из двух дорог: <a href=btn:235>на юг</a> или <a href=btn:2>на запад</a>.
</html>

end

:449
<html>
«В какую же игру ты собираешься с ним играть?» — Орк недоверчиво смотрит на вас. Вы не ожидали такого вопроса, и на языке вертятся только две игры. Скажете, что вы играете в <a href=btn:396>карты</a> или в <a href=btn:271>кости</a>?	
</html>

end

:450
<html>
После встречи с Лесовичком вы идете не более четверти часа, как дорога выводит вас на перекресток. Вы можете либо свернуть по тропинке <a href=btn:292>налево</a>, пойти <a href=btn:51>прямо</a>, или попробовать свернуть <a href=btn:586>направо</a>, если вам кажется, что так вы скорее достигнете цели.
</html>

end

:451
proc changedress
<html>
Вы открываете сосуд, и комната наполняется неизвестным зеленоватым газом. К счастью, он не ядовит и быстро рассеивается. Однако теперь очевидно, что брать сосуд с собой не имеет ни малейшего смысла. Что вы сделаете дальше: возьмете <a href=btn:253>стеклянный сосуд</a> или <a href=btn:39>выйдете из комнаты</a>?
</html>

end

:452
<html>
Вы спускаетесь по лестнице. Она заканчивается дверью, которую вы осторожно <a href=btn:10>открываете</a>.
</html>

end

:453
<html>
К счастью, разбойники поверили вам и соглашаются пропустить, не только ничего не взяв, но и любезно преподнеся на прощание <a href="javascript: addItem('Камея с изображением дракона')">камею с изображением дракона</a><!-- (- 28)-->. Их предводитель не сомневается, что оно может пригодиться в дороге. Пока вы приходите в себя после пережитого, разбойники бесшумно скрываются в лесу. А вам надо <a href=btn:46>решать, куда направиться дальше</a>, ведь вы так растерялись, что забыли спросить их об этом.
</html>

end

:454
<html>
Вы уже собираетесь уходить, когда замечаете, что в траве что-то блестит. Наклонившись, поднимаете необычный кулон: Подвешенное на цепочке, на вас хмуро смотрит сделанное из неизвестного металла лицо – не иначе как какого-то древнего бога. Связываться с неведомыми силами не очень-то хочется, к тому же вы не знаете, кто обронил эту вещицу. Если это сделал кто-то из слуг волшебника, она может принести вам несчастье, если путник – не исключено, что при случае поможет вам, а то и спасет жизнь. Или это сам дракон отплатил добром за добро? Вы внимательно рассматриваете кулон, но ничего не происходит. Если хотите, можете <a href="javascript: addItem('Лицо древнего бога')">повесить его на шею</a><!--(+ 217)--> и <a href=btn:108>идти дальше</a>.
</html>

end

:454.1
<html>
Кто бы мог подумать, что вы способны победить дракона! Вы уже собираетесь уходить, когда замечаете, что в траве рядом с местом вашего боя что-то блестит. Наклонившись, поднимаете необычный кулон: Подвешенное на цепочке, на вас хмуро смотрит сделанное из неизвестного металла лицо – не иначе как какого-то древнего бога. Связываться с неведомыми силами не очень-то хочется, к тому же вы не знаете, кто обронил эту вещицу. Если это сделал кто-то из слуг волшебника, она может принести вам несчастье, если путник – не исключено, что при случае поможет вам, а то и спасет жизнь. Вы внимательно рассматриваете кулон, но ничего не происходит. Если хотите, можете <a href="javascript: addItem('Лицо древнего бога')">повесить его на шею</a><!--(+ 217)--> и <a href=btn:108>идти дальше</a>.
</html>

end

:455
<html>
"Трое из Эвенло", - говорите вы старику. Он непонимающе смотрит на вас. "Трое из Эвенло", - повторяете вы. Некоторый проблеск понимания появляется на его лице. "Сейчас я принесу то, что вам нужно", - слышится в конце концов в ответ и библиотекарь <a href=btn:645>скрывается за стеллажами</a>.
</html>

end

:456
<script>
if (newGame) modifyGold(-2); 
</script>
<html>
Вы отдаете деньги, и проводник с радостью прячет их в небольшой сундучок, стоящий в углу. После этого вы с ним выходите из дома, проходите через сад и <a href=btn:637>углубляетесь в лес</a>. По дороге ваш спутник весело болтает: у него подозрительно хорошее настроение. Впрочем, наверно, ему нечасто удается подзаработать в такой глухомани.
</html>

end

:457
<html>
У вас в руках амулет с зашитой внутри медвежьей шерстью. Один раз за все путешествие с его помощью сможете позвать медведицу, чтобы она помогла победить врага. Ее Ловкость - 8, а Сила - 10. Она будет драться с вашим врагом по тем же правилам, по которым сражается Копия, и, победив его, вернется обратно в берлогу. Если она погибнет, принимать эстафету придется вам. Амулетом можно воспользоваться в любом бою, но только за пределами Черного замка. Там амулет бессилен. Поблагодарив медведицу, вылезаете из берлоги и <a href=btn:44>идете дальше</a> по дороге, уходящей с поляны в лес.
</html>

end

:458
<script>
if (Gold < 3) { readParagraph('137'); alert('У Вас не хватает денег!'); } else modifyGold(-3);
</script>
<html>
Старуха подбирает монеты, кланяется и растворяется в воздухе. Но перед вами две двери. В какую из них вы пойдете: в <a href=btn:252>противоположную от входа</a> или в ту, что <a href=btn:542>справа</a>?
</html>

end

:459
<html>
Открыв дверь, попадаете в просторную комнату. На этот раз перед вами гарем волшебника. Жены чародея с удивлением смотрят на вас, но по их лицам не совсем понятно, насколько часто Зеленые рыцари заходят в эти покои. Всего несколько секунд вы можете потратить на то, чтобы оглядеться. Ковры и зеркала, удобные мягкие диваны, картины в золотых рамах - это самая богатая комната из всех, что вы встречали. Скорее всего Барлад Дэрт редко выходит из своего кабинета, поэтому в других помещениях вам встречалось только самое необходимое. Но здесь он, несомненно, бывает часто. В гостиной есть еще одна дверь в противоположной стене. Теперь решайте: <a href=btn:251>пройдете через комнату</a> и пойдете дальше по коридору, ни слова не сказав и надеясь, что Зеленый рыцарь имеет право это сделать, или <a href=btn:157>поговорите с женщинами</a>?
</html>

end

:460
<html>
Вы показываете заключенному серебряный свисток. Он подходит ближе к решетке и рассказывает о том, что когда-то был камердинером мага, а серебряный свисток - символ его должности. Свисток украли, и разгневанный волшебник бросил его в темницу. Камердинер умоляет вернуть ему свисток. <a href=btn:587>Сделаете это</a> или откажетесь и уйдете? Коридор заканчивается тупиком, так что в этом случае придется вернуться обратно на развилку и выбрать, двинетесь ли вы <a href=btn:537>направо</a> или <a href=btn:348>налево</a>.
</html>

end

:461
<html>
По дороге, которую вы выбрали, долгое время идете без приключений. Начинает смеркаться. Хотите <a href=btn:340>поискать себе убежище на ночь</a> или <a href=btn:442>продолжите свой путь</a> при свете луны?
</html>

end

:462
<html>
Дорога все больше отклоняется вправо. Если вы еще ориентируетесь в лесу, то без труда определите, в нужную сторону она идет или нет. В конце концов выходите на небольшую поляну, от которой влево ведет какая-то тропинка. Вдруг что-то маленькое и серое в траве привлекает ваше внимание. Видя, что это заяц, медленно подходите поближе. Если вы голодны, то можете попытаться <a href=btn:178>поймать его</a> и восстановить свои силы, если же нет - <a href=btn:333>продолжайте свой путь</a>.
</html>

end

:463
<html>
Гоблин не успевает даже крикнуть. Быстрая реакция и ловкость не подвели вас, и меч пригвоздил врага к косяку. Хотите <a href=btn:158>войти в сторожку</a> и иметь дело с остальными или лучше не будете больше искушать судьбу и <a href=btn:308>направитесь к высокому зданию в центре двора</a>?
</html>

end

:464
<html>
Вы говорите, что главная ваша цель - разбудить и освободить Принцессу. Услышав это, старичок вызывается вам помочь. Он предупреждает, что хочет дать один совет, а один предмет обменять на что-то, что у вас, конечно же, есть. Пока не слишком понятно, но вы соглашаетесь: почему бы не послушать, что он предложит. Совет таков: "С большой высоты больнее падать. Напоследок держись поправее. Понял?". Вы честно признаётесь, что не поняли. “Ну, ничего, со временем поймёшь, - вновь расплывается в улыбке старичок. – “Есть у меня для тебя ещё кое-что…”
Подставив табурет, он добирается до одной из верхних полок, снимает оттуда шкатулку и бережно достаёт из неё перстень с великолепным бриллиантом. Но ценность его не в камне, предупреждает охотник, а в том, что он может открыть многие двери в замке. Однако за перстень старичок просит у вас любое заклятие. <a href=btn:600>Согласитесь поменяться</a> или <a href=btn:464.1>откажетесь?</a>
</html>

end

:464.1
<html>
“Что ж, приятно было познакомиться, – говорит старичок. – Ну что, ещё поболтаем? Или поможешь мне поохотиться? Вот только с обычной охотой я и без тебя справляюсь, а для этой, заветной, мне бы опять колдовство не помешало. Можешь ты, к примеру, мил человек, какую-никакую иллюзию сотворить?” Если у вас есть заклятие Иллюзии и вы не против составить хозяину дома компанию на охоте, <a href="javascript: useItem2('Иллюзия', 464.2)">поделитесь с ним</a>. Если нет, <a href=btn:464.3>хотите ещё побеседовать с охотником</a> или <a href=btn:55>поблагодарите его и уйдёте?</a>
</html>

end

:464.2
<html>
Услышав ваше согласие, старичок не скрывает своей радости и манит за собой в лес. По дороге он рассказывает вам, что уже полтора года пытается подстрелить одного оленя – и никак не выходит! Что он только не пробовал, даже с ночи в засаду садился, тому всё нипочём. Вы пробираетесь сквозь чащу не меньше пары часов и успеваете не один раз пожалеть, что ввязались в эту историю. Наконец охотник делает вам знак не шуметь и шёпотом просит создать иллюзию лесного пожара. Этого ещё не хватало, но делать нечего, и вы творите нужное заклятие. Меж тем старичок снимает с плеча лук, кладёт стрелу на тетиву и растворяется в лесу. Проходит ещё четверть часа, и охотник на весь лес взрывается проклятиями. Вернувшись, старичок негодует: оленю вновь удалось уйти! Ну, не судьба. На память об этом приключении он дарит вам <a href="javascript: addItem('Шкура оленя')">шкуру оленя</a>, выводит на какую-то дорогу, машет рукой в сторону Чёрного замка и <a href=btn:60>исчезает в лесу, крепко пожав руку на прощание.</a>
</html>

end

:464.3
<html>
<a href="javascript: CheckCharm('464.4', '464.5')">ПРОВЕРЬТЕ СВОЕ ОБАЯНИЕ</a>.
</html>

end

:464.4
secret_door=1
<html>
Видно, что охотник рад возможности хоть с кем-то поговорить. Рассказав вам пару баек и убедившись, что имеет дело с благодарным слушателем, он раскрывает самый главный секрет, который поначалу хотел оставить при себе. В замок можно войти через потайную дверцу. Она откроется, если нажать на третий камень слева от дверной ручки. Если когда-нибудь вы обнаружите в стене потайную дверцу,<!--прибавьте 28 к номеру параграфа, на котором будете находиться--> можете воспользоваться этой информацией – и проникнете в замок. А теперь решайте: <a href=btn:55>поблагодарите и уйдёте</a> или <a href="javascript: useItem2('Иллюзия', 464.2)">у вас есть заклятие Иллюзии и вы готовы составить старичку компанию на охоте?</a>
</html>

end

:464.5
<html>
Охотнику явно не хватает возможности хоть с кем-то поговорить. Однако после его попыток рассказать пару совершенно неправдоподобных охотничьих баек, разговор постепенно затухает, и <a href=btn:55>вы чувствуете, что пора уходить.</a>
</html>

end

:465
<html>
Несколько соседних клеток пусты. Вы быстро проходите мимо них и <a href=btn:140>выходите в узкий коридор</a>.
</html>

end

:466
<html>
Вам удается пересечь пустое пространство без потерь, если не считать того, что вы бьетесь головой о противоположную стенку. Стена продолжается, и вы идете вдоль нее <a href=btn:352>дальше</a>.
</html>

end

:467
proc changedress
<html>
Вы попадаете в маленькую проходную комнатку и толкаете следующую дверь. Она не заперта, и вы попадаете в огромную ярко освещенную парадную залу. Догадаться о ее предназначении нетрудно. Это столовая. Огромный дубовый стол тянется от одного конца до другого, по краям стоят лавки. С торца стола на вас смотрит огромный пустой черный трон, украшенный короной. Но сейчас столовая пуста, и вы можете не торопясь оглядеть ее, если только не боитесь, что кто-нибудь войдет. У противоположной от входа стены - невысокий изящный буфет. В дальнем углу - люк. Из комнаты ведут четыре двери (кроме той, в которую вы вошли). Три из них в стене справа и одна - рядом со входом. Дверь за спиной, как обычно, намертво захлопывается. Что вы сделаете? Осмотрите <a href=btn:25>буфет</a>, <a href=btn:224>люк</a> или <a href=btn:22>трон</a>? Выйдете из столовой? Тогда через какую дверь: <a href=btn:427>в той же стене</a>, в которой был вход, или через одну из трех других - <a href=btn:398>правую</a>, <a href=btn:206>левую</a> или <a href=btn:350>среднюю</a>?
</html>

end

:468
<html>
Зеркальце нравится хозяйке гарема, но оно не настолько ценно, чтобы ради него женщина выдала вам какую-нибудь тайну. Однако она уходит в свою комнату и не мешает вам <a href=btn:255>поговорить с женами мага</a> или <a href=btn:251>выйти из гарема в следующий коридор</a>.
</html>

end

:469
param=2
proc removeStrength
<script>
desc = 'ЛЕВ'; expr_action = 'fightStart(9,14,desc); afterBattle("265")';
</script>
<html>
"Ты обманул меня, - рычит Лев. - И не знаешь нужных слов". Его сильная лапа наносит удар прежде, чем вы успеваете защититься<!-- (потеряйте 2 СИЛЫ)-->. Теперь волей-неволей придется <a href="javascript: eval(expr_action)">пробиваться мечом</a><!-- - вернитесь на 257 и сражайтесь-->.
</html>

end

:470
<html>
Вы кидаете Гарпии зеркальце, и чародей не может скрыть своего разочарования. Кто бы мог подумать, что такая уродина уползет в угол наслаждаться своим отражением и <a href=btn:388>оставит вас в покое</a>.
</html>

end

:471
<html>
Вы срываете одно из перьев лука, и оно на ваших глазах превращается в <a href="javascript: addItem('Черная стрела')">черную стрелу</a><!-- (+ 55). Можете нарвать стрел еще и взять с собой столько, сколько захотите, однако учтите, что каждая будет занимать одно место в вашем заплечном мешке-->. После этого вы <a href=btn:80>выходите</a> из комнаты, не дожидаясь, пока в ней появится разъяренный садовник.
</html>

end

:472
<html>
Осторожно приближаетесь к хрустальной кровати с правой стороны и склоняетесь над Принцессой. Но в этот момент в ногу пребольно вонзается что-то острое. Это металлический шип, которого вы не заметили. <a href="javascript: CheckLuck('588', '391')">ПРОВЕРЬТЕ СВОЮ УДАЧУ</a>.<!-- Если вы удачливы, то 588, если же нет, то 391.-->
</html>

end

:473
<script>
if (newGame) CheckLuck();
</script>
<html>	
Вы поступили правильно с точки зрения здравого смысла, но забыли о том, что убивать сдавшихся в бою не слишком порядочно. Бог войны Темес недоволен вами<!--: киньте кубик и зачеркните соответствующий квадрат УДАЧИ (если он уже зачеркнут, вам повезло)--></a>. После этого вы переступаете через трупы Орков и <a href=btn:100>входите в ворота</a>.
</html>

end

:474
param=1
proc removeAgility
param=2
proc removeStrength
proc changedress
<html>
Вы приподнимаете крышку большого сундука, но она вырывается из рук и со всей силой бьет по пальцам.<!-- Потеряйте 1 ЛОВКОСТЬ и 2 СИЛЫ.--> Хотите <a href=btn:644>еще раз попробовать</a> поднять крышку или займетесь одним из двух других сундуков - <a href=btn:540>средним</a> или <a href=btn:380>маленьким</a>? А может быть, лучше уйти, <a href=btn:39>вернувшись в большую залу</a>?
</html>

end

:475
awaken=1
<html>
Вы достаете золотой апельсин и разрезаете его. После этого подносите одну из долек к губам Принцессы, и на них проливается несколько капель волшебного сока. Румянец появляется на ее щеках, девушка глубоко вздыхает и садится на кровати. Она сразу же вспоминает, что с ней произошло, и первым делом спрашивает, жив ли ее мучитель - Барлад Дэрт.<!-- Если волшебник еще жив, то 589, если же мертв, то 655.--> <a href=btn:589>Вы отвечаете ей.</a>
</html>

end

:476
<html>
Заклятие действует, <a href=btn:347>но…</a>.
</html>

end

:477
param=10
proc addGold
<script>
if (newGame) CheckLuck();
</script>
<html>
Торговец мертв, и вы быстро осматриваете его лавку. После недолгих поисков находите 10 золотых. Кроме того, можете взять с собой любой товар, который он предлагал, но вы не купили<!--. Загляните еще раз в параграф 176 и выберите то, что понравится--> (<a href="javascript: addItem('Лепешки от укуса змеи')">магические лепешки</a>, <a href="javascript: addItem('Мандарин')">мандарин</a>, <a href="javascript: addItem('Яблоко')">яблоко</a>, <a href="javascript: addItem('Банан')">банан</a>, <a href="javascript: addItem('Мешочек с лепестками розы')">мешочек с лепестками розы</a>, <a href="javascript: Sack_MaxAmount = 9">заплечный мешок</a>). Но вы убили честного человека<!-- - киньте кубик и зачеркните соответствующий квадрат УДАЧИ (если он к этому времени уже зачеркнут, считайте, что вам крупно повезло)-->, что в будущем вряд ли принесет вам удачу. Теперь <a href=btn:106>уходите</a>.
</html>

end

:478
<html>
Дверь открывается. Перед вами широкий коридор, стены которого выкрашены в не слишком приятный для глаза грязно-черный цвет. <a href=btn:320>Пойдете по нему</a> или вернетесь и <a href=btn:434>выберете другую дверь</a>?
</html>

end

:479
<html>
Вы вспоминаете про серебряный сосуд, в который так и не заглянули. Быстро достаете его из заплечного мешка и готовитесь открыть. Однако Зеленый рыцарь умоляет этого не делать, разрешая пройти. <a href=btn:590>Откроете крышку</a>, несмотря на его уговоры, или достаточно того, что вы как следует напугали стража и теперь можете <a href=btn:392>идти дальше</a>?
</html>

end

:480
instr str=
if message=1 then str="А может быть, вы хотите <a href=btn:455>что-то передать</a> старичку?"
<html>
Вы оказываетесь в библиотеке. Все стены заставлены шкафами с книгами. Путь вам преграждают многочисленные стеллажи, между которыми петляет узкий проход. Откуда-то из книжных завалов выныривает и хозяин. Это старик с маленькими хитрыми глазками, прикрытыми круглыми очками в металлической оправе. Старичок очень сутулится и больше похож не на человека, а на одну из тех крыс, которых вы только что видели. Он не безумно любезно спрашивает, что вам здесь надо? Сохраняя полное спокойствие, отвечаете, что хотели бы что-нибудь почитать. Какую книгу вы попросите: <a href=btn:45>о Зеленых рыцарях</a>, <a href=btn:345>о самом волшебнике</a>, <a href=btn:208>о Принцессе</a> или скажете, что вы передумали и <a href=btn:591>уйдете из библиотеки</a>? #str$
</html>

end

:481
param=2
proc removeStrength
<html>
Вам удается скрыться от рыцаря, только убежав в глубь леса. Естественно, на коне он не сможет скакать за вами по такому бурелому. Но куда же идти дальше? Передвигаться наугад по бездорожью очень тяжело<!-- (потеряйте 2 СИЛЫ)-->, но в конце концов вы <a href=btn:60>выходите на какую-то дорогу</a>.
</html>

end

:482
<html>
Средний коридор не подводит вас. Вскоре он упирается в <a href=btn:241>дверь</a>, на которой вы видите герб волшебника: Черный замок на белом поле.
</html>

end

:483
<script>
expr_action = 'fightStart(14,12,"БАРЛАД ДЭРТ"); afterBattle("169")';
</script>
<html>
Барлад Дэрт смотрит на ваше оторопевшее лицо, потом начинает хохотать. Это длится довольно долго - затянувшаяся пауза уже начинает надоедать. Неужели ничего нельзя сделать? В отчаянии вы <a href="javascript: eval(expr_action)">бросаетесь на волшебника</a> с голыми руками. Он настолько не ожидает этого, что даже не успевает встать из-за стола, но через несколько мгновений как рыба выскальзывает из ваших рук. "Ну что ж, - говорит он задумчиво, - придется тебя проучить. Я буду драться с тобой". В руках у него оказывается меч, клинок которого светится в полутьме кабинета. <!--	Если вам удается победить мага, то 169.-->
</html>

end

:484
param=3
proc addGold
<html>
Увы, в сторожке нет ничего интересного. Пить брагу, которой угощались Гоблины, нет ни малейшего желания: стоит только ее понюхать, как уже ясно, что на пользу это не пойдет. На столе лежат <a href="javascript: addItem('Стаканчик с костями')">стаканчик с костями</a><!-- (- 78)--></a> и вещи, на которые шла игра: <a href="javascript: addItem('Бронзовый свисток')">бронзовый свисток</a><!-- (- 214)--></a>, <a href="javascript: addItem('Лист вендории')">лист вендории</a><!-- (+ 67)--></a>, 3 золотых и <a href="javascript: addItem('Ножны')">ножны</a><!-- (+ 223)--></a>. Возьмите все, что понравилось. Времени и так уже потрачено более чем достаточно, и вы идете по направлению <a href=btn:308>к высокому зданию в центре двора</a>.
</html>

end

:485
<html>
Быстрыми шагами вы приближаетесь к возвышению. Но к кровати можно подойти и справа, и слева. С какой же стороны это сделаете вы? <a href=btn:472>Справа</a> или <a href=btn:275>слева</a>?
</html>

end

:486
<html>
Повар отсылает поварят готовить обед и вытирает руки об фартук. Он не прочь поболтать, но подумали ли вы, о чем стоит с ним поговорить?<br>
<a href=btn:570>Спросите про сундук в углу?</a><br>
<a href=btn:91>Попросите накормить вас?</a><br>
<a href=btn:295>Расспросите о замке?</a>
</html>

end

:487
<script>
expr_action = 'fightStart(10,6,"ПЕРВЫЙ ОРК"); battleEndCondition("fight.spendRounds == 3"); afterBattle("487.1", "&& enemy [0].Strength != 0", "487.2")';
expr_action2 = 'if (itemExists("Копия")) {createCopy(); eval(expr_action) }';
</script>
<html>
Первым нападает Орк с мечом, который расспрашивал вас. Если хотите, воспользуйтесь заклятием <a href="javascript: eval(expr_action2)">Копии</a> и <a href="javascript: eval(expr_action)">сражайтесь</a>.
<!--Если убили его за три раунда атаки, то сражайтесь с двумя остальными, тем более что их Лояльность понизится от этого на две единицы. Если же нет, то через три раунда оставшиеся два Орка приходят на помощь своему предводителю, и вам придется биться с тремя сразу.	
	ВТОРОЙ ОРК
	Ловкость 7 Сила 8 Лояльность 10
	ТРЕТИЙ ОРК
	Ловкость 7 Сила 8 Лояльность 10
Как только Лояльность любого из них станет равна 3, он бросит оружие и сдастся. В этом случае после окончания боя — 638. Если же все враги мертвы, а вы по счастливой случайности живы, то можете переступить через тела своих поверженных противников и войти в ворота — 100.-->	
</html>

end

:487.1
<script>
expr_action = 'fightStart(7,8,"ВТОРОЙ ОРК",7,8,"ТРЕТИЙ ОРК"); setLoyalty(8, 8, "end", "638"); afterBattle("100")';
</script>
<html>
Первый Орк убит - теперь <a href="javascript: eval(expr_action)">сражайтесь</a> с двумя остальными.
</html>

end

:487.2
<script>
expr_action = 'fightStart(10,enemy [0].Strength,"ПЕРВЫЙ ОРК",7,8,"ВТОРОЙ ОРК",7,8,"ТРЕТИЙ ОРК"); setLoyalty(0, 10, 10, "end", "638"); afterBattle("100")';
</script>
<html>
Оставшиеся два Орка приходят на помощь своему предводителю, и вам придется <a href="javascript: eval(expr_action)">биться</a> с тремя сразу.
</html>

end

:488
<html>
Дракон с удивлением смотрит на камею, которую вы достаете. Вам повезло: он коллекционирует свои изображения и с удовольствием принимает подарок, после чего <a href=btn:454>пропускает вас</a>, взлетая с поляны и скрываясь за облаками.
</html>

end

:489
<html>
За левой дверью - узкий коридор. Затхлый неприятный воздух сразу навевает мысли о смерти, запустении, тлене. Коридор упирается в стену. Вы пришли в тупик. Но в правой стене две двери. Откроете <a href=btn:501>правую</a> или <a href=btn:547>левую</a>?
</html>

end

:490
<html>
Вы выходите на развилку. Дровосеки явно пришли с этой стороны, но по какой из дорог? Да и стоит ли вам выбирать дорогу, по которой они пришли? Решайте, куда вы пойдете: <a href=btn:38>направо</a> или <a href=btn:214>прямо</a>?
</html>

end

:491
<html>
<a href="javascript: CheckLuck('631', '593')">ПРОВЕРЬТЕ СВОЮ УДАЧУ</a>.
</html>

end

:492
<html>
 "Ну, так я помогу тебе выбраться отсюда!" - радостно потирая руки, говорит старичок-лесовичок. И прежде чем вы успеваете отказаться от столь неожиданной "помощи", он делает взмах рукой и - все вокруг исчезает. Потом лес опять возникает, но перед вами уже совсем другое место, да и дороги никакой нет. Вы сидите на муравейнике на краю большой поляны, от которой идет единственная дорога. Вам ничего не остается, как встать, вытряхнуть муравьев из одежды и <a href=btn:151>пойти по ней</a>.
</html>

end

:493
proc lose
<html>
В этот момент за дверью раздается топот кованых сапог. Волшебник мертв, но ведь его люди не знают об этом. Очевидно, он сумел незаметно подать сигнал тревоги. Вы оборачиваетесь, готовясь к бою, и принимаете боевую стойку, выставив меч вперед. Когда дверь распахивается, становится понятно, что врагов слишком много, - нападают сразу двенадцать Зеленых рыцарей во главе с Бароном. Двух из них удается убить, но силы слишком неравны. Только после того, как ваш труп будет унесен из кабинета подоспевшими Орками, они заметят, что их повелитель мертв, но вам это уже не поможет. Барлад Дэрт пал, жители Элгариола могут спать спокойно, но Король так и не увидит своей дочери. Ведь вы не успели помочь ей, а через несколько часов скрепляющие цитадель чары падут, Черный замок рассыплется, как карточный домик, и земля поглотит его вместе со спящей Принцессой…
</html>

end

:494
proc lose
<html>
Вы достаете меч и атакуете крыс, но клинок только тупится об камень. Вам остается лишь достойно принять смерть от укусов мерзких тварей. А цель была столь близка…
</html>

end

:495
mirror=1
<script>
if (newGame) {
   if (Gold > 5) modifyGold(-6); else { readParagraph('255'); alert('У Вас не хватает денег!') }
   dice = Math.floor(Math.random() * 6);
   Luck [dice] = true;
}
</script>
<html>
Вы протягиваете женщинам 6 золотых. Они поражены вашей щедростью и дают один маленький совет: побольше обращайте внимания на зеркала - они могут быть полезны не только женщинам.<!-- Киньте кубик и почистите соответствующий квадрат УДАЧИ. Когда вы увидите зеркало, которым захотите воспользоваться, вычтите 13 из номера параграфа, на котором вы тогда будете находиться.--> Теперь же, выслушав жен мага, выходите из гарема и <a href=btn:251>идите по новому коридору</a>.
</html>

end

:496
<html>
Это усыпальница королевских слуг. Им положен не пышный саркофаг, а лишь общая могила - рядом с могильной плитой видна большая рукоять, которая поднимает плиту, чтобы вновь умершего можно было положить к его собратьям. Хотите попробовать взяться за рукоять и <a href=btn:639>поднять плиты</a>? Если нет, то знайте, что пронизывающее воздух напряжение не позволяет задерживаться: все в вас стремится прочь от этого места. Так что решайте, через какую дверь лучше выйти: через <a href=btn:547>правую</a> или <a href=btn:501>левую</a>.
</html>

end

:497
<html>
Увидев у вас в руках золотое кольцо, рыцарь кланяется и <a href=btn:648>пропускает вас</a>.
</html>

end

:498
param=1
proc addAgility
<script>
if (newGame) addItem('Щит');
</script>
<html>
Вы выбираете щит. Он поможет вам отражать вражеские удары<!-- (прибавьте себе 1 ЛОВКОСТЬ, даже если ваша изначальная ЛОВКОСТЬ не уменьшалась)-->. Пока вы примериваете щит, дверь сама собой закрывается, и <a href=btn:300>открыть ее вновь уже не удается</a>.
</html>

end

:499
<script>
expr_action = 'fightStart(7,8,"ОРК"); afterBattle("48")';
</script>
<html>
Вы накладываете заклятие Огня, и возникший в воздухе огненный шар испепеляет расспрашивавшего вас Орка. Остаются двое: один в ужасе убегает в лес, бросив у ворот оружие, а второй принимает ваш вызов.<!-- 
	ОРК
	Ловкость 7 Сила 8
	Если вы победили стража, можете войти в ворота - 48.--><a href="javascript: eval(expr_action)">Сражайтесь</a> и, если победите, можете войти в ворота.
</html>

end

:500
param=6
proc addStrength
<html>
Вы храбро выпиваете жидкость. Это Микстура жизненных сил.<!-- Прибавьте себе 6 СИЛ и--> А теперь <a href=btn:416>уходите</a> из домика, пока Гоблины не вернулись.
</html>

end

:501
<html>
Дверь без труда открывается. За ней - широкая лестница с удобными деревянными перилами, которая ведет <a href=btn:434>вниз</a>.
</html>

end

:502
proc lose
<html>
За всеми четырьмя дверями слышится топот, и в комнату врывается охрана. Это десять Зеленых рыцарей во главе с Бароном. Предводитель показывает мечом в вашу сторону - и начинается бой. Но он слишком неравен, чтобы оставить вам хоть какие-нибудь шансы на победу. Вам удается убить двух из десяти, и долго еще рыцари будут вспоминать о погибшем отважном смельчаке, дерзнувшем бросить вызов самому Барладу Дэрту и добраться до его главного сокровища - Принцессы…
</html>

end

:503
hyena=1
<html>
Как выясняется, Гиена не только прекрасно понимает человеческую речь, но и не против поболтать с вами. Встретив благодарного слушателя, щедро делитесь с ней последними сплетнями, услышанными в королевском дворце, и рассказываете о пройденном пути. В конце разговора она неожиданно просит передать привет разбойникам, если вы их, конечно, встретите. Но прежде чем успеваете ее спросить, как это сделать, Гиена скрывается в лесу. <a href=btn:117>Ваш путь свободен</a>.
</html>

end

:504
<html>
Вы бежите из таверны по дороге, ведущей к лесу. Однако вскоре понимаете, что Водяной вряд ли станет преследовать вас по суше, и <a href=btn:332>переходите на шаг</a>.
</html>

end

:505
proc changedress
<html>
Орки мертвы, но несколько минут вы стоите, не двигаясь, и прислушиваетесь: не услышал ли кто-нибудь шум драки… Все тихо. Теперь можете оглядеться: из комнаты ведут три двери, кроме той, в которую вы вошли. Пергаменты же написаны на неизвестном языке, смысл их остается непонятным. Какую из дверей попытаетесь открыть: ту, что <a href=btn:337>перед вами</a>, ту, что <a href=btn:393>справа</a> от вас, или ту, что <a href=btn:595>слева</a>?
</html>

end

:506
<html>
Вы накладываете заклятие Огня. В воздухе возникает огненный шар и испепеляет ближнего к вам Орка. Двое остальных не рискуют принять бой: они в ужасе убегают в лес, побросав оружие. Черт возьми, не исключено, что, вернувшись, они поднимут тревогу. Но не гоняться же за ними по всему лесу! Понимая, что нужно торопиться, вы <a href=btn:100>входите в ворота</a>.
</html>

end

:507
<html>
Вы открываете дверь. За ней - узкая лестница, ведущая вниз. <a href=btn:598>Пойдете по ней</a> или <a href=btn:501>заглянете за левую дверь</a>?
</html>

end

:508
<html>
Вы используете заклятие и перелетаете через реку. Кажется, никто не обратил внимания на столь необычный способ преодоления препятствий. Теперь можно двигаться <a href=btn:366>дальше</a>.
</html>

end

:509
<html>
Дорога выводит на поляну. С вашей стороны почти вся трава вытоптана какими-то не слишком маленькими животными. К сожалению, вы не следопыт, который смог бы определить, кто именно здесь прогуливался. Нетрудно заметить, что с другой стороны поляны дорога продолжается. <a href=btn:119>Туда вы и направляетесь</a>.
</html>

end

:510
<html>
За поворотом дороги становится видно, что путь блокирован несколькими поваленными бурей деревьями. Шестое чувство подсказывает, что это засада и лучше вернуться назад. Не прислушиваться к предчувствиям в полном опасностей лесу - не самое разумное. Поколебавшись, возвращаетесь на развилку. Но куда теперь: <a href=btn:38>направо</a> или <a href=btn:214>прямо</a>?
</html>

end

:511
<html>
Женщины отводят вас на потайную лестницу. Через два пролета дверь, но вам не удается ее открыть, и <a href=btn:544>спускаться</a> приходится до конца.
</html>

end

:512
param=2
proc removeStrength
<html>
Вы толкаете дверь, но она не открывается. Пробуете еще раз - безуспешно. В этот момент становится слышно, что в соседней комнате звонит колокольчик. Почуяв неладное, оборачиваетесь и видите, как Начальник стражи с выпученными глазами лихорадочно дергает шнурок звонка. Подбежать к нему уже не успеть - одна из дверей распахивается, и комнату наводняют вооруженные Орки. По их возбужденным крикам вы понимаете, что пытались выйти… во встроенный шкаф. Пробуете сопротивляться, но сзади кто-то наносит сильный удар по голове<!-- (потеряйте 2 СИЛЫ)-->, и <a href=btn:409>вы теряете сознание…</a>
</html>

end

:513
<html>
После двух ударов одна из голов Дракона отлетает. Он отскакивает назад, а у вас появляется время, чтобы, если есть желание, успеть наложить заклятие. Воспользуетесь передышкой и используете заклятие <a href="javascript: useItem2('Огонь', 41)">Огня, <a href="javascript: useItem2('Ловкость', 476")>Ловкости, <a href="javascript: useItem2('Слабость', 172")>Слабости</a>, <a href="javascript: useItem2('Копия', 347)">Копии</a> или будете продолжать <a href=btn:347>драться</a>. Можете, если хотите, попробовать <a href=btn:601>убежать</a>.
</html>

end

:514
<html>
Вы покидаете сосновый коридор и устремляетесь по новой дороге. Понемногу смеркается, наступает ночь. Хотите <a href=btn:358>отдохнуть</a> под одним из деревьев рядом с дорогой или <a href=btn:441>пойдете дальше</a>?
</html>

end

:515
param=8
proc removeStrength
<html>
Вы подходите к ульям. Это действительно небольшая пасека, но никого не видно. Только через несколько минут становится понятно, что никого и не надо: пчелы на этой волшебной пасеке сами являются зоркими часовыми. Целый рой насекомых накидывается на незваного гостя. Вам не удается защититься от укусов - не драться же с пчелами мечом. <!--Потеряйте 8 СИЛ и, -->Если вы еще живы, <a href=btn:98>возвращайтесь на дорогу</a>.
</html>
end

:516
<html>
	Что вы ему предложите:<br>
	<a href="javascript: useItem2('Драконий коготь', 516, -382)">Коготь дракона?</a><br>
	<a href="javascript: useItem2('Старинная подвеска', 516, -189)">Старинную подвеску?</a><br>
	<a href="javascript: useItem2('Гребень', 516, -255)">Гребень?</a><br>
	<a href="javascript: useItem2('Камея с изображением дракона', 516, -28)">Камею с изображением дракона?</a><br>
	Если же ничего из этого у вас нет, придется <a href=btn:316>драться</a>.
</html>
end

:517
<html>
Вы уже на середине озера, когда внезапно замечаете стаю крупных рыб, плывущую наперерез. Хотите <a href=btn:359>узнать</a>, питаются ли они людьми, или воспользуетесь заклятием <a href="javascript: useItem2('Левитация', 625)">Левитации</a>?
</html>
end

:518
<script>
expr_action = 'enemyStrengthFactor = 3; fightStart(6,12,"ТОРГОВЕЦ"); afterBattle("477")';
</script>
<html>
Торговец неповоротлив, но удар его очень силен. <!--Поэтому всякий раз, когда он ранит вас, вычитайте у себя не 2, а 3 СИЛЫ. -->Решив не тратить заклятия на не столь сложного противника, обнажаете меч и <a href="javascript: eval(expr_action)">вступаете в бой</a>.
;Если вы убили его, то 477.
</html>
end

:519
<html>
Что вы спросите у них?<br>
<a href=btn:278>Как пройти к Принцессе?</a><br>
<a href=btn:43>Где сейчас Барлад Дэрт?</a><br>
<a href=btn:184>Где находится Начальник стражи?</a><br>
</html>

end

:520
message=1
<html>
Они рассказывают вам, что некогда жили в деревушке на краю леса. Может быть, вы были в ней? (Если да, то можете рассказать им, что стало с деревней). Когда Черный маг захватил лес, почти все мужчины были на охоте и ни о чем не ведали. По одному многих из них переловили воины волшебника и заставили работать на полях неподалеку от замка. Несколько недель назад им двоим удалось бежать, и с тех пор приходилось питаться тем, что дарил лес. Беглецы просят прощения за то, что чуть было не напали на вас и дают несколько советов. Самый главный: они случайно узнали из разговоров между надсмотрщиками, что, приближаясь к волшебнику, лучше идти направо, чем налево. Что это значит, они не знают, но надеются, что вы доберетесь до ненавистного чародея, и дарят вам <a href="javascript: addItem('Зеркальце')">зеркальце</a><!-- (- 83)-->, небольшую <a href="javascript: addItem('Эмблема Черного Замка')">эмблему в виде Черного замка</a><!-- (+ 59)--> и <a href="javascript: addItem('Золотой свисток')">золотой свисток</a><!-- (+ 156)-->, случайно найденные на одном из полей. Вероятнее всего, их обронил кто-то из Орков-надсмотрщиков. Вдруг пригодится! Кроме того, они говорят, что в замке остался их друг, превращенный чародеем в старика, но больше о его судьбе ничего неизвестно. Они просят, если вы его встретите, передать, что они живы и на свободе. А если вам будет нужна помощь, скажите ему: "Трое из Эвенло" (так называлась их деревенька) - и он вам не откажет. Если вы решите, что встретили их друга,<!-- вычтите 25 из номера параграфа, на котором будете находиться, и--> попробуйте, если хотите, передать ему послание Беглецов. Теперь же отправляйтесь <a href=btn:3>дальше</a>.
</html>
end

:521
param=2
proc removeStrength
<html>
Вы накладываете заклятие и направляете огненный шар на Водяного, но он скрывается под водой. Шар следует за ним - и… гаснет. Водяной же выныривает обратно и наносит ответный удар водорослями<!-- (потеряйте 2 СИЛЫ)-->. Теперь вам ничего не остается, кроме как <a href=btn:326>сражаться</a> с ним мечом.
</html>

end

:522
<html>
Вы обнажаете меч, но она не обращает на него ни малейшего внимания. Разозлившись, наносите удар, достаточный для того, чтобы разрубить навязчивую старуху пополам. Однако клинок проходит сквозь нее, не причинив никакого вреда. Обрушив на вашу голову проклятия, нищенка тает в воздухе. Путь свободен. Из комнаты две двери. Выйдете в ту, которая <a href=btn:252>перед вами</a>, или в ту, что <a href=btn:542>справа</a>?
</html>

end

:523
param=4
proc removeStrength
<html>
Вы поднимаетесь по лестнице, но внезапно одна из ступеней подламывается под ногами, и вы летите вниз. Хорошая новость: вам повезло, что не покалечились, а только ушиблись (потеряйте 4 СИЛЫ), поскольку пол у комнаты каменный. Плохая новость: потеряв равновесие, вы обрушили еще несколько ступеней, так что по лестнице теперь не пройти. Разве что у вас есть <a href="javascript: useItem2('Левитация', 523.1)">заклятие Левитации</a>. Если нет, придется <a href=btn:39>вернуться</a> в большую залу и сделайте более удачный выбор.
</html>

end

:523.1
<html>
Заклятие спасает вас и позволяет оказаться на верхней площадке лестницы. Открыв дверь, вы проходите узким и тёмным коридорчиком, который неожиданно заканчивается тупиком. Но ведь наверняка здесь где-то есть потайная дверца! Через несколько минут вам удаётся её отыскать: <a href=btn:480>часть стены, провернувшись, отходит в сторону</a>.
</html>

end

:524
<html>
Дорога приводит вас на большой перекресток. Впереди три дороги. Одна - налево - уходит в том же направлении, откуда вы только что пришли. Идти по ней явно не имеет смысла. Остаются две: тропинка <a href=btn:89>прямо</a> и дорога <a href=btn:653>направо</a>.
</html>

end

:525
<html>
Вы подходите к дереву и замечаете, что кто-то еще хочет воспользоваться тенью. С дерева спускается Обезьяна, которая в отличие от вас совершенно не собирается делить прохладу с кем бы то ни было. Если у вас есть банан, <a href="javascript: useItem2('Банан', 349)">дайте его Обезьяне</a>, если же нет, то вам придется <a href=btn:215>драться с ней</a>, и победитель насладится спасительным холодком.
</html>

end

:526
<html>
Вы спрашиваете у крестьянина, что находится поблизости от деревни. Он отвечает крайне неохотно: то ли боится, то ли в чем-то вас подозревает. В итоге удается вытянуть из него лишь следующее. Если пойдете на юг, то придете к тому, кто вас послал##59$ ежели на запад, то там таких как вы шибко не любят. Информация странна и непонятна: может быть, он принимает вас за кого-то другого? Но так или иначе все же надо решать, куда идти - <a href=btn:235>на юг</a> или <a href=btn:2>на запад</a>.
</html>

end

:527
<html>
Для начала вы спрашиваете, не видел ли он кого-нибудь из ваших предшественников. Водяной отвечает, что к нему заходили лишь двое или трое из них, и всем он с радостью помогал. При этих словах в его глазах на мгновение появляется какой-то недобрый блеск, но уже через минуту они вновь спокойны и приветливы. Вы настораживаетесь, вспоминаете, где находитесь, и начинаете внимательнее следить за хозяином. Тем временем он предлагает вам еду - жареную рыбу (что обойдется вам всего в 1 золотой), чистую родниковую воду (2 золотых), но почему-то возражает, чтобы вы наполнили свою флягу: предлагает выпить сколько угодно, но только не покидая таверны. Что это - странный обычай или какой-то подвох? Что вы предпочтете? Поблагодарить Водяного и <a href=btn:332>уйти</a>, <a href=btn:209>купить у него еду</a>, <a href=btn:376>попить воды</a>? Или <a href=btn:15>напасть на него</a>?
</html>

end

:528
<script>
expr_action = 'fightStart(9,10,"ОБОРОТЕНЬ"); afterBattle("528.1")';
expr_action2 = "if (itemExists('Копия')) {createCopy(); eval(expr_action); }";
</script>
<html>
Вы быстро догоняете волка, который снова становится человеком и готовится к бою. В руках у него появляется меч. Вы можете воспользоваться только заклятием <a href="javascript: eval(expr_action2)">Копии</a>: все остальные Оборотень без труда развеет.
Теперь <a href="javascript: eval(expr_action)">сражайтесь</a>.<!--
	ОБОРОТЕНЬ
	Ловкость 9 Сила 10
	Если вы убили противника, то можете снять с его шеи Оберег (- 131) и надеть на себя. Потом отправляйтесь в путь, ведь и так потеряно слишком много времени - 240.-->
</html>

end

:528.1
<html>
Вы убили противника. Теперь можете снять с его шеи <a href="javascript: addItem('Оберег')">Оберег</a> и надеть на себя. Потом <a href=btn:240>отправляйтесь в путь</a>, ведь и так потеряно слишком много времени.
</html>

end

:529
<script>
expr_action = 'fightStart(8,10,"МЕДВЕДИЦА"); afterBattle("44")';
expr_action2 = "if (itemExists('Ловкость')) {removeItem('Ловкость'); AgilityFactor = 2; eval(expr_action) }";
expr_action3 = "if (itemExists('Слабость')) {removeItem('Слабость'); enemyPowerFactor = -2; eval(expr_action) }";
expr_action4 = "if (itemExists('Копия')) {createCopy(); eval(expr_action); }";
</script>
<html>
Вы можете воспользоваться заклятием <a href="javascript: eval(expr_action2)">Ловкости</a><!--, увеличив на 2 свою МОЩНОСТЬ УДАРА,--> или заклятием <a href="javascript: eval(expr_action3)">Слабости</a><!--, уменьшив на столько же МОЩНОСТЬ УДАРА медведицы-->, а также заклятием <a href="javascript: eval(expr_action4)">Копии</a>. <a href="javascript: eval(expr_action)">Сражайтесь</a> и, если победите, выбирайтесь из берлоги и идите дальше по дороге в глубь леса.<!--
	МЕДВЕДИЦА
	Ловкость 8 Сила 10
	Если вы победили, выбирайтесь из берлоги и идите дальше по дороге в глубь леса - 44.-->
</html>

end

:530
<html>
Вскоре ваше внимание привлекает дерево, растущее возле дороги. От других оно отличается величиной, и кажется, что это не одно, а три или четыре дерева, сросшихся вместе. Вы запрокидываете голову и смотрите вверх. В кроне явно спрятано чье-то гнездо или логово, оттуда спускается почти незаметная веревочная лестница, что-то сильно напоминающая. Но что? Хотите взобраться на дерево и посмотреть, <a href=btn:54>кто там живет</a>, или <a href=btn:19>пойдете дальше</a>?
</html>

end

:531
<html>
Тропинка выводит вас на развилку. Пойдете по дороге <a href=btn:49>прямо</a> или <a href=btn:338>налево</a>?
</html>

end

:532
<script>
expr_action = "fightStart(8,10,'ПЕРВЫЙ ГОБЛИН',6,8,'ВТОРОЙ ГОБЛИН'); afterBattle('323')";
expr_action2 = "if (itemExists('Ловкость')) {removeItem('Ловкость'); AgilityFactor = 2; eval(expr_action) }";
expr_action3 = "if (itemExists('Слабость')) {removeItem('Слабость'); enemyPowerFactor = -2; eval(expr_action) }";
expr_action4 = "if (itemExists('Копия')) {createCopy(); eval(expr_action); }";
</script>
<html>
Открываете дверь, и она мгновенно захлопывается за спиной, совершенно сливаясь со стенами. Вы оказываетесь в небольшом холле у входа на второй этаж. Из него ведет только одна дверь, и именно у нее стоит охрана - два здоровенных Гоблина с зазубренными мечами. Если у вас есть пропуск, <a href="javascript: tryItem('Пропуск', 532, 20)">предъявите его</a>, иначе придется <a href="javascript: eval(expr_action)">драться</a>. Вы можете воспользоваться заклятием <a href="javascript: eval(expr_action2)">Ловкости</a><!--, на время боя увеличьте на 2 свою Ловкость-->, или <a href="javascript: eval(expr_action3)">Слабости</a><!--, уменьшите на 2 МОЩНОСТЬ УДАРА любого из Гоблинов-->, или <a href="javascript: eval(expr_action4)">Копии</a>. А может быть у вас есть <a href="javascript: putOnItem('Латы', 532, 60)">латы зеленого рыцаря</a>?<!--
	ПЕРВЫЙ ГОБЛИН
	Ловкость 8 Сила 10
	ВТОРОЙ ГОБЛИН
	Ловкость 6 Сила 8
	Если вы справились с охраной, то можете открыть дверь, которую они охраняли - 323.-->
</html>

end

:533
<html>
Пройдя вдоль южной стены замка, вы видите, что тропинка раздваивается и можно либо немного <a href=btn:305>углубиться в лес</a>, либо свернуть и <a href=btn:195>пойти вдоль западной стены</a>.
</html>

end

:534
<html>
Вскоре после встречи с Зеленым рыцарем начинает смеркаться. Решив не рисковать, сходите с дороги и устраиваетесь на ночлег, а с первыми лучами солнца вновь продолжаете путь. Через несколько часов вы выходите на перекресток. Но откуда прискакал всадник? Это неизвестно, и поэтому выбор дороги занимает больше времени, чем обычно. К тому же вы понимаете, что замок может быть неподалеку: ошибиться именно сейчас было бы особенно обидно. Куда же все-таки надумаете пойти: <a href=btn:584>прямо</a> или <a href=btn:60>направо</a>?
</html>

end

:535
<html>
Вы решаете, что осторожность превыше всего, и говорите, что идете в Черный замок наниматься на службу. Старичок приторно любезен, но не более того. По крайней мере все ваши вопросы отскакивают от него, как от стенки горох. По его словам, он так долго не покидал свой дом, что просто не знает, что творится вокруг. "А куда идет тропинка от вашего дома"? - спрашиваете вы. "Какая тропинка? - искренне удивляется старичок. - Когда я последний раз выходил на двор, никакой тропинки не было". Вы понимаете, что ничего толком не добьетесь, и <a href=btn:55>уходите</a> по той самой тропинке, про которую спрашивали.
</html>

end

:536
<html>
Завернув за угол коридора, останавливаетесь как вкопанный. Перед вами - Зеленый рыцарь. Его меч поднят для удара, забрало опущено. "Пропуск", - глухо доносится из-под шлема. Если у вас есть <a href="javascript: tryItem('Оберег', 536, -131)">Оберег</a> или <a href="javascript: tryItem('Серебряный сосуд', 536, -57)">серебряный сосуд</a>, можете попытаться воспользоваться ими. Иначе вам придется либо подумать о том, что может послужить <a href=btn:283>пропуском</a>, либо <a href=btn:567>атаковать</a>.
</html>

end

:537
<html>
Вы возвращаетесь к коридору, из которого пришли, и сворачиваете <a href=btn:140>направо</a>, подальше от темницы.
</html>

end

:538
<html>
В воздухе появляется огненный шар и направляется к одному из стариков. К вашему огромному разочарованию, старик щелкает пальцами, и шар исчезает. Теперь можете или попробовать заклятие <a href="javascript: useItem2('Иллюзия', 370)">Иллюзии</a>, или же спокойно <a href=btn:68>ждать</a>, что будет дальше.
</html>

end

:539
<script>
expr_action = "fightStart(4,8,'ГОБЛИН'); afterBattle('539.1')";
</script>
<html>
Гоблин успевает позвать на помощь. Вам же приходится обнажать меч и <a href="javascript: eval(expr_action)">драться</a>.
</html>

end

:539.1
<script>
expr_action = "fightStart(8,10,'ВТОРОЙ ГОБЛИН'); afterBattle('539.2')";
</script>
<html>
Как только вы убиваете Гоблина, из дома появляется еще один. Он менее пьян и <a href="javascript: eval(expr_action)">будет не столь легким противником</a>.
</html>

end

:539.2
<html>
Когда удастся убить и второго Гоблина, остальные решат не искушать свою судьбу и убегут, выпрыгнув в окно. Вы же можете <a href=btn:484>зайти в сторожку</a> и посмотреть, нет ли там чего-нибудь для вас полезного, или решить, что лучше сразу <a href=btn:308>пойти к зданию в центре двора</a>.
</html>

end

:540
proc changedress
<html>
Вы подходите к среднему сундуку. Есть ли у вас фигурный ключ? Если да, то можете попытаться его <a href="javascript: tryItem('Фигурный ключ',540,-156)">открыть</a> - уж слишком замысловата замочная скважина. Иначе, если вы этого еще не делали, лучше заняться <a href=btn:474>большим сундуком</a>, <a href=btn:380>маленьким</a> или <a href=btn:39>вернуться в большую залу</a>.
</html>

end

:541
<html>
Вы накладываете заклятие, но огонь не в силах уничтожить камень. Теперь вам придется сражаться с крысами. Если у вас есть <a href="javascript: tryItem('Меч Зеленого рыцаря', 541, -177)">меч Зеленого рыцаря</a>, то вы знаете, что делать. <a href=btn:494>Если же нет, то…</a>
</html>

end

:542
meat=0
vegetables=0
<script>
canChangeDress = 1;
</script>
<html>
За дверью - небольшая комнатка, доверху набитая продуктами. Нетрудно догадаться, что это должна быть кладовка. Ну-с, посмотрим, чем питается гвардия волшебника. Наверно, дрянь какая-нибудь, но, если хотите, можете подкрепиться. Что вас больше привлекает: <a href=btn:411>мясо</a> или <a href=btn:578>овощи</a>? Если вы не рискуете есть эти припасы, <a href=btn:80>выходите через дверь в правой стене</a>.
</html>

end

:543
<script>
expr_action = 'fightStart(11,14,"ЗЕЛЕНЫЙ РЫЦАРЬ"); afterBattle("241")';
</script>
<html>
Вы можете использовать заклятия <a href="javascript: useItem2('Огонь', 365)">Огня</a>, <a href="javascript: useItem2('Ловкость', 365)">Ловкости</a> и <a href="javascript: useItem2('Слабость', 365)">Слабости</a>.<!-- В этом случае решите, какое именно, и посмотрите параграф 365.--> Если же не надеетесь на магию, <a href="javascript: eval(expr_action)">начинайте бой</a>. Если вам удастся победить рыцаря, то идите по коридору дальше, пока не дойдете до двери.
</html>

end

:544
<html>
В конце лестницы - еще одна дверь. Она легко поддается, и вы оказываетесь на узкой площадке, на которую выходят уже две двери. Какая из них вам больше нравится: <a href=btn:285>правая</a> или <a href=btn:489>левая</a>?
</html>

end

:545
<html>
Вы берете серебряный сосуд. Решите <a href=btn:451>открыть его</a>, или предпочтете <a href=btn:650>таскать его с собой?</a>.
</html>

end

:546
param=1
proc removeStrength
<html>
Конь изо всех сил старается сбросить непрошенного седока, но поначалу вам везет - в седле удержались. Рассчитывая избавиться от вас, конь пускается отчаянным галопом. Но не по дороге, а в сторону от нее - по тропинке, которую вы сначала даже не заметили. Как вы ни стараетесь, укротить строптивое животное не удается. Тропинка выходит на другую дорогу, и вы некоторое время скачете по ней, проезжаете под каким-то мостом, потом опять начинаются едва заметные лесные тропы. Через три четверти часа уже начинаете жалеть, что связались с этой лошадью: твердая земля кажется недостижимым раем. В конце концов конь, как бы услышав молитвы седока, сбрасывает вас<!-- (потеряйте 1 СИЛУ)--> и со скоростью ветра уносится в лес. Оглянувшись вокруг, <a href=btn:181>пытаетесь понять, куда же вы попали</a>.
</html>

end

:547
<script>
expr_action = 'if (Inventory [0]["Большой ключ"]) { readParagraph("507"); void(0) } else alert("У Вас нет ключа!")';
</script>
<html>
Дверь заперта, и на ней висит большой замок, который не сбить даже мечом. Если вам есть чем открыть дверь, <a href="javascript: eval(expr_action)">сделайте это</a>, иначе придется <a href=btn:501>идти в другую</a>.
</html>

end

:548
<html>
Вы входите в конюшню и приближаетесь к Пегасу. Конь выглядит очень мирно и, кажется, даже рад вашему приходу. <a href=btn:297>Погладите его</a> или <a href=btn:416>поторопитесь уйти</a>, пока не вернулись конюхи?
</html>

end

:549
<html>
Вы поворачиваете направо вдоль стены и продолжаете путешествие в темноте. В конце концов ваши руки нащупывают дверь, потом дверную ручку. Повернув ее и открыв дверь, вы несколько секунд стоите неподвижно, пока глаза привыкают к свету. Перед вами лестница. Обрадовавшись, что наконец-то можно уйти из этой непроглядной тьмы, спускаетесь вниз на несколько пролетов и видите еще одну дверь. Открыв ее, попадаете на узкую лестничную площадку, с которой ведут уже две двери. Какую из них вы откроете: <a href=btn:285>правую</a> или <a href=btn:489>левую</a>?
</html>

end

:550
<html>
Начальник стражи дотрагивается до ближайшей стены, и она отходит в сторону, открывая <a href=btn:607>выход на лестницу</a>.
</html>

end

:551
<html>
Что вы хотите ей подарить:<br>
	<a href="javascript: useItem2('Зеркальце',551, -83)">Зеркальце?</a><br>
	<a href="javascript: useItem2('Гребень', 551, -255)">Гребень?</a><br>
	<a href="javascript: useItem2('Оберег', 551, -131)">Оберег?</a><br>
Если у вас нет ни одного из этих предметов, то <a href=btn:255>вернитесь</a> и выберите что-нибудь другое.
</html>

end

:552
<html>
Предъявляете пропуск, и Гоблины беспрепятственно <a href=btn:323>пропускают вас</a>.
</html>

end

:553
<script>
expr_action = 'fightStart(10,12,"ГАРПИЯ"); afterBattle("388")';
expr_action2 = "if (itemExists('Копия')) {createCopy(); eval(expr_action) }";
</script>
<html>
Первое, что сразу бросается в глаза, - огромный письменный стол посреди комнаты. Он весь завален большими свитками, в которых без труда можно узнать карты. Без сомнения, чародей готовит нашествие на Элгариол - вы пришли как нельзя вовремя. За столом - невысокий усталый человек, который оторвал взгляд от бумаг и смотрит на вас. Неужели это и есть всемогущий маг? Но вы-то его представляли себе совсем другим. Барлад Дэрт некоторое время терпеливо смотрит, потом щелкает пальцами, как бы совершая привычное и давно уже надоевшее ему действие. Кажется, он обращает на вас внимания не больше, чем на назойливую муху. После этого чародей вновь погружается в работу. А к вам приближается одна из фигур, стоявшая на постаменте в углу комнаты - сначала вы даже приняли ее за статую. Однако чудовище вполне реально: к вам подходит отвратительная Гарпия - полуженщина-полуптица. Если у вас есть <a href="javascript: tryItem('Зеркальце',553,-83)">зеркальце</a>, попробуйте его использовать. Если нет, вам придется <a href="javascript: eval(expr_action)">драться с ней</a>, надеясь только на себя да на заклятие <a href="javascript: eval(expr_action2)">Копии</a>, если оно у вас есть.<!--
	ГАРПИЯ
	Ловкость 10 Сила 12
	Если вы убили ее, то 388.-->
</html>

end

:554
<html>
Вы достаете мешочек с тьмой и… "Духам тьмы нравится твой дар, - раздается все тот же голос. - Ты можешь пройти". Теперь невидимая рука освещает выход. Он оказывается совсем не там, где вы его искали. Если хотите поменять одежду, то сделайте это быстро и <a href=btn:301>выходите</a>, пока Духи не передумали.
</html>

end

:555
ball=1
<html>
Лесовичок рад, что вы открылись ему. "Я покажу тебе дорогу, - говорит он. - На первом перекрестке иди прямо, а потом путь тебе покажет мой верный спутник. Не бойся останавливаться на ночь: он с удовольствием переночует вместе с тобой. Но учти: не послушаешься, не свернешь в указанном направлении - он обидится и вернется ко мне". И Лесовичок кидает на дорогу клубочек, который, как нетерпеливый котенок, начинает подпрыгивать и носиться взад и вперед, ожидая, пока вы тронетесь в путь. На каждом перекрестке (разумеется, кроме первого)<!-- прибавьте 30 к номеру параграфа, на котором окажетесь, и --> клубочек укажет правильную дорогу. С этим вы прощаетесь с Лесовичком и <a href=btn:450>отправляетесь дальше</a>.
</html>

end

:556
param=616
proc inarmor
<html>
Открыв дверь, вы попадаете в Гостиную. Уютные диваны и кресла, картины в золоченых рамках, вазы на столиках - все навевает покой. Но вот из-за ширмы появляется и хозяйка<!-- - красивая женщина с тонким капризным лицом, в легком летнем платье-->, нечёсаные лохмы которой свисают едва ли не до пояса. Сначала на ее лице видна улыбка, но затем оно мгновенно меняется. В глазах загорается красный огонь, и она идет на вас, глядя уже скорее как на добычу. Это Женщина-вампир, и надо решать: попробуете <a href=btn:394>откупиться от нее</a> каким-нибудь подарком  или достанете меч и <a href=btn:93>будете биться</a>.
</html>

end

:557
<html>
Вы накладываете заклятие Огня, и огненный шар освещает все вокруг. Летучие мыши не переносят света: возмущенно хлопая крыльями, они покидают домик, почти касаясь вашего лица. Теперь можете откинуть каменные ставни и <a href=btn:120>осмотреть домик</a> или <a href=btn:416>уйти</a>, если боитесь, что мыши поднимут тревогу.
</html>

end

:558
<script>
expr_action = 'fightStart(8,8,"ГИГАНТСКИЙ ПАУК"); afterBattle("189")';
expr_action2 = "if (itemExists('Ловкость')) {removeItem('Ловкость'); AgilityFactor = 2; eval(expr_action) }";
expr_action3 = "if (itemExists('Слабость')) {removeItem('Слабость'); enemyPowerFactor = -2; eval(expr_action) }";
expr_action4 = "if (itemExists('Копия')) { createCopy(); eval(expr_action); }";
</script>
<html>
Вам удается перерубить лестницу мечом и спрыгнуть на землю. Конечно, Паук погонится за вами, но теперь вы будете драться на равных, используя либо заклятие <a href="javascript: eval(expr_action2)">Ловкости</a><!--, которое позволит вам прибавить две единицы к своей Ловкости -->, либо заклятие <a href="javascript: eval(expr_action3)">Слабости</a><!--, которое позволит вычитать 2 из МОЩНОСТИ УДАРА гигантского Паука -->, либо заклятие <a href="javascript: eval(expr_action4)">Копии</a>. Если есть желание, можете использовать заклятие <a href="javascript: useItem2('Огонь', 410)">Огня</a>. Иначе - <a href="javascript: eval(expr_action)">деритесь</a>.
;Если вы победили, то 189.
</html>

end

:559
<html>
Дорога вскоре выходит из леса. Вернее, он расступается, уступая место большой деревне. Вы настолько не ожидали ее встретить в самой середине Зачарованного леса, что даже не можете сразу поверить своим глазам. Но решайте: <a href=btn:580>идти в деревню</a> или <a href=btn:13>избрать тропинку</a>, которая идет левее деревни, петляя между деревьев.
</html>

end

:560
<html>
Вы открываете шкаф, но не можете понять назначение находящихся там вещей. Предметы, лежащие на полках, вам не знакомы. То, что висит на крюках, отдаленно напоминает одежду, но трудно представить, кому бы она могла подойти. По крайней мере не человеку. Вряд ли здесь что-нибудь может пригодиться, и вы закрываете дверцы шкафа. Теперь обратите внимание на <a href=btn:165>зеркало</a> или на <a href=btn:288>карты на столе</a>? <a href=btn:493>Или вы уже осмотрели и то, и другое?</a>
</html>

end

:561
<html>
Вы без приключений переплываете озеро, но на берегу ждет <a href=btn:192>еще один сюрприз</a>.
</html>

end

:562
<html>
Вы говорите, что ошиблись дверью, но это не уменьшает подозрений Начальника стражи. Вам надо либо быстро <a href=btn:613>предложить ему деньги</a>, либо <a href=btn:65>нападать первым</a>.
</html>

end

:563
<script>
expr_action = "enemyStrengthFactor = 1; fightStart(6,8,'ЛЕСОВИЧОК'); afterBattle('563.1')";
</script>
<html>
Вы обнажаете клинок и <a href="javascript: eval(expr_action)">кидаетесь на Лесовичка</a>. Он немало удивлен, но готов дать отпор и вынимает свой кинжал;, который в случае успешного удара отнимет у вас не 2, а всего 1 СИЛУ
.
</html>

end

:563.1
<html>
Лесовичок побежден. Теперь вы можете взять у него из кармана <a href="javascript: addItem('Зеленая брошь')">зеленую брошь</a> в виде листика; (+ 29)
 и отправиться по дороге <a href=btn:450>дальше</a>.
</html>

end

:564
play #quest_path$/Snd/WIN.WAV
<html>
Вы накладываете заклятие Слабости. Крысы не могут даже пошевелиться: каменное тело стало слишком тяжело для них. Вы быстро проскальзываете между ними и выходите в <a href=btn:480>дверь в стене справа</a>.
</html>

end

:565
<html>
Какова же условная фраза?<br>
	<a href=btn:469>Демоны и сила?</a><br>
	<a href=btn:94>Щит тьмы?</a><br>
	<a href=btn:298>Меч и верность?</a>
</html>

end

:566
proc changedress
<html>
Влетев в окно, оказываетесь в маленькой прихожей. Из нее ведут две двери. Если хотите, то войдите <a href=btn:556>в правую</a> или ту, что <a href=btn:277>напротив вас</a>. Однако если у вас есть еще в запасе заклятие Левитации, можете его <a href="javascript: useItem2('Левитация', 78)">использовать</a>, чтобы посмотреть, что находится за окном над вами, или <a href="javascript: useItem2('Левитация', 111)">вернуться в залу</a>, откуда вы начали свое воздушное путешествие.
</html>

end

:567
<script>
expr_action = 'fightStart(10,10,"ЗЕЛЕНЫЙ РЫЦАРЬ"); afterBattle("567.1")';
</script>
<html>
Вы можете воспользоваться заклятием <a href="javascript: useItem2('Ловкость', 395)">Ловкости</a>, <a href="javascript: useItem2('Слабость', 299)">Слабости</a>, <a href="javascript: useItem2('Огонь', 96)">Огня</a> или просто <a href="javascript: eval(expr_action)">атаковать</a> Зеленого рыцаря, надеясь только на себя.
</html>

end

:567.1
<html>
Путь вперед свободен, и вы бежите дальше по коридору, пока дорогу не преграждает <a href=btn:241>дверь</a>.
</html>

end

:568
<script>
if (newGame) addItem('Рунический меч');
</script>
<html>
У вас в руках меч с горящими на клинке рунами. Неужели это то самое легендарное оружие, выкованное гномами еще в самом начале Эпохи Распада и известное как "Смерть Орков"?! Похоже, что так. Если на пути вам встретится Орк, то исход битвы с ним будет предрешен - вы убиваете его прежде, чем он успевает защититься. Однако если врагов будет несколько, то с остальными вам придется драться.<!-- Если хотите, оставьте свой меч в кладовой вместо того, который берете с собой.--> Пока вы возитесь с мечом, дверь сама собой закрывается, и открыть ее вновь <a href=btn:300>уже не удается</a>.
</html>

end

:569
<html>
Увидев у вас в руках золотое кольцо, рыцарь кланяется и <a href=btn:648>пропускает вас</a>.
</html>

end

:570
<html>
Вы спрашиваете, что за сундук стоит в углу, и повар немало удивлен вашим любопытством. "А какое тебе, собственно, дело, - говорит он, - и вообще кто ты такой?". Теперь другого выхода у вас нет: если вы не <a href=btn:604>убьете всех троих</a>, они поднимут тревогу.
</html>

end

:571
<html>
Вы вкладываете стрелу в углубление под рисунком. Назад вынуть ее уже не удается, но дверь медленно открывается. Пройдя по узкому коридору несколько метров, вы видите, что дальше идет три одинаковых прохода. Вы пойдете в <a href=btn:368>правый</a>, <a href=btn:482>средний</a> или <a href=btn:536>левый</a>?
</html>

end

:572
proc lose
<html>
Невидимая рука тянется к вашему горлу. Несколько других впиваются в плечи. Вы пытаетесь вырваться, поднять меч, наложить все известные вам заклятия, - все бесполезно. Воздуха уже не хватает, и изо рта вырывается только сдавленный хрип. "Никто не может безнаказанно нарушать покой Духов тьмы!" - снова раздается тот же голос, и это последнее, что вы слышите в жизни…
</html>

end

:573
<html>
Водяной мертв. Теперь вы можете спокойно осмотреть таверну. Самое интересное из того, что вам удается найти, - небольшой ларец. Открыв его, видите все богатства хозяина: <a href="javascript: addItem('Свеча')">свечу</a>, <a href="javascript: addItem('Огниво')">огниво</a><!-- (+ 111)--> и короткую <a href="javascript: addItem('Стрела с белым оперением')">стрелу с белым оперением</a><!-- (+ 137)-->. Возьмите с собой все, что хотите, но учтите - без огнива зажечь свечу вам вряд ли удастся.<!-- Если вы взяли с собой огниво и свечу, то в будущем сможете прибавить 10 к номеру параграфа, на котором вам надо будет ее зажечь.--> Вы выходите из дома и, обойдя вокруг, отмечаете, что стоит он на берегу большого озера. Поблизости привязана лодка. Сядете в нее и попробуете <a href=btn:561>переплыть озеро</a> или <a href=btn:332>пойдете по дороге</a>, ведущей от таверны в глубь леса?
</html>

end

:574
<script>
if (newGame) modifyGold(-3);
</script>
<html>
Вы платите деньги и прячетесь под сеном. Вскоре несколько возов отправляются в путь, но вам не видно, по какой дороге вы выезжаете из деревни. Через некоторое время становится жарко: лес остался позади. Ветерок доносит запах водорослей и тины, потом слышатся грубые голоса Гоблинов, и вам приходится затаить дыхание, когда телега останавливается прямо возле них. Но вот пост позади, под колесами слышится скрип бревен, вы чувствуете, что воз въезжает на мост. Потом еще около получаса дороги - вновь голоса. На этот раз Орки. "А под сеном-то у тебя ничего нет?", - спрашивает один из них крестьянина, и <a href=btn:641>ужас охватывает вас</a>.
</html>

end

:575
<html>
Женщины отводят вас на потайную лестницу. Через несколько пролетов - дверь, но одна из жен мага прикладывает палец к губам, и вы продолжаете подъем. У следующей двери она останавливается, отпирает ее своим ключом и, кивнув, бесшумно спускается обратно. Вы <a href=btn:323>остаетесь в одиночестве</a>.
</html>

end

:576
<html>
Вы следуете за клубочком, поскольку уже несколько раз убеждались в том, что дорога, которую он вам указывает, удобна и безопасна. Неожиданно он сворачивает с тропинки и устремляется в лес. Вы настолько не ожидали этого, что не успеваете свернуть так же быстро, а когда раздвигаете кусты, клубочка за ними нет. Небольшая лужица, оставшаяся на земле после дождя, привлекает ваше внимание. Заметив в ней что-то необычное, вы наклоняетесь. Как бы почувствовав внимательный взгляд человека, вода темнеет, после чего в ней появляется уже не ваше отражение, а какое-то изображение. Через секунду это уже вновь вы, беззаботно идущий дальше по той же тропинке. Перекресток. Свернув налево, выходите на поляну. Но что это? С разных сторон поляны на вас накидываются разбойники! Вода опять темнеет, успокаивается, и сколько ни ждете, больше ничего не появляется. Даже самого обычного отражения. Полный благодарности к Лесовичку, выбираетесь на тропинку, но перекресток оказывается гораздо дальше, чем вы думали. Наконец вы пересекаете широкую дорогу. Пойдете по ней <a href=btn:559>направо</a>, <a href=btn:181>налево</a> или <a href=btn:445>прямо</a>? Если вы пойдете прямо, то тропинка вскоре выведет вас на другую дорогу.
</html>

end

:577
param=1
proc removeAgility
<html>
Вы выхватываете меч и бросаетесь вперед. Недобрый огонек вспыхивает в глазах у волшебника, и в следующую секунду ваш меч, вырванный из руки нечеловеческой силой<!-- (потеряйте 1 ЛОВКОСТЬ)-->, отлетает в другой конец комнаты. Вы понуро плететесь туда и поднимаете его. "Ты слишком подл, чтобы оценить мое великодушие и терпение, - говорит маг, - и <a href=btn:483>будешь наказан за это</a>".
</html>

end

:578
param=3
vegetables=1
proc removeStrength
<script>
expr_action = "if (!meat) { readParagraph('411'); void(0) } else alert('Этот путь закрыт.')";
canChangeDress = 1;
</script>
<html>
Приятные на вид овощи оказываются совершенно гнилыми внутри. Может быть, Орки и любят такую еду, но вас от нее сильно мутит<!--. Потеряйте 3 СИЛЫ-->. Хотите теперь попробовать <a href="javascript: eval(expr_action)">мясо</a>, если вы еще этого не делали, или поторопитесь <a href=btn:80>уйти из комнаты</a> через дверь в правой стене?
</html>

end

:579
proc lose
<html>
Вы неудачно падаете и ломаете ногу. Ваше путешествие окончено: ведь на безлюдной дороге никто не поможет. Трудно сказать, умрете вы от голода или вас подберет конный разъезд воинов Барлада Дэрта. Но и в том, и в другом случае вы не выполнили свою миссию…
</html>

end

:580
<html>
Вы входите в деревню. Жители, попадающиеся навстречу, смотрят на вас с нескрываемым подозрением. Недоброжелательность здесь прямо-таки разлита в воздухе, и неудивительно, что хочется поскорее уйти из этого затхлого места. <a href=btn:235>Сделаете это сразу</a> или все же поговорите с одним из крестьян? Если да, то о чем вы спросите его: <a href=btn:351>как лучше попасть в Черный замок</a>, <a href=btn:448>где можно купить еду</a> или <a href=btn:526>что находится поблизости от деревни</a>?
</html>

end

:581
proc lose
<html>
Вы со всего размаха падаете в воду и, как ни стараетесь, выплыть уже не можете. Конец ваш предрешен. Озеро оказалось слишком велико, чтобы пересечь его, надеясь только на одно заклятие Левитации. Вы идете ко дну, так и не освободив Принцессу…
</html>

end

:582
<html>
Вы подсаживаетесь к одному из костров и заговариваете с Орками-новобранцами. Они совсем не подозревают в вас врага и охотно болтают, рассказывая обо всем, что знают. Вы говорите им, что тоже хотели бы попасть на службу в замок и собирались пройти туда и побеседовать об этом с приближенными мага. Но вот беда: вы не знаете условной фразы, которая могла бы открыть вам двери. Неопытные новобранцы охотно называют нужные слова: "Щит тьмы". Вы благодарите собеседников, но что потом? Воспользуетесь информацией и <a href=btn:74>отправитесь к входу в центральное строение</a> или <a href=btn:174>поговорите с ними еще</a>, надеясь узнать что-нибудь не менее ценное?
</html>

end

:583
<html>
Вы достаете золотой свисток и легонько свистите, чтобы не привлечь постороннего внимания. Дверь тут же открывается, за ней - лестница, ведущая вверх. <a href=btn:607>Пойдете по ней</a> или выйдете через одну из других дверей: <a href=btn:398>правую</a>, <a href=btn:206>левую</a> или <a href=btn:350>среднюю</a>?
</html>

end

:584
<html>
Вы решаете пойти прямо: хотя, возможно, Зеленый рыцарь и прискакал с этой стороны, в лучшем случае это будет дорога в правильном направлении - к замку. А в худшем - всегда можно спрятаться, если послышится стук копыт. Дорога приводит на большой перекресток. Тропинка, идущая налево, скрывается за деревьями, дорога направо ведет в ту сторону, откуда вы идете, и сворачивать на нее вряд ли имеет смысл. Куда же направитесь вы?<br>
<a href=btn:653>Прямо?</a><br>
<a href=btn:89>Налево?</a>
</html>

end

:585
<html>
"В кости", - отвечаете вы, но стражники даже не знают такой игры. Ответ не слишком удачен: теперь придется <a href=btn:428>пробиваться силой</a>.
</html>

end

:586
<html>
Вам не приходится долго идти по выбранной дороге в гордом одиночестве. Из леса появляются два человека с топорами и вязанками хвороста через плечо. Это Дровосеки. Они настороженно смотрят на вас и спрашивают, кто вы и куда идете. <a href=btn:608>Поговорите с ними</a> или решите, что проще <a href=btn:6>расчистить себе путь мечом</a>, не вступая в лишние разговоры?
</html>

end

:587
<script>
if (newGame) removeItem("Серебряный свисток");
</script>
<html>
Вы возвращаете свисток камердинеру. Несчастный искренне благодарен вам: теперь, когда ему принесут еду, достаточно будет только показать тюремщикам свисток, и его освободят. В благодарность камердинер, догадываясь, кто вы, говорит, что, если вы захотите "попасть на прием" к волшебнику, нельзя заходить в левую дверь. Вы принимаете тонкий намек, понимая, что больше он сказать не смеет, и идете дальше. Но остальные камеры-клетки пусты, и вам придется вернуться на развилку и либо свернуть <a href=btn:348>налево</a>, либо вернуться в первый коридор и пойти <a href=btn:537>направо</a>.
</html>

end

:588
param=6
proc removeStrength
<html>
Слава Богу, вы смогли сдержать крик.<!-- Потеряйте 6 СИЛ за укол волшебным шипом и--> <a href=btn:275>Обойдите кровать с другой стороны</a>.
</html>

end

:589
<html>
"К сожалению, да", - отвечаете вы. Принцесса спрашивает, хватит ли у вас решимости сразиться с ним, и вы заверяете ее, что не остановитесь ни перед чем, лишь бы маг был уничтожен. Тогда она показывает вам на зеркало и говорит, что за ним вы найдете все, что нужно для успеха. Вы просите ее подождать и <a href=btn:266>направляетесь к зеркалу</a>.
</html>

end

:590
<html>
Вы не доверяете воину злого волшебника и срываете крышку с сосуда. Из него вырывается зеленоватый газ и устремляется прямо к рыцарю. Через несколько секунд все кончено: стражу не удалось добежать даже до поворота коридора. Газ задушил его. Вам же некогда задумываться над тем, что за чудесный сосуд был у вас в руках. За поворотом вас ожидает низенькая деревянная дверца, в замке которой торчит ключ. <a href=btn:241>Вы поворачиваете его</a>.
</html>

end

:591
<html>
Библиотекарь не удивлен: видимо, он привык к тому, что его вид мало располагает к себе читателей. Но кажется, он даже доволен этим. Вы же проходите через библиотеку, тщательно стараясь ничего не свалить, и, открыв дверь, <a href=btn:627>попадаете в следующую комнату</a>.
</html>

end

:592
<html>
У входа на этаж стоит охрана: два огромных Гоблина с зазубренными мечами. Однако латы спасают вас, стражи низко кланяются и отходят в сторону. Вы <a href=btn:323>открываете дверь за их спинами</a>.
</html>

end

:593
param=3
proc removeStrength
<html>
Подъемник не рассчитан на такую тяжесть. Один из канатов обрывается, и вы летите вниз. А по пути задеваете за что-то головой<!-- (потеряйте 3 СИЛЫ)--> - и <a href=btn:409>теряете сознание…</a>
</html>

end

:594
<html>
Небольшая комнатка абсолютно пуста. Ваше внимание привлекает надпись на двери в ее противоположной стене: "Не входить! Личный кабинет Барлада Дэрта. Вход только по специальному разрешению!". Самое любопытное то, что вы не можете понять, чем сделана эта надпись. Судя по всему, и здесь не обошлось без магии: кажется, что буквы живут своей собственной жизнью, ежесекундно переливаясь и меняя цвет. Вы смело подходите к двери, быстро открываете ее и <a href=btn:553>переступаете порог</a>.
</html>

end

:595
<script>
expr_action = "dice = Math.floor(Math.random() * 6) + 1; modifyStrength(-1); if (dice == 1 || dice == 4) { readParagraph('130'); void(0) } else alert('Дверь не поддается!')";
</script>
<html>
Дверь заперта. Если у вас есть большой ключ или <a href="javascript: tryItem('Перстень с бриллиантом',595,40)">перстень с бриллиантом</a>, попробуйте открыть ее. Если хотите выломать ее, то<!--бросайте кубик до тех пор, пока у вас не выпадет 1 или 4. За каждый бросок вам придется вычитать у себя 1 СИЛУ--> <a href="javascript: eval(expr_action)">пробуйте сделать это</a>, пока не получится. Однако каждая попытка будет отнимать у вас силы - ведь ваше плечо, в отличие от двери, не обито железом.<!-- Если вы сломали дверь, то 130, а--> Если вы решили бросить эту затею, то можете (если этого еще не делали) попробовать открыть <a href=btn:393>дверь за вашей спиной</a> или <a href=btn:337>справа от вас</a>.
</html>

end

:596
param=1
proc removeStrength
<html>
Наложив заклятие Плавания, вступаете в реку. Течение такое быстрое, что уже через несколько секунд вы подплываете к тому месту, где река скрывается под замком. Сначала все идет как надо: после небольшого водопада, который удается миновать, отделавшись только легким испугом и не менее легким ушибом<!-- (потеряйте 1 СИЛУ)-->, река выравнивается и течет в высокой трубе где-то по подземельям замка. Но вдруг совершенно внезапно вы ударяетесь о невидимую решетку и чувствуете, что начинаете тонуть. Барлад Дэрт надежно защитил свой замок от любопытных глаз. Решетка развеяла заклятие, а плавать по-настоящему вы не умеете. Вода начинает прибывать, теперь уже нельзя воспользоваться даже заклятием Левитации: вам не пролететь, не захлебнувшись, по узкому пространству между трубой и водой. Есть только один выход: наложить еще одно <a href="javascript: useItem2('Плавание', 115)">заклятие Плавания</a> и попытаться выплыть против течения. Но догадались ли вы запастись еще одним таким заклятием?<!-- Если да, то 115. Если же нет--> Если нет, то решетка пропустит только ваш труп, который послужит хорошей пищей Гоблинам и Оркам…
</html>

end

:597
param=2
proc removeStrength
proc changedress
<html>
Вы теряете силы, пытаясь выбить дверь плечом, но она сработана на редкость крепко. Вам все же придется выбрать одну из оставшихся дверей: <a href=btn:350>прямо</a>, <a href=btn:398>справа</a> или <a href=btn:206>слева</a>.
</html>

end

:598
<html>
Вы начинаете спускаться по лестнице, но неожиданно ступени подламываются под вами. Как же так, ведь еще секунду назад лестница казалась такой прочной! Однако ловушки Черного замка неистощимы. Если у вас есть в запасе <a href="javascript: useItem2('Левитация', 501)">заклятие Левитации</a>, то вы еще сумеете вернуться обратно и попробовать выйти через другую дверь, если же нет, то ваше путешествие так и окончится в этом гибельном подземелье замка…
</html>

end

:599
proc changedress
<html>
Дверь мягко закрывается. Комната абсолютно пуста: ни мебели, ни ковров, только ветер нерешительно колышит занавески у распахнутого окна слева от вас. Более того, дверь, в которую вы только что вошли, - единственный путь вовне. Вы хотите вернуться обратно, но дверь уже закрылась, и открыть ее <a href=btn:642>при всем желании не удается</a>.
</html>

end

:600
<html>
Какое заклятие вы отдадите старичку?
<a href="javascript: useItem2('Ловкость', 600.1)">Ловкости?</a>
<a href="javascript: useItem2('Огонь', 600.1)">Огня?</a>
<a href="javascript: useItem2('Левитация', 600.1)">Левитации?</a>
<a href="javascript: useItem2('Плавание', 600.1)">Плавания?</a>
<a href="javascript: useItem2('Иллюзия', 600.1)">Иллюзии?</a>
<a href="javascript: useItem2('Слабость', 600.1)">Слабости?</a>
<a href="javascript: useItem2('Исцеление', 600.1)">Исцеления?</a>
<a href="javascript: useItem2('Копия', 600.1)">Копии?</a>

<a href=btn:464.1>Или у вас уже нет заклятий?</a>
</html>

end

:600.1
<html>
Старичок отдает вам перстень, сказав, что это не просто <a href="javascript: addItem('Перстень с бриллиантом')">перстень</a>, а ключ, который поможет открыть некоторые неподатливые двери в замке. <!--Если захотите использовать его, вычтите 40 из номера параграфа, на котором будет находиться дверь, и если ее можно открыть перстнем, она откроется. -->Если увидите дверь, можете им воспользоваться, и если дверь можно открыть перстнем, она откроется. <a href=btn:464.1>Теперь – …</a>
</html>

end

:601
param=6
proc removeStrength
<html>
Пытаетесь бежать, но огненное дыхание настигает вас.<!-- Потеряйте еще 6 СИЛ.--> Если остались живы, то как можно быстрее <a href=btn:232>торопитесь обратно в лес</a>, где Дракон не сможет вас преследовать.
</html>

end

:602
<html>
Вы поворачиваете на пальце Золотое кольцо. Гром потрясает замок до основания, и ваш противник <a href=btn:169>замертво падает на пол</a>.
</html>

end

:603
<html>
Дверь легко открывается, и вы попадаете в светлый широкий коридор. Но откуда же падает свет? Этого определить нельзя - похоже, что по крайней мере одна из загадок Черного замка <a href=btn:643>останется неразгаданной</a>.
</html>

end

:604
<script>
expr_action = "fightStart(8,10,'ПОВАР'); setLoyalty(12); afterBattle('604.1')";
</script>
<html>
Вы достаете меч и внезапно наносите удар ближайшему поваренку. Он падает замертво. Потом <a href="javascript: eval(expr_action)">поворачиваетесь к повару</a>.<!--
	ПОВАР
	Ловкость 8 Сила 10 Лояльность 12
	Если Лояльность Повара уменьшится до 3, он сдастся, и вы сможете запереть его в одном из шкафов. -->
</html>

end

:604.1
<html>
Победить его было не слишком сложно, однако, пока вы сражались, второй поваренок успел куда-то спрятаться. У вас нет времени его искать, и остается только надеяться, что он вылезет, когда вы будете уже далеко. Теперь, наконец-то, можно <a href=btn:173>заглянуть в сундук</a> или, не рискуя, <a href=btn:379>уйти из кухни</a>.
</html>

end

:605
<html>
Повинуясь какому-то не совсем осознанному стремлению, дотрагиваетесь до хмурого лица, висящего у вас на груди. Барлад Дэрт немного привстает со стула, заинтересованный вашим жестом, но в этот момент два тонких острых луча света из амулета пронзают его глаза. Вы так никогда и не узнаете, кто и когда изготовил эту чудесную вещицу. Случайно ли именно в этот момент ваша рука потянулась к ней, или вы лишь игрушка в руках Судьбы и богов? Остается лишь <a href=btn:169>быть довольным действием волшебства</a>.
</html>

end

:606
<script>
expr_action = "fightStart(8,8,'ПАУК'); afterBattle('19')";
expr_action2 = "if (itemExists('Копия')) {createCopy(); eval(expr_action); }";
</script>
<html>
Решив не доверять подозрительным лесным указателям, вы сворачиваете налево, но уже через несколько метров можете пожалеть о своем выборе. С быстротой молнии откуда-то сверху на вас набрасывается гигантский Паук. Наложить какое-либо заклятие, кроме заклятия <a href="javascript: eval(expr_action2)">Копии</a>, уже некогда - придется <a href="javascript: eval(expr_action)">сражаться</a>.<!--
	ПАУК
	Ловкость 8 Сила 8
	Если вы победили его, придите в себя, переведите дух и можете отправляться дальше - 19.-->
</html>

end	

:607
<html>
Вы поднимаетесь по лестнице на следующий этаж и видите еще одну <a href=btn:532>дверь</a>, которая, на ваше счастье, оказывается незапертой.
</html>

end	

:608
<html>
Вы говорите Дровосекам, что ищете Черный замок и… те теряют к вам всякий интерес. Они-то боялись, что вы ищете их деревню, а увидев острый меч у вашего пояса, стали подозревать недоброе. Успокоившись, они удаляются по дороге в ту сторону, откуда вы пришли, а вы вскоре выходите на развилку. Куда теперь лежит ваш путь: <a href=btn:214>прямо</a> или <a href=btn:38>направо</a>?
</html>

end

:609
<html>
Вы зовете Пегаса, и он мгновенно возникает за окном. Сесть верхом - дело нескольких секунд. Дорога обратно занимает всего лишь около часа - и вы во дворце. Поручение Короля осталось невыполненным, но кто мешает завтра утром начать все сначала?..
</html>

end

:610
<html>
Вы говорите, что <a href=btn:555>идете в замок драться с волшебником</a>. Может быть, это несколько опрометчиво, но лес еще не успел научить вас осторожности.
</html>

end

:611
<html>
Дверь тут же открывается в тесную узкую комнату. Посредине ее - проход, по краям - полки, уставленные бутылями самых невероятных цветов и размеров. Вы оказались в винном погребе, и навстречу идет его хозяин - Тролль. Как ни странно, не спрашивая, кто вы, он любезно предлагает отведать вина - <a href=btn:128>красного</a> или <a href=btn:32>белого</a>. А может быть, <a href=btn:226>эля</a>? Примете его предложение или будете <a href=btn:356>драться с ним</a>?
</html>

end

:612
<html>
Ваше внимание прежде всего привлекают руки волшебника. На них два перстня: с <a href=btn:196>рубином</a> и <a href=btn:258>изумрудом</a>. Возьмете один из них или<!--вернетесь на 169 и--> <a href=btn:169>осмотрите кабинет</a>?
</html>

end

:613
<script>
expr_action = "if (Gold < 10) alert('У Вас не хватает денег!'); else { modifyGold(-10); readParagraph('166'); }";
</script>
<html>
За кругленькую сумму в 10 золотых он готов не только посмотреть сквозь пальцы на ваше довольно-таки подозрительное пребывание в замке, но и выписать пропуск. <a href="javascript: eval(expr_action)">Согласитесь на его условия</a> или <a href=btn:65>будете драться</a>?
</html>

end

:614
<html>
Вы быстро используете еще одно заклятие и достигаете берега. Но <a href=btn:192>передохнуть вам не удается</a>.
</html>

end

:615
<html>
Вы пробираетесь за Обезьяной по лесу, пока она не выводит вас на <a href=btn:232>какую-то дорожку</a> и исчезает в чаще.
</html>

end

:616
<html>
Открыв дверь, вы попадаете в Гостиную. Уютные диваны и кресла, картины в золоченых рамках, вазы на столиках - все навевает покой. Однако выходов из комнаты не видно. Но вот из-за ширмы появляется и хозяйка - красивая женщина с тонким капризным лицом, в легком летнем платье. На ее лице играет не слишком уверенная улыбка. Попробуете <a href=btn:52>откупиться от нее</a> каким-нибудь подарком, достанете меч и <a href=btn:93>будете биться</a> или <a href=btn:654>поговорите с ней</a>?
</html>

end

:617
<script>
if (newGame) CheckLuck();
</script>
<html>
Через четверть часа - снова в лесу. Вы путешествуете уже достаточно долго, но так и не смогли углубиться в чащу, а ведь известно, что Черный замок - сердце Зачарованного леса.<!-- Киньте кубик и зачеркните выпавшее на нем число на квадрате УДАЧИ (если оно уже зачеркнуто, вам повезло).--> Тем временем перед вами новая развилка.<br>
	Пойдете <a href=btn:117>направо</a>?<br>
	Или <a href=btn:303>налево</a>?
</html>

end

:618
<script>
expr_action = "fightStart(9,8,'ГИГАНТСКИЙ ПАУК'); afterBattle('189')";
expr_action2 = "if (itemExists('Ловкость')) {removeItem('Ловкость'); AgilityFactor = 2; eval(expr_action) }";
expr_action3 = "if (itemExists('Слабость')) {removeItem('Слабость'); enemyPowerFactor = -2; eval(expr_action) }";
</script>
<html>
Паук затягивает вас на дерево, и вам приходится <a href="javascript: eval(expr_action)">сражаться</a> с ним. Во время боя ваша МОЩНОСТЬ УДАРА уменьшится - ведь вы не слишком-то привыкли драться на деревьях. Пользоваться заклятием Огня на дереве неразумно, Копии же просто негде будет поместиться. Однако вы можете воспользоваться заклятиями либо <a href="javascript: eval(expr_action2)">Ловкости</a><!-- , которое позволит вам прибавить 2 к своей Ловкости-->, либо <a href="javascript: eval(expr_action3)">Слабости</a><!-- , которое уменьшит на 2 МОЩНОСТЬ УДАРА противника -->. 
<!-- Если вы победили, то 189. -->
</html>

end

:619
proc lose
<html>
Шум боя гулко разносится по коридорам замка, и подоспевший отряд Гоблинов врывается раньше, чем вы успеваете добить вашего врага. Даже в самых кошмарных снах не приснится то, что они сделали с вами…
</html>

end

:620
<html>
Можете забрать у них <a href="javascript: addItem('Бронзовый свисток')">бронзовый свисток</a><!-- (- 214)--> и <a href="javascript: addItem('Медный ключик')">медный ключик</a><!-- (- 164)-->, которые им больше не понадобятся, и <a href=btn:118>перейти реку</a>.
</html>

end

:621
param=4
proc addStrength
<html>
Довольный возможностью подзаработать, он наливает вам тарелку горячих щей. Восстановите силы и <a href=btn:379>уходите</a>: у повара больше нет времени с вами заниматься. Если же вы намерены <a href=btn:604>любой ценой заглянуть в сундук</a>, повара и его подручных нельзя оставлять в живых.
</html>

end

:622
<html>
Вам повезло: в последний момент замечаете маленькую пещерку у подножия одного из холмов. Есть ли там обитатели, раздумывать некогда - это единственный шанс. К счастью, в пещерке никого нет, и обвал проносится мимо. Вы выбираетесь и, благословляя счастливую Судьбу, отправляетесь <a href=btn:121>дальше</a>.
</html>

end

:623
<html>
Понимая, что сопротивление бесполезно, Гоблин сдается. Решив пощадить ему жизнь, привязываете врага к ближайшему дереву и быстро обшариваете его карманы. Добыча невелика: всего лишь изящный <a href="javascript: addItem('Бронзовый свисток')">бронзовый свисток</a><!-- (- 214)-->. На ходу кладете его в заплечный мешок (если, конечно, хотите) и <a href=btn:118>идете к мосту</a>.
</html>

end

:624
<html>
Ваши глаза горят праведным гневом, а голос настолько уверен и напорист, что Орки, почесав в затылках, <a href=btn:100>пропускают вас</a>.
</html>

end

:625
<html>
Куда вы направитесь, используя заклятие?<br>
<a href=btn:413>К острову?</a><br>
<a href=btn:425>На другой берег?</a>
</html>

end

:626
<html>
При желании можете вытащить из кармана поверженного врага <a href="javascript: addItem('Бронзовый свисток')">бронзовый свисток</a><!-- (- 214)-->. И <a href=btn:437>снова в путь</a> - по тропинке, убегающей в лес.
</html>

end

:627
proc changedress
<html>
Комната, в которую вы попали, выглядит достаточно необычно. Ровно посередине к двери в противоположном конце комнаты протянулась узкая дорожка пола. Справа от нее - клумба с невиданными доселе красивыми голубыми цветами. Слева - грядка, на которой растут самые обычные на первый взгляд огурцы и лук. Хотите <a href=btn:142>понюхать цветы</a>, сорвать <a href=btn:471>лук</a> или <a href=btn:268>огурец</a> или предпочтете сразу <a href=btn:80>выйти через противоположную дверь</a>?
</html>

end

:628
<script>
expr_action = 'fightStart(10,10,"ПЕРВЫЙ РЫЦАРЬ",10,10,"ВТОРОЙ РЫЦАРЬ"); battleEndCondition("num_win > 0"); afterBattle("628.1",">6","628.2")';
</script>
<html>
Если вам нечего противопоставить безмолвной страже, придется <a href="javascript: eval(expr_action)">драться</a>. Капитан обезвредит любое ваше заклятие, так что можете даже и не пытаться их использовать.<!--
	ПЕРВЫЙ РЫЦАРЬ
	Ловкость 10 Сила 10
	ВТОРОЙ РЫЦАРЬ
	Ловкость 10 Сила 10
	Вам придется сражаться с ними одновременно. А через 6 раундов атаки к ним присоединится еще и
	ТРЕТИЙ РЫЦАРЬ
	Ловкость 10 Сила 10
	Когда вы победите двух рыцарей, в дело вступит Капитан:
	КАПИТАН РЫЦАРЕЙ
	Ловкость 12 Сила 14
	Если же произойдет чудо и вы сможете перебить всю охрану, то поднимитесь по лестнице на небольшой балкончик, куда выходят две двери. И выбирайте: войти в правую дверь (594) или в левую (599)?-->
</html>

end

:628.1
<script>
if (enemy [0].Strength) {
   enemyStrength = enemy [0].Strength;
   enemyDesc = "ПЕРВЫЙ РЫЦАРЬ";
}
else {
   enemyStrength = enemy [1].Strength;
   enemyDesc = "ВТОРОЙ РЫЦАРЬ";
}   
expr_action = 'fightStart(10,enemyStrength,enemyDesc,10,10,"ТРЕТИЙ РЫЦАРЬ"); afterBattle("628.3")';
</script>
<html>
Один из рыцарей побежден. Но к оставшемуся присоединяется еще один - придется опять <a href="javascript: eval(expr_action)">драться</a> с двумя одновременно.
</html>

end

:628.2
<script>
expr_action = 'fightStart(10,enemy [0].Strength,"ПЕРВЫЙ РЫЦАРЬ",10,enemy [1].Strength,"ВТОРОЙ РЫЦАРЬ",10,10,"ТРЕТИЙ РЫЦАРЬ"); afterBattle("628.3")';
</script>
<html>
К двум рыцарям присоединяется третий - придется <a href="javascript: eval(expr_action)">драться</a> с тремя одновременно.
</html>

end

:628.3
<script>
expr_action = 'fightStart(12,14,"КАПИТАН РЫЦАРЕЙ"); afterBattle("628.4")';
</script>
<html>
Теперь в дело вступит Капитан - придется <a href="javascript: eval(expr_action)">драться</a> и с ним.
</html>

end

:628.4
<html>
Произошло чудо! Вы смогли перебить всю охрану! Теперь поднимитесь по лестнице на небольшой балкончик, куда выходят две двери. И выбирайте: войти в <a href=btn:594>правую</a> дверь или в <a href=btn:599>левую</a>?
</html>

end

:629
<html>
Ничего себе, дружки подрались из-за добычи, а вам теперь из-за этого тратить драгоценную воду. Которая и самому пригодится: кто знает, что ждет впереди. Дав разбойнику понять, чтобы он поискал себе другого дурака, <a href=btn:234>идете дальше</a>.
</html>

end

:630
<html>
Ваши глаза горят праведным гневом, а голос настолько уверен и напорист, что Орки, почесав в затылках, <a href=btn:48>пропускают вас</a>.
</html>

end

:631
<html>
Подъемник благополучно спускает вас. Перед вами небольшая дверь, через которую выносят кушанья. Вы изо всех сил <a href=btn:76>налегаете на нее</a>.
</html>

end

:632
proc changedress
<html>
Сундук полон обрывками свитков. Это письма Принцессы к отцу, написанные еще в ту пору, когда Барлад Дэрт надеялся, что девушка согласится стать его женой. Он разрешил ей писать Королю, но ни одно послание не было отправлено - все они попали в этот сундук под охрану Призрака. Но и этим не удовлетворился злой маг - все письма разорваны, а у вас нет времени разгадывать головоломки, пытаясь определить, какой кусок свитка откуда. Бегло проглядывая обрывки, выхватываете из текста отдельные фразы, которые хоть как-то можно понять: "Меня охраняют Зеленые рыцари", "…дешь ко мне, захвати с собой белую стрелу", "…плохо и страшно…", "не присылай на верную смерть своих лю…", "…авная сила в волшебном перстне с рубином…" Теперь, если вы еще этого не сделали, можете посмотреть два оставшихся сундука: <a href=btn:474>большой</a> или <a href=btn:540>средний</a> или же <a href=btn:39>вернуться в большую залу</a>.
</html>

end

:633
<html>
Вы используете заклятие Левитации и благополучно перебираетесь на <a href=btn:424>противоположный берег реки</a>.
</html>

end

:634
<html>
"Еды-то у меня нет, - печально говорите вы, разводя руками, - но это не значит, что я служу Черному магу. Была бы, с удовольствием бы поделился". Незнакомцы недоверчиво смотрят на вас, как бы прикидывая, можно ли доверять вашим словам. В конце концов они на что-то решаются. <a href="javascript: CheckCharm('387', '374')">Проверьте ваше ОБАЯНИЕ</a>.<!-- Если все в порядке, то 387, если нет - 374.-->
</html>

end

:635
<html>
Сложный замок <a href=btn:130>мгновенно открывается</a>.
</html>

end

:636
proc lose
<html>
Дерево падает на вас раньше, чем вы успеваете понять, что происходит. Доверчивость сослужила вам плохую службу. Вы забыли, что лес наводнен шпионами злого волшебника, и попались на удочку одного из них. Ваше путешествие закончено…
</html>

end

:637
proc lose
<html>
У начала узкой тропинки он пропускает вас вперед. Но что это? Через несколько шагов вы поскальзываетесь и по пояс проваливаетесь в вонючую засасывающую жижу. Вы оборачиваетесь, чтобы позвать на помощь, но проводника и след простыл. Ведь он на работе - и маг неплохо ее оплачивает. Вам же надеяться больше не на что…
</html>

end

:638
<html>
Бой окончен, но что делать у ворот цитадели с военнопленными? Вы можете либо <a href=btn:473>убить оставшихся в живых</a>, либо довести до ближайших деревьев и привязать к ним их же ремнями. После чего <a href=btn:100>войти в ворота</a>.
</html>

end

:639
<html>
Механизм прекрасно сконструирован, и тяжеленная плита поднимается, даже не скрипнув. Тела лежат в беспорядке, в основном это скелеты. Между ними виднеется то, что опускали в могилу вместе с погребенными<!-- в качестве признаков рода занятий-->. Это <a href="javascript: addItem('Мешочек с тьмой')">мешочек</a>, внутри которого непроглядная тьма<!-- (+ 277)--></a>, <a href="javascript: addItem('Кнут')">кнут</a><!-- (- 24)-->, <a href="javascript: addItem('Веревка')">веревка</a><!-- (+ 172)--></a> и <a href=btn:402>копье</a>. Если вы решили что-то взять, то кладите вещи в заплечный мешок и решайте, через какую дверь лучше выйти: через <a href=btn:547>правую</a> или <a href=btn:501>левую</a>. Пронизывающее воздух напряжение не позволяет задерживаться: все в вас стремится прочь от этого места.
</html>

end

:640
<html>
Заклятия не действуют на Духа мертвых. Иллюзией его не удивишь - слишком много он повидал в туманном мире призраков##59$ огнем не сожжешь - он не более чем привидение. Сила его от Кадашмана, повелителя Зла, и не вам поражать его слабостью, а ваша сила если и возрастет, то и его увеличится на столько же. Вам придется <a href=btn:247>драться</a> с ним на мечах, причем у вас не будет даже заклятия Копии - подобных ему не было и нет.
</html>

end

:641
proc lose
<html>
Тянутся долгие минуты, показавшиеся часами: стража осматривает несколько телег перед вами. Потом острая мгновенная боль. Недоверчивый Орк ткнул мечом в ваш стог сена и лезвие прошло всего в нескольких сантиметрах от сердца. По крови, которая закапала на дорогу, стража понимает все - и вам никогда уже больше не увидеть солнца…
</html>

end

:642
instr str=позвать себе на помощь Пегаса
instr str2=
if Pegasos=1 then str="<a href=btn:609>позвать себе на помощь Пегаса</a>" else str2="Если же нет, то недели через две или три Зеленые рыцари, регулярно совершающие обход замка, найдут вас, но вряд ли тогда удастся не только спасти Принцессу, но и спастись самому…"
<html>
Вы выглядываете в окно, но не видите ни единого огонька - все поглощает мрак ночи. Заклятие Левитации бесполезно: остальные окна, если они и есть, закрыты. У вас остается только один выход: #str$, если вы знаете, как это сделать. #str2$
</html>

end

:643
proc lose
<html>
За углом коридор кончается: тупик. Вы быстро возвращаетесь обратно, но дверь, которая только что гостеприимно открылась, никак не хочет выпускать свою жертву. Это ловушка. Вы тщетно мечетесь в поисках выхода и никогда не узнаете, что через потолок, который чары мага сделали полупрозрачным, за вами с радостью наблюдают несколько Орков. Когда вы умрете от голода, они откроют дверь и заберут бездыханное тело…
</html>

end

:644
param=1
proc removeAgility
param=2
proc removeStrength
proc changedress
<html>
Вы снова пробуете поднять крышку, и снова она падает на руку.<!-- Потеряйте еще 1 ЛОВКОСТЬ и 2 СИЛЫ.--> Сундук заколдован! - догадываетесь вы. Что же теперь - обратите внимание на <a href=btn:540>средний</a> сундук, на <a href=btn:380>маленький</a> или же <a href=btn:39>вернетесь в большую залу</a>?
</html>

end

:645
param=2
proc removeStrength
<html>
Библиотекарь не понял вас, но вполне справедливо решил на всякий случай поднять тревогу. Вы не в силах сопротивляться вбежавшей страже - Гоблинам, вооруженным боевыми топорами. Нескольких вам удается убить, но врагов слишком много. Сильный удар по голове<!-- (потеряйте 2 СИЛЫ)--> - и <a href=btn:409>вы теряете сознание…</a>
</html>

end

:646
<html>
Дорога приводит к покосившейся и вросшей в землю бревенчатой хижине. Вокруг все тихо, и сколько вы не прислушиваетесь, не можете определить, есть ли кто-нибудь внутри или нет. <a href=btn:221>Рискнете войти</a> или пройдете мимо и <a href=btn:55>направитесь по тропинке в лес</a>?
</html>

end

:647
<script>
expr_action = 'fightStart(9,6,"ПЕРВЫЙ ОРК"); battleEndCondition("fight.spendRounds == 3"); afterBattle("647.1", "&& enemy [0].Strength != 0", "647.2")';
expr_action2 = 'if (itemExists("Копия")) {createCopy(); eval(expr_action) }';
</script>
<html>
Вооруженный мечом Орк, который расспрашивал вас, принимает на себя первый удар - <a href="javascript: eval(expr_action)">деритесь</a>. Если хотите, можете использовать заклятие <a href="javascript: eval(expr_action2)">Копии</a>.<!--
	ПЕРВЫЙ ОРК
	Ловкость 9 Сила 6
	Если вы убили его за три раунда атаки, то сражайтесь с двумя остальными. Если же нет, то через три раунда они приходят на помощь своему предводителю, и вам придется биться с тремя сразу. После того как Первый орк все же будет повержен, если хотите, ПРОВЕРЬТЕ СВОЮ УДАЧУ. Если вы удачливы, Третий орк не захочет умирать, защищая ворота, и убежит в лес. У вас же останется только один противник. Если же нет, то придется драться со всеми.
	ВТОРОЙ ОРК
	Ловкость 8 Сила 8
	ТРЕТИЙ ОРК
	Ловкость 7 Сила 8
	Если вы еще остались живы после битвы, то можете проскользнуть в ворота, оставив стражу лежать на дороге - 48.-->
</html>

end

:647.1
<script>
expr_action = 'fightStart(8,8,"ВТОРОЙ ОРК",7,8,"ТРЕТИЙ ОРК"); afterBattle("647.3")';
</script>
<html>
Теперь <a href="javascript: eval(expr_action)">сражайтесь</a> с двумя остальными.
</html>

end

:647.2
<script>
expr_action = 'if (enemy[0].Strength) { fightStart(9,enemy [0].Strength,"ПЕРВЫЙ ОРК",8,8,"ВТОРОЙ ОРК",7,8,"ТРЕТИЙ ОРК"); battleEndCondition("!enemy[0].Alive"); afterBattle() } else alert("Вы уже победили первого Орка!")';
luck_action = 'if (!enemy[0].Strength) { fightStart(8,enemy [1].Strength,"ВТОРОЙ ОРК",7,enemy [2].Strength,"ТРЕТИЙ ОРК"); CheckLuck(lucky); afterBattle("647.3") } else alert("Сначала победите первого Орка!")';
expr_action2 = 'if (!enemy[0].Strength) { fightStart(8,enemy [1].Strength,"ВТОРОЙ ОРК",7,enemy [2].Strength,"ТРЕТИЙ ОРК"); afterBattle("647.3") } else alert("Сначала победите первого Орка!")';
lucky = '/*setLoyalty(0, 3, "end", "647.3")*/ removeEnemy(1); alert("Третий Орк испугался и убежал!")';
</script>
<html>
Два других Орка приходят на помощь своему предводителю, и вам придется <a href="javascript: eval(expr_action)">биться</a> с тремя сразу. После того как Первый орк все же будет повержен, если хотите, <a href="javascript: eval(luck_action)">ПРОВЕРЬТЕ СВОЮ УДАЧУ</a>. Если вы удачливы, Третий орк не захочет умирать, защищая ворота, и убежит в лес. У вас же останется только один противник. Если же нет, то придется <a href="javascript: eval(expr_action2)">драться со всеми</a>.
</html>

end

:647.3
<html>
Если вы еще остались живы после битвы, то можете <a href=btn:48>проскользнуть в ворота</a>, оставив стражу лежать на дороге.
</html>

end

:648
proc lose
<html>
Одновременно с силой налегая на какую-то рукоять, торчащую рядом с ним из стены. Вы чувствуете, как пол уходит из-под ног. Река далеко внизу примет ваш труп, но вы так и не узнаете, что за кольцо держали в руках…
</html>

end

:649
param=2
proc removeStrength
<html>
Библиотекарь обманул вас, на самом деле решив на всякий случай поднять тревогу. Вы не в силах сопротивляться вбежавшей страже - Гоблинам, вооруженным боевыми топорами. Нескольких вам удается убить, но врагов слишком много. Сильный удар по голове<!-- (потеряйте 2 СИЛЫ)--> - и <a href=btn:409>вы теряете сознание…</a>
</html>

end

:650
proc changedress
<html>
Сосуд плотно закрыт пробкой, можете без опаски <a href="javascript: addItem('Серебряный сосуд')">положить его в заплечный мешок</a><!-- (- 57)-->. Что вы сделаете дальше: возьмете <a href=btn:253>стеклянный сосуд</a> или <a href=btn:39>выйдете из комнаты</a>?
</html>

end

:651
<script>
desc = 'ОБЕЗЬЯНА'; expr_action = 'fightStart(10,10,desc); afterBattle("408")';
</script>
<html>
Вы накладываете заклятие, и в воздухе появляется раскаленный огненный шар. Однако у Обезьяны великолепная реакция - в одно мгновение она оказывается на дереве и прячется в кроне. Натали, фея лесных грез, покровительница лесов и лесных жителей, не даст вам устроить лесной пожар - шар гаснет, как только касается первых же листьев. Через секунду Обезьяна снова готова к бою, и кажется, что она даже немного посмеивается над вами. Так или иначе, зверь атакует, и воспользоваться другими заклятьями вы уже при всем желании не успеете. <a href="javascript: eval(expr_action)">Вам приходится защищаться.</a><!--
	ОБЕЗЬЯНА
	Ловкость 10 Сила 10
	Если вы победили ее, то 408.-->
</html>

end

:652
<html>
Можете забрать у него <a href="javascript: addItem('Бронзовый свисток')">бронзовый свисток</a><!-- (- 214)-->, который ему больше не понадобится, и <a href=btn:118>перейти реку</a>.
</html>

end

:653
<html>
Дорога приводит на прекрасный маленький луг посреди леса. Вы даже и не думали, что здесь может встретиться такое красивое и спокойное место. Мягкая трава так и манит <a href=btn:159>прилечь и отдохнуть</a>, тем более что вы сильно устали.
</html>

end

:654
<html>
Очевидно, что Зеленый рыцарь либо вовсе не имеет права входить в эту комнату (тогда вы проиграли), либо должен вести себя по-хозяйски. "Привет", - небрежно бросаете вы на ходу, делая вид, что торопитесь. Улыбка на лице женщины гаснет, однако она машинальным движением отодвигает в сторону тяжелую портьеру слева от вас. За ней оказывается <a href=btn:361>дверь</a>.
</html>

end

:655
play #quest_path$/Snd/VICTORY.mp3
<script>
Strength = 0;
PanelClear();
</script>
<html>
Итак, путешествие подошло к концу. Миссия выполнена: Барлад Дэрт погиб от вашей руки, Принцесса свободна. Узнав о том, что их властелина более не существует, Зеленые рыцари, Гоблины, Орки, слуги и прочая нечисть торопятся как можно скорее покинуть замок: они понимают, что этому творению черной магии скоро придет конец. Коридоры замка быстро пустеют, и вы в безопасности выводите Принцессу наружу. Ворота распахнуты, стража оставила их. И вот уже страшная и угрюмая цитадель позади. Из-за леса показалось восходящее солнце, и с его первыми лучами Черный замок рушится, как карточный домик, и проваливается в разверзшуюся землю. Лес светлеет, и вы понимаете, что злые чары покинули его. Теперь дорога займет немного времени, и вскоре вы уже будете во дворце. После этого вы сможете покинуть Элгариол и его гостеприимную столицу, но у вас всегда будет возможность вернуться туда вновь, чтобы стать героем совсем другой истории…
</html>

end

:incorrect_answer
<html>
К сожалению, ваш ответ неверен. Что ж, <a href=btn:98>придется уходить.</a>
</html>

end

:lose
play #quest_path$/Snd/DIE.mp3
<script>
Strength = 0;
MusicStop();
PanelClear();
</script>
end

:win
play #quest_path$/Snd/WIN.mp3
end

:die
proc lose
<html>
Вы умерли!
</html>
end

:addStrength
<script>
if (newGame) modifyStrength(param);
</script>
play #quest_path$/Snd/PLUS.WAV
end

:removeStrength
<script>
if (newGame) modifyStrength(-param);
</script>
play #quest_path$/Snd/MINUS.WAV
end

:addAgility
<script>
if (newGame) modifyAgility(param);
</script>
play #quest_path$/Snd/PLUS.WAV
end

:removeAgility
<script>
if (newGame) modifyAgility(-param);
</script>
play #quest_path$/Snd/MINUS.WAV
end

:addGold
<script>
if (newGame) modifyGold(param);
</script>
play #quest_path$/Snd/MONEY.WAV
end

:startmusicloop
track=1
music #quest_path$/Snd/#track$.mp3
end

:endmusicloop
<script>
prev_track = track;
while (track == prev_track) track = Math.floor(Math.random() * 10) + 1;
</script>
music #quest_path$/Snd/#track$.mp3
end

:inarmor
<script>
if (Inventory [3]["Латы"])
{
   UrqExec("forget_procs");
   readParagraph('' + param);
}
</script>
end

:changedress
<script>
if (newGame) canChangeDress = 1;
</script>
end

:common
<script>
if (inCastle && canChangeDress)
   canChangeDress = 0;
</script>
end

:onsave
<script>
SaveGame();
</script>
end

:onload
<script>
LoadGame();
</script>
end

:afterload
<script>
newGame = true;
autoSelect = true;
selectContainer(0);
</script>
end


:code

let Agility=0
let Max_Strength=0
let Strength=0
let Charm=0
let binLuck=0
let Gold=0
let waterAmount=0
let foodAmount=0
let ContainsObjects [0]=0
let ContainsObjects [1]=0
let ContainsObjects [2]=0
let ContainsObjects [3]=0
let ContainsObjects [4]=0
let ContainsObjects [5]=0
let spellsAmountStr
let Sack_MaxAmount=0
let inCastle=0
let canChangeDress=0
let password=0
let treasure=0
let hyena=0
let ball=0
let message=0
let meat=0
let vegetables=0
let secret_door=0
let mirror=0
let Pegasos=0
let awaken=0
let wizardKilled=0
let track=1

<appendStyle element="head">
   img.item {
      position : absolute;
      visibility : 'hidden';
   }
   div.indicator {
      position : absolute;
      color : rgb(96,96,0);
      font-weight : bold;
      left : 103px;
   }
   div.legend {
      position : absolute;
      color : red;
      font-weight : bold;
   }
   a.clickable: link {
      color : red;
   }
</appendStyle>

<script>
    var Panel = document.createElement('div');
    Panel.id = "Panel";
    Panel.style.backgroundImage = "url('#quest_path$/Img/Panel_temp.bmp')";
    Panel.style.position = "absolute";
    Panel.style.width = '640px';
    Panel.style.height = '140px';

    var element = document.getElementById("framebox");
    element.appendChild(Panel);

    var div = document.createElement('div');
    div.id = "container_legend";
    div.className = "legend";
    Panel.appendChild(div);

    div = document.createElement('div');
    div.id = "Agility_value";
    div.className = "indicator";
    div.style.top = '20px';
    Panel.appendChild(div);

    div = document.createElement('div');
    div.id = "Strength_value";
    div.className = "indicator";
    div.style.top = '35px';
    Panel.appendChild(div);

    div = document.createElement('div');
    div.id = "Charm_value";
    div.className = "indicator";
    div.style.top = '50px';
    Panel.appendChild(div);

    div = document.createElement('div');
    div.id = "Luck_value";
    div.className = "indicator";
    div.style.top = '65px';
    Panel.appendChild(div);

    div = document.createElement('div');
    div.id = "Gold_value";
    div.className = "indicator";
    div.style.top = '80px';
    Panel.appendChild(div);

    div = document.createElement('div');
    div.id = "Water_value";
    div.className = "indicator";
    div.style.top = '95px';
    Panel.appendChild(div);
</script>

<appendContent elementId="framebox">
    <div id = "Fight_window" style="position: absolute; width: 340px; height: 255px; visibility: hidden; z-index: 1; background-image : url('#quest_path$/Img/Fight_Window.bmp')"></div>
    <div id = "BlockAllEvents" style="position: absolute; width: 640px; height: 480px; top: 0px; left: 0px; visibility: hidden; display: 'none'"></div>
</appendContent>

<appendScript element="body">

var imgUrl = "#quest_path$/Img/";

var isMobile = 'ontouchstart' in document.documentElement;

var newGame;
var Agility, Strength, Max_Strength, Charm;
var sumLuck, binLuck;
var Gold;
var foodAmount, waterAmount;
var numArticle;

var spellsAmountStr;
var Sack_MaxAmount;
var canChangeDress;

var ContainsObjects = new Array(6);

var headerHeight = 140;
var textHeight;

var Luck = new Array(6); 
var Spells_MaxAmount = 10;

var strContainers = new Array("Заплечный мешок", "Оружие", "На человеке",
                              "Одежда", "Заклятия", "Корзина");

var imgContainerNames =
[
   "Sack.bmp",
   "Weapon.bmp",
   "At_Me.bmp",
   "Cloths.bmp",
   "Spells.bmp",
   "Корзина.bmp"
];


var itemsRusNames = new Array(5);
itemsRusNames [0] = ["Еда", "Шкура лисы", "Медный ключик", "Бронзовый свисток", "Перо аиста", "Эмблема Черного Замка", "Статуэтка Орробы", "Перо павлина", "Кораблик", "Зажженное перо павлина", "Фляжка с бесцветной жидкостью", "Стаканчик с костями", "Яблоко", "Серебряный сосуд", "Фигурный ключ", "Флакончик духов", "Лепешки от укуса змеи", "Перламутровая устрица", "Бутыль с голубой жидкостью", "Черная стрела", "Шкура оленя", "Мешочек с лепестками розы", "Свеча", "Блестящий кусок металла", "Мандарин", "Четки", "Ананас", "Попона", "Банан",  "Пропуск", "Зеркальце", "Непонятный механизм", "Камея с изображением дракона", "Мешочек с тьмой", "Гребень", "Большой ключ", "Латы", "Лимон", "Стеклянный сосуд", "Золотой апельсин", "Светильник", "Лист вендории", "Клубочек", "Деревянный талисман", "Кнут", "Серебряный свисток", "Противоядие", "Стрела с белым оперением", "Золотой свисток", "Веревка", "Огниво", "Малиновая куртка"]; //52
itemsRusNames [1] = ["Меч", "Рунический меч", "Меч Зеленого рыцаря", "Щит", "Ножны"];
itemsRusNames [2] = ["Оберег", "Серебряный браслет", "Медальон с орлом", "Перстень с бриллиантом", "Перстень с изумрудом", "Орден летящего сокола", "Золотое кольцо", "Старинная подвеска", "Ожерелье из топазов", "Серебряное кольцо", "Драконий коготь", "Перстень с рубином", "Зеленая брошь", "Амулет для медведицы", "Волшебный пояс для крота", "Лицо древнего бога"];
itemsRusNames [3] = ["Малиновая куртка", "Латы"];
itemsRusNames [4] = ["Иллюзия", "Левитация", "Огонь", "Исцеление", "Плавание", "Слабость", "Копия", "Ловкость"];

var bonusParamsItems = ["Исцеление", "Еда", "Яблоко", "Мандарин", "Банан", "Ананас", "Лимон"];
var bonusStrength = [8, 4, 1, 2, 6, 3, 2];

var Inventory = new Array(5);
var itemsAmount = new Array(5);

var item_pos = {index0: -1, container: -1};
var itemStack = [];

var containers_posX = new Array(135, 172, 216, 251, 255);
var containers_posY = new Array(59, 20, 57, 26, 63, 30);

var highlight_containers_posX = new Array(135, 147, 214, 220, 253, 605);
var highlight_containers_posY = new Array(59, 19, 56, 24, 61, 87);

var container_legend;

var Panel, Fight_window, BlockAllEvents;
var Agility_value, Strength_value, Charm_value, Luck_value, Gold_value, Water_value;


var selected_container = 0; // Sack
var imgContainer = 0;
var imgItem;
var prev_pointed;
var autoSelect = false;
var drag = false;
var inBasket = false;
//var onMenuButton = false;
var imgBasket, item_moved = "";
var restore_x, restore_y;
//var fwin_x, fwin_y;
var initBattle = true;
var step = 0, phase = 1;
var figureImages = new Array();
var enemy_pictures = new Array(3);
var hero_picture, copy_picture;
var timerID;
var fight = new Array;
var enemiesCount;
var enemy = new Array(4);
var hero = new Array(4);
var fightEndParamsStr = ["spendRounds", "numWin", "expRounds", "num2"];
var num_win;
var flee_id;
var flee = false;
var copy = false;
var exp_Cond, endCondition, loyaltyEndAction, loyaltyParam;
var fleeArticle;
var selectedOpponent;
var AgilityFactor = 0;
var enemyPowerFactor = 0;
var enemyStrengthFactor = 0;
var lblStrength = new Array(5);
var imgLabel = new Array(4);
var imgLabel0;
var lbl_ypos = new Array(3);
var expr_action = new String;

function getOffset(evt)
{
    if(evt.offsetX != undefined)
        return {x:evt.offsetX,y:evt.offsetY};

    var el = evt.target;
    var offset = {x:0, y:0};

    while(el.offsetParent)
    {
        offset.x += el.offsetLeft;
        offset.y += el.offsetTop;
        el = el.offsetParent;
    }

    offset.x = evt.pageX - offset.x;
    offset.y = evt.pageY - offset.y;

    return offset;
}

function point_on_containers(e, x, y)
{
    point_at = -1;
    if (x >= 135 && x <= 315 && y >= 20 && y <= 104)
      if (y < 59) {
         if (x >= 149 && x <= 222)
            point_at = 1;
         else
            if (x >= 223 && x <= 293 && y >= 26)
               point_at = 3;
      }
      else
         if (y < 95) {
            if (x <= 171)
               point_at = 0;
            else
               if (x <= 215)
                  point_at = 1;
               else
                  if (x <= 250)
                     point_at = 2;
                  else
                     point_at = 4;   
         }
         else
            if (x <= 186 && y < 100)
               point_at = 0;
            else
               if (x > 215 && x <= 250)
                  point_at = 2;                               
   
    if (point_at != -1) {
        highlight_container(point_at);
        return;
    }
}

function hideContainer()
{
   if (imgContainer == imgBasket) {
      imgBasket.style.visibility = 'hidden';      
      if (inBasket)
         inBasket = false;
      return;
   }   
   imgContainer.onclick = null;
   imgContainer.onmouseout = null;
   if (selected_container != prev_pointed)
      highlight_container(selected_container);
}

function init_Containers()
{
   for (var i = 0; i < 6; i++) {
      imgContainer = document.createElement("IMG");
      imgContainer.className = "item";
      imgContainer.style.top = textHeight + highlight_containers_posY [i]  + 'px';
      imgContainer.style.left = highlight_containers_posX [i] + 'px';
      imgContainer.style.visibility = 'hidden';
      imgContainer.src = imgUrl + imgContainerNames [i];
      Panel.appendChild(imgContainer);
   }
   highlight_container(selected_container);
}

function createItem(itemStr, IsObject)
{
    var Item = document.createElement("IMG");
    Item.src = imgUrl + itemStr + ".bmp";
    Item.className = "item";
    Item.style.visibility = "hidden";

    if (createItem.arguments.length == 1)
          IsObject = true;

    if (IsObject) {
        Item.title = itemStr;     // Всплывающая подсказка (title или alt в зависимости от
        Item.alt = itemStr;       // браузера
        //Item.onmouseover = showHint;
        if (!isMobile)
            Item.ondrag = dragItem;
        else
            Item.ontouchstart = dragItem;

        for (var i in bonusParamsItems)
            if (bonusParamsItems [i] == itemStr) {
                if (!isMobile)
                    Item.ondblclick = useItem;
                else
                    Item.onclick = useItem;
                Item.ch = bonusStrength [i];
                break;
            }
        for (i in itemsRusNames [3])
            if (itemsRusNames [3] [i] == itemStr)
                if (!isMobile)
                    Item.ondblclick = useItem;
                else
                    Item.onclick = useItem;

        itemStack.push(Item.title);

        Item.onload = function() {
            itemStr = itemStack.shift();
            if (itemStack.length == 0)
            {
                fill_Containers();
                item_pos = findItemByString(itemStr);
                autoSelect = true;
                selectContainer(item_pos.container);
            }
        };
   }
   else
      Item.style.visibility = 'visible';
   
   return Item;
}


function init_Inventory()
{
    for (var i = 0; i < 5; i++) {
        for (var j in itemsRusNames [i])
           Inventory [i][itemsRusNames [i][j]] = 0;
        itemsAmount [i] = 0;
    }

    if (newGame)
        return;

    var container_startIndex = 13;
    var count = Panel.childNodes.length - container_startIndex;
    var index0, term;

    for (i = 0; i < count; i++)
        Panel.removeChild(Panel.childNodes [container_startIndex]);


   for (i = 0; i < 6; i++) {
      if (i > 1 || !i) {
         var obj_num = 0;
         j = 0;
      }
      var binNumber = ContainsObjects [i];
      
      if (i > 1)
         index0 = i - 1;
      else
         index0 = 0;  
      
      if (i)
         term = itemsRusNames [index0].length;
      else
         term = 26;   
         
      while (binNumber != 0) {
         var exists = binNumber % 2;
         binNumber = Math.floor(binNumber / 2);
         var itemStr = itemsRusNames [index0][obj_num];
         
         if (exists) {
            count = 1;
            if (i == 0) {
               if (obj_num == 0)
                  count = foodAmount;
            }
            else
               if (i == 5 && spellsAmountStr != undefined)
                  count = parseInt(spellsAmountStr.charAt(7 - obj_num)) + 1;
         
            j += count;
            Inventory [index0][itemStr] = count;
               
            while (count--) {
               imgItem = createItem(itemStr);
               Panel.appendChild(imgItem);
            }
         }
               
         obj_num++;
         if (obj_num == term)
            break;
      }
      if (i)
         itemsAmount [index0] = j;
      else
         obj_num = 26;
   }
}   


function fill_Containers()
{
   var numImage = 13;
   for (var i = 0; i < 5; i++) {
      var amount = itemsAmount [i];
      if (amount > 0)
          refresh_Container(i, numImage, amount, parseInt(Panel.style.height) - 10);
      numImage += amount;
   }
}
            
function refresh_Container(container, index1, amount, max_height)
{
   var half_amount = Math.floor(amount / 2);
   var posX;

   if (amount == half_amount * 2)
      posX = 455 + 10;  
   else   
      posX = 455 - Panel.childNodes [index1 + half_amount].width / 2 + 10;
   var i;   
   for (i = 0; i < half_amount; i++) {
      posX -= Panel.childNodes [index1 + i].width;
      if (container == 4)
         posX -= 10;
      else   
         posX -= 3;   
   }
   if (posX < 365) {
      var maxHeight1 = Panel.childNodes [index1].height;
      for (i = 1; i < half_amount; i++) {
         var tmpHeight = Panel.childNodes [index1 + i].height;
         if (tmpHeight > maxHeight1)
            maxHeight1 = tmpHeight;
      }          
      var maxHeight2 = Panel.childNodes [index1 + i].height;
      i++;
      for (; i < amount; i++) {
         tmpHeight = Panel.childNodes [index1 + i].height;
         if (tmpHeight > maxHeight2)
            maxHeight2 = tmpHeight;
      }
      max_height -= maxHeight2 - 10;
      refresh_Container(container, index1, half_amount, max_height);
      refresh_Container(container, index1 + half_amount, amount - half_amount,
                        max_height + 2 * maxHeight1);
      return;   
   }
      
   for (i = 0; i < amount; i++) {
      imgItem = Panel.childNodes [index1 + i];
      imgItem.style.left = posX + 'px';
      imgItem.style.top = textHeight + (max_height - imgItem.height) / 2 + 'px';
      posX += imgItem.width;
      if (container == 4)
         posX += 10;
      else
         posX += 3;            
   }   
}

function findItemByString(itemStr)
{
   var Str;
   var item_pos = {index0: 13, container: -1};
   
   for (var i = 0; i < 5; i++)
      for (var j in itemsRusNames [i]) {
         Str = itemsRusNames [i][j];
         if (itemStr == Str) {
            item_pos.container = i;
            return item_pos; 
         }   
         item_pos.index0 += Inventory [i][Str];
      }
   item_pos.index0 = -1;
   return item_pos;   
}

function itemExists(itemStr)
{
   item_pos = findItemByString(itemStr);
   if (Inventory [item_pos.container][itemStr] == 0) {
      switch (item_pos.container) {
         case 0:
            if (itemStr != 'Еда')
               alert("У Вас нет такой вещи!");
            else
               alert("У Вас нет еды!");
            return 0;
         case 2:
            alert("У Вас нет такого предмета!");
            return 0;
         case 3:
            alert("У Вас нет такой одежды!");
            return 0;            
         case 4:
            alert("У Вас нет такого заклятия!");
      }      
	  return 0;
   }	  
   
   return Inventory [item_pos.container][itemStr];   
}


function addItem(itemStr)
{
    item_pos = findItemByString(itemStr);
    var filled;

    if (item_pos.container == 0) {
        if (itemStr == "Латы" || Inventory [0]["Латы"])
            filled = (itemsAmount [0] > Sack_MaxAmount - 3);
        else
            filled = (itemsAmount [0] == Sack_MaxAmount);

        if (filled) {
            alert("Ваш заплечный мешок полон!");
            return;
        }
    }
    if (item_pos.container == 4 && itemsAmount [4] == Spells_MaxAmount) {
        alert("Вы не можете взять больше десяти заклятий!");
        return;
    }
      
    if (item_pos.container != 4 && Inventory [item_pos.container] [itemStr] && itemStr != 'Еда') {
        alert("У Вас уже есть " + itemStr + "!");
        return;
    }

    imgItem = createItem(itemStr);

    var container_startIndex = 13;
    for (var i = 0; i < item_pos.container; i++)
        container_startIndex += itemsAmount [i];

    if (itemsAmount [i] == item_pos.index0 - container_startIndex) {
        sum_items_Above = 0;
        for (++i; i < 5; i++)
            sum_items_Above += itemsAmount [i];

        if (!sum_items_Above)
            Panel.appendChild(imgItem);
        else
            Panel.insertBefore(imgItem, Panel.childNodes [item_pos.index0]);
    }
    else
        Panel.insertBefore(imgItem, Panel.childNodes [item_pos.index0]);

    Inventory [item_pos.container][itemStr]++;
    itemsAmount [item_pos.container]++;
    if (itemStr == 'Еда')
        foodAmount++;
}

function removeItem(itemStr)
{
   var container_startIndex = 13;

    if (item_moved)
        lbl: for (var i = 0; i < 5; i++) {
            var index1 = container_startIndex;
            for (var j in itemsRusNames [i]) {
                itemStr = itemsRusNames [i][j];
                for (var k = 0; k < Inventory [i][itemStr]; k++) {
                    if (Panel.childNodes [index1] == item_moved)
                        break lbl;
                    index1++;
                }
            }
            container_startIndex += itemsAmount [i];
        }
    else {
        item_pos = findItemByString(itemStr);
        item_moved = Panel.childNodes [item_pos.index0];
        for (i = 0; i < item_pos.container; i++)
            container_startIndex += itemsAmount [i];
    }

   Inventory [i][itemStr]--;
   itemsAmount [i]--;
   if (itemStr == 'Еда')
      foodAmount--;
   
   Panel.removeChild(item_moved);
   item_moved = "";
      
   refresh_Container(i, container_startIndex, itemsAmount [i], parseInt(Panel.style.height) - 10);
   autoSelect = true;
   selectContainer(i);
}

function buyItem(itemStr, price)
{
   if (Gold >= price) {
      var item_pos = findItemByString(itemStr);
      exists = Inventory [item_pos.container][itemStr];
      addItem(itemStr);      
      if (!exists)
         modifyGold(-price);
   }   
   else
      alert("У Вас не хватает денег!");
}

function useItem2(itemStr, curLoc, modLoc)
{
   if (itemExists(itemStr)) {
      removeItem(itemStr);
      if (useItem2.arguments.length > 2)
         readParagraph("" + (curLoc + modLoc));
      else
         readParagraph("" + useItem2.arguments [1]);   
   }   
}

function tryItem(itemStr, curLoc, modLoc)
{
   if (itemExists(itemStr)) {
      if (tryItem.arguments.length > 2)
         readParagraph("" + (curLoc + modLoc));
      else
         readParagraph("" + tryItem.arguments [1]);   
   }   
}

function addItem2(itemStr, newLoc)
{
   addItem(itemStr);
   item_pos = findItemByString(itemStr);
   if (Inventory [item_pos.container][itemStr])
      readParagraph(newLoc);
}


function wearItem(itemStr, present)
{
     
   if (present)
      removeItem(itemStr);   
   
   var container = 3;
   var startIndex = 13;
   var Str;
   var i, j;
   for (i = 0; i < container; i++)
      startIndex += itemsAmount [i];
   
   var index0 = startIndex;
   startIndex += itemsAmount [i];   
   
   for (j in itemsRusNames [i]) {
      Str = itemsRusNames [i][j];
      if (Inventory [i][Str]) {         
         Panel.removeChild(Panel.childNodes [index0]);
         index0 += Inventory [i][Str];         
         itemsAmount [i] -= Inventory [i][Str];
         Inventory [i][Str] = 0;         
         addItem(Str);
      }      
      /*if (itemStr == Str)
         startIndex = index0;*/
   }
   
   imgItem = createItem(itemStr);
   if (!itemsAmount [4])
      Panel.appendChild(imgItem);
   else
      Panel.insertBefore(imgItem, Panel.childNodes [startIndex]);
      
   Inventory [container][itemStr] = 1;
   itemsAmount [container] = 1;   
   
   refresh_Container(container, index0, itemsAmount[container], parseInt(Panel.style.height) - 10);

   autoSelect = true;
   selectContainer(container);
}

function putOnItem(itemStr, curLoc, modLoc)
{
   item_pos = findItemByString(itemStr);
   if (Inventory [0][itemStr] != 0 || Inventory [3][itemStr] != 0) {
      if (Inventory [3][itemStr] == 0)
         wearItem(itemStr, true);
      if (putOnItem.arguments.length > 2)
         readParagraph("" + (curLoc + modLoc));
      else   
         if (putOnItem.arguments.length > 1)
            readParagraph("" + useItem2.arguments [1]);   
   }
   else
      alert("У Вас нет такой одежды!");         
}

function putOffItem(itemStr)
{
   if (itemsAmount [0] < Sack_MaxAmount && itemStr != "Латы" && !Inventory [0]["Латы"] || itemsAmount [0] < Sack_MaxAmount - 2) {
      var container = 3;
      var container_startIndex = 13;
      for (var i = 0; i < container; i++)
         container_startIndex += itemsAmount [i];
         
      var index1 = container_startIndex;
      for (var j in itemsRusNames [i]) {
         var Str = itemsRusNames [i][j];
         if (itemStr != Str)
            index1 += Inventory [i][Str];
         else
            break;
      }   
   
      item_moved = Panel.childNodes [index1];

      Inventory [container][itemStr]--;
      itemsAmount [container]--;
   
      Panel.removeChild(item_moved);
      item_moved = "";
      
      refresh_Container(container, container_startIndex, itemsAmount [container], parseInt(Panel.style.height) - 10);
   }
   addItem(itemStr);
}


function inputAnswer(correctAnswer, correctLoc, incorrectLoc)
{
   var answer = prompt("Введите ответ:", "");
   if (/*typeof(answer) == "string" &&*/ answer.toLowerCase() == correctAnswer.toLowerCase())
      readParagraph(correctLoc);
   else
      readParagraph(incorrectLoc);   
}

function show_legend(num)
{
   container_legend.style.top = textHeight + 110 + 'px';
   container_legend.style.left = containers_posX [num] + 'px';
   container_legend.innerText = strContainers [num];
}

function highlight_container(num)
{
   if (num != prev_pointed) {
      imgContainer.style.visibility = "hidden";
      imgContainer.onclick = null;
      imgContainer.onmouseout = null;
   }     
   
   imgContainer = Panel.childNodes [num + 7];
   imgContainer.style.visibility = "visible";
   if (num != 5)
      imgContainer.onclick = onSelectContainer;
   imgContainer.onmouseout = hideContainer;
   if (num == 5)
        return;
   show_legend(num);
   prev_pointed = num;
}

function onSelectContainer()
{
    autoSelect = false;
    selectContainer(prev_pointed);
}

function selectContainer(sel_index)
{
   if (autoSelect)
       highlight_container(sel_index);

   var itemIndex;

   var prev_container = selected_container;
   if (sel_index != prev_container) {

      itemIndex = 13;
      for (var i = 0; i < prev_container; i++)
         itemIndex += itemsAmount [i];
      for (i = 0; i < itemsAmount [prev_container]; i++)
         Panel.childNodes [itemIndex++].style.visibility = "hidden";
   }

   itemIndex = 13;
   for (i = 0; i < sel_index; i++)
      itemIndex += itemsAmount [i];
      
   for (i = 0; i < itemsAmount [sel_index]; i++)
      Panel.childNodes [itemIndex++].style.visibility = "visible";
   
   selected_container = sel_index;
}

function SaveGame()
{
   spellsAmountStr = "";
   for (var i = 0; i < 5; i++) {
      var binNumber = 0;
      
      for (var j = itemsRusNames [i].length - 1; j >= 0; j--) {
         binNumber *= 2; 
         var itemStr = itemsRusNames [i][j];
         var num;
         if (num = Inventory [i][itemStr]) {
            binNumber++;
            
            if (i == 4) {
               num--;
               spellsAmountStr += num.toString();
            }   
         }
         else
            if (i == 4)
              spellsAmountStr += "0";        
         
         if (!i && j == 26) {
            ContainsObjects [1] = binNumber;
            binNumber = 0;
         }
      }

      if (i)
         ContainsObjects [i + 1] = binNumber;
      else   
         ContainsObjects [0] = binNumber;
   }
   
   binLuck = 0;
   for (i = 0; i < 6; i++) {
      binLuck *= 2; 
      if (Luck [5 - i])
         binLuck++;    
   }   
   
   return 1; 
}

function LoadGame()
{
    sumLuck = 0;
    for (var i = 0; i < 6; i++) {
        if (binLuck % 2) {
            sumLuck++;
            Luck [i] = true;
        }
        else
            Luck [i] = false;

        binLuck = Math.floor(binLuck / 2);
    }
    newGame = false;
    if (container_legend.innerHTML == "")
        PanelShow();
    if (Fight_window.style.visibility == 'visible' || Fight_window.style.display != 'none')
        fightEnd();

    DisplayStuff();
    SoundStop();
    MusicPlay();
}

function DisplayStuff()
{
    Agility_value.innerText = Agility.toString();
    Strength_value.innerText = Strength.toString();
    Charm_value.innerText = Charm.toString();
    Luck_value.innerText = sumLuck.toString();
    Gold_value.innerText = Gold.toString();
    modifyWater(0);
    init_Inventory();
}


function modifyStrength(modStrength)
{
   if (Strength != Max_Strength || modStrength < 0)
      Strength += modStrength;
   else
      return;   
   
   if (Strength > Max_Strength)
      Strength = Max_Strength;
   else if (Strength < 0)       
      Strength = 0;
   Strength_value.innerText = Strength.toString();
   if (Strength == 0) {      
      alert("Вы потеряли много сил и умерли!");
      PanelClear();
   }
}

function modifyAgility(modAgility)
{
   Agility += modAgility;
   Agility_value.innerText = Agility.toString();
}

function modifyGold(modGold)
{
   Gold += modGold;
   Gold_value.innerText = Gold.toString();
}

function modifyWater(modWater)
{
   waterAmount += modWater;
   if (waterAmount > 0)
      Water_value.innerHTML = "<a class='clickable' href='javascript: drink()'>" + waterAmount.toString() + "</a>";
   else
      Water_value.innerText = "0";
}

function drink()
{
   if (Strength != Max_Strength) {
      modifyWater(-1);
      modifyStrength(2);
   }
   else
      alert("Ваша сила равна максимальной - попейте позднее!");   
}

function setInitial_Parameters()
{
   var table = [[8,22,8], [10,20,6], [12,16,5], [9,18,8], [11,20,6], [9,20,7],
                [10,16,7], [8,24,7], [9,22,6], [10,18,7], [11,20,5]];
                     
   var dice = Math.floor(Math.random() * 6) + Math.floor(Math.random() * 6);
                          
   Agility = table[dice][0];
   Max_Strength = table[dice][1];
   Strength = Max_Strength;
   Charm = table[dice][2];
   
   sumLuck = 0;
   var dice1 = Math.floor(Math.random() * 6);
   var dice2 = Math.floor(Math.random() * 6);
   for (var i = 0; i < 6; i++)
      if (i != dice1 && i != dice2) {
         Luck [i] = true;
         sumLuck++;     
      }
      else
         Luck [i] = false;
   
   Gold = 0;
   foodAmount = 0;
   waterAmount = 0;
   Sack_MaxAmount = 7;
   canChangeDress = 1;
   newGame = true;
}

function CheckLuck(Loc1, Loc2)
{
   var loc;
   
   var dice = Math.floor(Math.random() * 6);
   if (Luck [dice]) {
      Luck [dice] = false;
      sumLuck--;
      Luck_value.innerText = sumLuck.toString();
	  if (CheckLuck.arguments.length != 0)
	     loc = eval(Loc1);
   }	     
   else
      if (CheckLuck.arguments.length == 2)
         loc = eval(Loc2);
   
   if (loc != null && loc != undefined)
      readParagraph("" + loc);
}

function CheckCharm(Loc1, Loc2)
{
   if (Charm > 12) {
      readParagraph(Loc1);
      return;
   }   
   else if (Charm == 1) {
      readParagraph(Loc2);
      return;
   }   
   var dice = Math.floor(Math.random() * 6) + Math.floor(Math.random() * 6) + 2;
   if (dice <= Charm) {
      Charm++;
      readParagraph(Loc1);
   }
   else  {
      Charm--;
      readParagraph(Loc2);
   }  
   Charm_value.innerText = Charm.toString();
}

function fightStart(Agility1, Strength1, enemyDesc1)
{
   BlockAllEvents.style.display = '';
   BlockAllEvents.style.visibility = 'visible';
   BlockAllEvents.style.zIndex = 1;
   Fight_window.style.display = '';
   Fight_window.style.visibility = 'visible';
   Fight_window.style.zIndex = 2;
   
   num_win = 0;
   num_killed = 0;
   enemiesCount = Math.floor(fightStart.arguments.length / 3);
   endCondition = null;
   loyaltyEndAction = null;
   
   for (var i = 0; i < enemiesCount; i++) {
      enemy [i].Agility = fightStart.arguments [i * 3];
      enemy [i].Strength = fightStart.arguments [i * 3 + 1];
      enemy [i].StrengthFactor = enemyStrengthFactor;
      enemy [i].Loyalty = 0;
      enemy [i].Alive = true; 
      var desc = fightStart.arguments [i * 3 + 2] + "\r\nЛовкость " + enemy [i].Agility;
      enemy_pictures [i] = Fight_window.childNodes [i + 2];
      enemy_pictures [i].style.visibility = 'visible';
      if (isMobile)
          enemy_pictures [i].rel = "tooltip";
      enemy_pictures [i].title = desc;
      enemy_pictures [i].alt = desc;
      
      lblStrength [i + 2].innerText = enemy [i].Strength.toString();
      lblStrength [i + 2].style.visibility = 'visible';
   }
   
   if (!copy) {
      hero.Agility = Agility + AgilityFactor;
      hero.Strength = Strength;
   }
   else {
      hero.Agility = enemy [0].Agility;
      hero.Strength = enemy [0].Strength;   
   }
   
   if (enemiesCount == 2)
      lbl_ypos [0] = 128 - 21  / 2 - 51;
   else
      if (enemiesCount == 3) 
         lbl_ypos [0] = 128 - 51 / 2 - (21 + 51);
         
   hero_picture = Fight_window.childNodes [0];
   hero_picture.style.visibility = 'visible';
   if (copy) {
      copy_picture = Fight_window.childNodes [1];
      copy_picture.style.visibility = 'visible';
      lblStrength [0].style.top = 120 + 'px';
   }
   else
      lblStrength [0].style.top = 151 + 'px';
   
   lblStrength [0].style.left = 246 + 'px';
   lblStrength [0].innerText = Strength.toString();
   lblStrength [0].style.visibility = 'visible';
   if (copy) {
      lblStrength [1].style.top = 194 + 'px';
      lblStrength [1].style.left = 246 + 'px';
      lblStrength [1].innerText = hero.Strength.toString();
      lblStrength [1].style.visibility = 'visible';
   }   
   
   hero.Hurt = false;
   setFigurePositions(0);
   
   for (i = 0; i < enemiesCount; i++) {
      if (i) {
         lbl_ypos [i] = lbl_ypos [i - 1] + 51 + 21;
         imgLabel0 = Fight_window.childNodes [i + 11];
         imgLabel0.style.top = lbl_ypos [i] + 'px';
      }
      else
         if (enemiesCount == 1)   
            imgLabel0 = Fight_window.childNodes [10];
         else {
            imgLabel0 = Fight_window.childNodes [11];
            imgLabel0.style.top = lbl_ypos [0] + 'px';
         }
               
      imgLabel0.style.visibility = 'visible';
      
      lblStrength [i + 2].style.top = parseInt(enemy_pictures [i].style.top) +
                                         enemy_pictures [i].height + 3 + 'px';
      lblStrength [i + 2].style.left = 303 + 'px';
      
   }
   
   initBattle = true;
   selectedOpponent = -1;
}

function fightEnd()
{
    for (var i = 0; i < enemiesCount; i++)
        if (enemy [i].Alive || exp_Cond) {
            Fight_window.childNodes [i + 2].style.visibility = 'hidden';
            lblStrength [i + 2].style.visibility = 'hidden';
            if (enemiesCount > 1)
                Fight_window.childNodes [i + 11].style.visibility = 'hidden';
        }
    if (enemiesCount == 1)
        Fight_window.childNodes [10].style.visibility = 'hidden';

    if (flee)
    {
        Fight_window.childNodes [14].style.visibility = 'hidden';
        flee = false;
    }
    if (copy && !exp_Cond) {
        Fight_window.childNodes [1].style.visibility = 'hidden';
        lblStrength [1].style.visibility = 'hidden';
        copy = false;
    }
   
   Fight_window.style.display = 'none';
}

function setLoyalty()
{
   for (var i = 0; i < enemiesCount; i++)
      enemy [i].Loyalty = setLoyalty.arguments [i];
   loyaltyEndAction = setLoyalty.arguments [enemiesCount];
   loyaltyParam = setLoyalty.arguments [enemiesCount + 1];  
   
   flee = true;
}

function removeEnemy(_id)
{
   
   var j, message1;
   
   enemy [_id].Alive = false;
   num_win++;
   if (flee_id) {
      if (enemiesCount > 1)
         message1 = flee_id + "-й противник ";
      else
         message1 = "Противник ";
      message1 += "сдался";
      if (num_win == enemiesCount)
         message1 += " - Вы победили!";
      else
         message1 += "!";
      alert(message1);        
   }
   
   if (loyaltyEndAction == "end" && num_win == enemiesCount) {
      if (enemy [_id].Strength > 0) {
         fight.numWin = loyaltyParam;         
         fight.spendRounds = fight.expRounds = 0;
      }   
   }   
   else /*if (loyaltyEndAction == null || loyaltyEndAction == "change")*/ {      
      enemy_pictures [_id].style.visibility = 'hidden';
      lblStrength [_id + 2].style.visibility = 'hidden';
      if (enemiesCount != 1)
         imgLabel0 = Fight_window.childNodes [_id + 11];
      else
         imgLabel0 = Fight_window.childNodes [10];
          
      imgLabel0.style.visibility = 'hidden';
      if (imgLabel0 != Fight_window.childNodes [10])
         Fight_window.childNodes [10].style.visibility = 'hidden'; // глюк после победы над 2-м противником, если их трое
         
      if (loyaltyEndAction == "change")
         for (j = 0; j < enemiesCount; j++)
            if (enemy [j].Alive && enemy [j].Loyalty) {               
               enemy [j].Loyalty += loyaltyParam;               
               if (enemy [j].Loyalty <= 3)
                  removeEnemy(j);
               if (enemy [j].Loyalty > 18)
                  if (enemy [j].StrengthFactor)
                     enemy [j].StrengthFactor++;
                  else
                     enemy [j].StrengthFactor = 3;
            }
   }   
}

function setFigurePositions(step)
{
   
   if (step == 3 && hero.Hurt) {
      if (!copy) {
         hero_picture.style.left = 228 + 'px';
         hero_picture.style.top = 107 + 'px';
         hero_picture.src = figureImages [8].src;
      }
      else {
         copy_picture.style.left = 228 + 'px';
         copy_picture.style.top = 150 + 'px';
         copy_picture.src = figureImages [8].src;
         hero_picture.src = figureImages [0].src;
      }
   }
   else {
      hero_picture.style.left = 236 + 'px';
      if (!copy) {
         hero_picture.style.top = 102 + 'px';
         hero_picture.src = figureImages [step * 2].src;
      }   
      else {
         hero_picture.style.top = 73 + 'px';
         hero_picture.src = figureImages [0].src;
         copy_picture.style.left = 236 + 'px';
         copy_picture.style.top = 145 + 'px';
         copy_picture.src = figureImages [step * 2].src;
      }
   }   
   
   var enemy_X, enemy_Y;
   if (enemiesCount == 1)
      enemy_Y = 98;
   else
      if (enemiesCount == 2)
         enemy_Y = 128 - 28 / 2 - figureImages [0].height;
      else
         enemy_Y = 128 - figureImages [0].height / 2 - 28 - figureImages [0].height;   
        
   for (var i = 0; i < enemiesCount; i++) {
      
      if (enemy [i].Alive) {
      
         if (step == 3)
            if (enemy [i].Hurt) {
               enemy_X = 290;
               enemy_Y += 7;
               enemy_pictures [i].src = figureImages [9].src;
            }
            else {
               enemy_X = 287;            
               enemy_pictures [i].src = figureImages [7].src;   
            }
         else {
            if (step == 2) {
               enemy_X = 274;
               enemy_Y += 14;               
            }
            else
               enemy_X = 287;               
            
            enemy_pictures [i].src = figureImages [step * 2 + 1].src;
         }
         enemy_pictures [i].style.left = enemy_X + 'px';
         enemy_pictures [i].style.top = enemy_Y + 'px';
      }
      enemy_Y += figureImages [0].height + 14;
      if (step != 2 || !enemy [i].Alive)
         enemy_Y += 14;   
   }
}

function battleSequence()
{
   if (phase == 1) {
      step++;
      if (step == 4) {
         step = 2;
         phase = 2;
      }
   }
   else
      if (!step) {
         
         fight.spendRounds++;      
         
         if (hero.Strength < 1)
            hero.Strength = 0;
         if (!copy) {
            Strength = hero.Strength;
            Strength_value.innerText = Strength.toString();
            lblStrength [0].innerText = Strength.toString();
         }
         else
            lblStrength [1].innerText = hero.Strength.toString();
         
         flee_id = 0;
         for (var i = 0; i < enemiesCount; i++)
            if (enemy [i].Alive)
               if (enemy [i].Strength > 0) {
                  lblStrength [i + 2].innerText = enemy [i].Strength;
                  if (enemy [i].Loyalty && enemy [i].Loyalty <= 3)
                     flee_id = i + 1;
               }
               else {
                  num_killed++;
                  removeEnemy(i);
               }

         clearInterval(timerID);
         phase = 1;
         
         if (flee_id)
            removeEnemy(flee_id - 1);
         
         exp_Cond = eval(endCondition);         
         if (num_win == enemiesCount || exp_Cond || !hero.Strength) {
			if (hero.Strength) {
			   fightEnd();
			   if (num_win == enemiesCount)
			      readParagraph("win");
               afterBattle();
               return;
            }   
            else               
               if (copy) {
                  hero.Agility = Agility + AgilityFactor;
                  hero.Strength = Strength;
                  hero.Hurt = false;
                  Fight_window.childNodes [1].style.visibility = 'hidden';
                  lblStrength [1].style.visibility = 'hidden';
                  lblStrength [0].style.top = 151 + 'px';
                  copy = false;
                  if (exp_Cond)
                     fightEnd();
               }
               else {
                  readParagraph("die");
                  fightEnd();
                  fight.numWin = "die";
                  fight.spendRounds = fight.expRounds = 0;
                  afterBattle();
                  return;
               }
         }                               
      }       
   
      else step--;
       
   setFigurePositions(step);
}       

function onLabel()
{
   selectedOpponent = parseInt(this.id);
   imgLabel0 = Fight_window.childNodes [selectedOpponent + 10];
   imgLabel0.src = imgLabel [selectedOpponent].src;
   if (selectedOpponent != 4) {
      imgLabel0.onclick = battleRound;
      if (selectedOpponent != 0)
         selectedOpponent--;
   }
   else
      imgLabel0.onclick = Flee;
}

function out_of_Label()
{
   var S = new String;   
   
   S = imgLabel0.src;
   imgLabel0.src = S.substring(0, S.length - 13) + ".bmp";
   imgLabel0.onclick = null;
}

function battleRound()
{
   
   hero.Hurt = false;
        
   var rand = new RandomNumberGenerator();
   dice = Math.floor(rand.next() * 6) + 1;
   //dice = Math.floor(Math.random() * 6) + 1;
   var Power = dice * 2 + hero.Agility;
   for (var i = 0; i < enemiesCount; i++) {
      if (!enemy [i].Alive)
         continue;
      dice = Math.floor(rand.next() * 6) + 1;
	  //dice = Math.floor(Math.random() * 6) + 1;
      enemy [i].Power = dice * 2 + enemy [i].Agility;
      if (enemyPowerFactor)
         enemy [i].Power += enemyPowerFactor;
      if (enemy [i].Power > Power) {
         if (enemy [i].StrengthFactor)
            hero.Strength -= enemy [i].StrengthFactor;
         else   
            hero.Strength -= 2;
         if (enemy [i].Loyalty)
            enemy [i].Loyalty++;
         if (enemy [i].Loyalty > 18)
            if (enemy [i].StrengthFactor)
               enemy [i].StrengthFactor++;
            else
               enemy [i].StrengthFactor = 3;
             
         if (!hero.Hurt)
            hero.Hurt = true;
         enemy [i].Hurt = false;
         enemy [i].num_block = 0;
      }
      else
         if (i == selectedOpponent)
            if (Power > enemy [i].Power) {
               enemy [i].Strength -= 2;               
               if (enemy [i].Loyalty)
                  enemy [i].Loyalty -= 2;
               enemy [i].Hurt = true;
               enemy [i].num_block = 0;
            }
            else {
               if (enemy [i].Loyalty) {
                  enemy [i].num_block++;
                  if (enemy [i].num_block == 2) {
                     enemy [i].Loyalty--;
                     enemy [i].num_block = 0;
                  }
               }
               if (enemy [i].Hurt)
                  enemy [i].Hurt = false;
            }         
         else   
            enemy [i].Hurt = false;      
   }   
   
   timerID = setInterval("battleSequence()", 200);
      
}

function battleEndCondition(cond)
{
   endCondition = cond;
}


function afterBattle(loc1, expRounds, loc2)
/* Функция, определяющая дальнейшие действия по завершении сражения.
 * Первый параметр задает номер параграфа, на который надо перейти
 * в случае победы героя (стандартное действие). Второй возможный
 * параметр expRounds задается в виде ">n", ">=n", <n", "<=n", где
 * n - количество раундов атаки. Если число проведенных раундов атаки
 * определяется соотношением, заданным в expRounds, происходит
 * переход на параграф loc2, который задается третьим параметром. */
{
   var loc;

   if (initBattle) {
      var len = afterBattle.arguments.length;
      if (len == 2)
         len--;
	  else if (len > 3)
		 len == 3;
	  fight.spendRounds = 0;
	  if (len == 3 && (expRounds.charAt(0) == ">" || expRounds.charAt(0) == "<"))
	     endCondition = "fight.spendRounds" + expRounds;
      
      for (var i = 0; i < 4; i++)
         if (i < len)
            fight [fightEndParamsStr [i + 1]] = afterBattle.arguments [i];
         else
            fight [fightEndParamsStr [i + 1]] = "";
      initBattle = false;
	  return;
   }

   BlockAllEvents.style.display = 'none';
   BlockAllEvents.style.zIndex = -1;
   var exp_Rounds;
   exp_Cond = eval("exp_Rounds = " + fight.spendRounds + fight.expRounds);   
   
   if (!exp_Cond || (!exp_Rounds || fight.expRounds == ""))      
      loc = eval(fight.numWin);      
   else      
      loc = eval(fight.num2);         
   
   if (loc != null && loc != undefined)      
      readParagraph("" + loc);
      
   AgilityFactor = 0;
   enemyPowerFactor = 0;
   enemyStrengthFactor = 0;      
}   

function Flee(numArticle)
{
   if (initBattle) {
      flee = true;
      fleeArticle = numArticle;
      imgLabel0 = Fight_window.childNodes [14];
      imgLabel0.style.visibility = 'visible';
   }   
   else {
      fight.numWin = fleeArticle;
      fight.spendRounds = fight.expRounds = 0;
      fightEnd();
      afterBattle();
   }   
}

function createCopy()
{
   removeItem('Копия');    
   copy = true;
}

function createLabel(Label, _id)
{
   if (_id > 0 && _id < 4)
      Label += _id;     
         
   imgLabel0 = createItem(Label, false);
   imgLabel0.id = _id.toString();
   if (_id == 0)
      imgLabel0.style.top = '107px';
   if (_id == 4)
      imgLabel0.style.top = '217px';
   imgLabel0.style.left = '23px';
   imgLabel0.style.visibility = 'hidden';
   imgLabel0.onmouseover = onLabel;
   imgLabel0.onmouseout = out_of_Label;   
   
   Fight_window.appendChild(imgLabel0);
         
   imgLabel [_id] = new Image();
   imgLabel [_id].src = imgUrl + Label + "_Selected.bmp";
}

function InitGame()
{
    textHeight = 0;
    Panel = document.getElementById('Panel');
    Fight_window = document.getElementById('Fight_window');
    BlockAllEvents = document.getElementById('BlockAllEvents');

    Agility_value = document.getElementById('Agility_value');
    Strength_value = document.getElementById('Strength_value');
    Charm_value = document.getElementById('Charm_value');
    Luck_value = document.getElementById('Luck_value');
    Gold_value = document.getElementById('Gold_value');
    Water_value = document.getElementById('Water_value');


    container_legend = document.getElementById('container_legend');
    container_legend.style.top = textHeight + 110 + 'px';

    var ind_y = textHeight + 12;
    var k = 1;
    var indicator;
   
    sumLuck = 0;
    for (var i = 0; i < 6; i++) {
        if (i < 5) {
            Inventory [i] = new Array;
            var figImg = document.createElement("IMG");
            figImg.style.position = 'absolute';
            figImg.style.visibility = 'hidden';
            Fight_window.appendChild(figImg);
        }
        do
        {
            indicator = Panel.childNodes [k++];
        }
        while (indicator.tagName != 'DIV');
        indicator.style.top = ind_y + 'px';
        ind_y += 16;

        var Str;
        figureImages [i] = new Image();
        var j = Math.floor(i / 2);
        if (j * 2 == i)
            Str = imgUrl + "Hero_Move";
        else
            Str = imgUrl + "Enemy_Move";
        Str += j + ".bmp";
        figureImages [i].src = Str;
    }
   
    for (i = 0; i < 4; i++) {
        figureImages [i + 6] = new Image();
        j = Math.floor(i / 2);
        if (j * 2 == i)
            Str = imgUrl + "Hero_";
        else
            Str = imgUrl + "Enemy_";
        if (i < 2)
            Str += "Move3";
        else
            Str += "Hurt";
        Str += ".bmp";
        figureImages [i + 6].src = Str;
    }
   
   
    for (i = 0; i < 5; i++) {
        lblStrength [i] = document.createElement("DIV");
        lblStrength [i].style.position = 'absolute';
        lblStrength [i].style.color = 'Yellow';
        lblStrength [i].style.fontWeight = 'bold';
        lblStrength [i].style.visibility = 'hidden';
        Fight_window.appendChild(lblStrength [i]);

        if (i < 4) {
            enemy [i] = new Array(5);
            enemy [i].Agility = 0;
            enemy [i].Strength = 0;
            enemy [i].Power = 0;
            enemy [i].Hurt = false;
            enemy [i].Alive = false;
        }
    }
    hero = new Array(5);
   
    for (i = 0; i < 4; i++)
        createLabel("Fight_Label", i);
    createLabel("Flee_Label", 4);
   
    setInitial_Parameters();
    init_Containers();
    DisplayStuff();

    Panel.onmousemove = function(e)
    {
        var offset = getOffset(window.event || e);
        var x = offset.x;
        var y = offset.y;
        if (drag) {
            if (x + item_moved.width > 596 && y + item_moved.height > 75)
            {
                imgBasket = Panel.childNodes [12];
                if (imgContainer != imgBasket) {
                    imgBasket.onmouseover = function() {imgBasket.style.visibility = 'visible'; inBasket = true; };
                    imgBasket.onmouseout = hideContainer;
                    item_moved.style.zIndex = 1;
                    item_moved.style.visibility = 'hidden';
                    imgBasket.style.visibility = 'visible';
                    inBasket = true;
                }
                else
                    if (!inBasket) {
                        imgBasket.style.visibility = 'visible';
                        inBasket = true;
                }
            }
            else if (inBasket && imgContainer == imgBasket) {
                hideContainer();
                inBasket = false;
            }
            item_moved.style.left = x + 'px';
            item_moved.style.top = y + 'px';
        }
        else
            if (Strength)
                point_on_containers(e, x, y);
    };

    Panel.onmouseup = function()
    {
        if (drag) {
            drag = false;
            imgBasket.style.visibility = 'hidden';
            if (inBasket) {
                removeItem();
                inBasket = false;
            }
            else {
                item_moved.style.left = restore_x + 'px';
                item_moved.style.top = restore_y + 'px';
                item_moved.style.zIndex = 0;
                item_moved = "";
            }
        }
    };
}

function useItem()
{
   var i;
   for (i in itemsRusNames [3])
      if (itemsRusNames [3] [i] == this.title) {
         if (canChangeDress)
            if (Inventory [0][this.title])
               putOnItem(this.title);
            else
               putOffItem(this.title);
         else
            alert("Вы не можете переодеваться здесь!");         
         return;
      }

   if (Strength < Max_Strength) {
      item_moved = this;
      modifyStrength(item_moved.ch);
      removeItem();
   }
   else
      if (this.title == "Еда")
         alert("Ваша сила равна максимальной - перекусите позднее!");
      else
         alert("Ваша сила равна максимальной - используйте заклятие исцеления позднее!");
}

function dragItem()
{
   drag = true;
   item_moved = this;
   restore_x = parseInt(this.style.left);
   restore_y = parseInt(this.style.top);
   highlight_container(selected_container);
}

function PanelClear()
{
    Agility_value.style.display = 'none';
    Strength_value.style.display = 'none';
    Charm_value.style.display = 'none';
    Luck_value.style.display = 'none';
    Gold_value.style.display = 'none';
    Water_value.style.display = 'none';

    var itemIndex = 13;
    for (var i = 0; i < selected_container; i++)
        itemIndex += itemsAmount [i];
    for (i = 0; i < itemsAmount [selected_container]; i++)
        Panel.childNodes [itemIndex++].style.visibility = "hidden";

    imgContainer.style.visibility = "hidden";
    container_legend.innerHTML = "";

    Panel.style.backgroundImage = "url('#quest_path$/Img/Panel_die.bmp')";

    BlockAllEvents.style.display = '';
    BlockAllEvents.style.visibility = 'visible';
    BlockAllEvents.style.zIndex = 1;
}

function PanelShow()
{
   Agility_value.style.display = '';
   Strength_value.style.display = '';
   Charm_value.style.display = '';
   Luck_value.style.display = '';
   Gold_value.style.display = '';
   Water_value.style.display = '';

   Panel.style.backgroundImage = "url('#quest_path$/Img/Panel_temp.bmp')";

   BlockAllEvents.style.display = 'none';

   selected_container = 0;
   highlight_container(selected_container);
}

function nextRandomNumber()
{
   this.seed = (this.seed*9301+49297) % 233280;
   return this.seed/(233280.0);
}

function RandomNumberGenerator()
{
   this.seed = new Date().getTime();   
   this.next = nextRandomNumber;
   return this;
}
</appendScript>

<script>
InitGame();
</script>

goto -19
